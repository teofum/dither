var ze=Object.defineProperty,Le=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var $=(e,n,t)=>n in e?ze(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,v=(e,n)=>{for(var t in n||(n={}))Be.call(n,t)&&$(e,t,n[t]);if(le)for(var t of le(n))Ye.call(n,t)&&$(e,t,n[t]);return e},p=(e,n)=>Le(e,Ze(n));var U=(e,n,t)=>($(e,typeof n!="symbol"?n+"":n,t),t);import{j as be,r as T,R as we,a as We}from"./vendor.f81f3cea.js";const Ue=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerpolicy&&(l.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?l.credentials="include":c.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(c){if(c.ep)return;c.ep=!0;const l=t(c);fetch(c.href,l)}};Ue();var q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAACAgIDAwMAAAAD///8A//8AgIA+In3bAAAAAXRSTlMAQObYZgAAAAFiS0dEBI9o2VEAAAAHdElNRQfiBBMBJCt84jxJAAAAWElEQVQI12NgQABGQUFBARBDSElJSRgk4OLioghmOBsbQxlhiVBGGowhKAhhOCkpKRoC9TMaA4GQAcQYRUUgQxgEBA0YGI1AwJiBQQRosIsTUMYYDJDcAABR5A0vWu5CGwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNC0xOVQwMTozNjo0My0wNDowMNV8Hl4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDQtMTlUMDE6MzY6NDMtMDQ6MDCkIabiAAAAAElFTkSuQmCC",oe="data:image/png;base64,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UmVhZHlxyWU8AAADdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRUYzQ0IzNTNFMTQxMUVBOTM2MEJBMjMxMUIwNTgyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRUYzQ0IzNDNFMTQxMUVBOTM2MEJBMjMxMUIwNTgyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmOTU3NDFiYi0yY2U5LTFhNDUtYmY2MC1jY2Q4YWFhYzJjNzUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODZlOGExNTItNjdhZS05MjQ5LWE1NzItYmY5Njk2NzNiN2EwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/N1XTgAAAFBJREFUeNpi/P//PwMpgAnGYGRk/A/C6ArQxeEagDYxwhQgK0aWA4uhOwndFmTFKDZgU4CuGKsGbE7CqQHZzdj8hBFKuJyEYivZ8UAsAAgwAALnMRFw3KPlAAAAAElFTkSuQmCC",fe="data:image/png;base64,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UmVhZHlxyWU8AAADdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMDQ1OTRGRDNFMTUxMUVBQTIyMUZGMkE5OTFBM0M5MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMDQ1OTRGQzNFMTUxMUVBQTIyMUZGMkE5OTFBM0M5MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmOTU3NDFiYi0yY2U5LTFhNDUtYmY2MC1jY2Q4YWFhYzJjNzUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODZlOGExNTItNjdhZS05MjQ5LWE1NzItYmY5Njk2NzNiN2EwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+fEJGSgAAADZJREFUeNpi/P//PwMjI+N/BgIAqI4RRDMxkAhY0E3ABpBdQLINw0EDC7aQwAcYQRFHCgAIMACrSw8T5h39PwAAAABJRU5ErkJggg==";const X=(...e)=>e.join(" ");var ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAMElEQVQokWMYBoARyQv/8XgHro4Jrvr/f0ZsKtHFmfBJYjMERQOyIlw2DnnAwMAAAJr8EvyXKpcyAAAAAElFTkSuQmCC",Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAASklEQVQokd2PSQoAMAgDTT+uvtwiRenmvdSLmMTA0AeDQBARq3CYGcCItklHEfaVZW3zcQkv+v6QZoRVdSnJw+xAcCH9YHhtiKgDumQPB+3C89EAAAAASUVORK5CYII=";const a=be.exports.jsx,y=be.exports.jsxs;function Y(e){var l;let n=null,t=null;T.exports.useEffect(()=>{e.options.find(r=>r.value===e.value)||i(e.options[0])},[e.options]);const i=r=>{!r||(t&&t.classList.remove("show"),e.onChange&&e.onChange({selected:r}))},c=()=>{if(!(!n||!t))if(t.classList.contains("show"))t.classList.remove("show");else{const r=n.getBoundingClientRect();t.style.top=`${r.bottom}px`,t.style.left=`${r.left}px`,t.style.width=`${r.width}px`,t.classList.add("show");const d=s=>{const o=s.target;(n==null?void 0:n.contains(o))||(t&&t.classList.remove("show"),window.removeEventListener("mousedown",d))};window.addEventListener("mousedown",d)}};return y("div",{className:"cmb-root bevel inset",ref:r=>n=r,children:[a("input",{type:"text",className:"cmb-input",readOnly:!0,disabled:e.disabled,value:((l=e.options.find(r=>r.value===e.value))==null?void 0:l.name)||""}),a("button",{className:"cmb-button bevel",onClick:c,children:a("img",{src:e.disabled?Qe:ye,alt:"v"})}),a("div",{className:"cmb-option-list",ref:r=>t=r,children:e.options.map((r,d)=>a("div",{className:"cmb-option",onClick:()=>i(r),children:r.name},d))})]})}const Oe=[{className:"theme__default",displayName:"Default"},{className:"theme__dark",displayName:"Dark"},{className:"theme__2k",displayName:"2K"},{className:"theme__blue",displayName:"Steel"}],ce=[{className:"hp",displayName:"HP 100LX 6x8"},{className:"hp-big",displayName:"HP 100LX 10x11"},{className:"apricot",displayName:"Apricot Xen C"},{className:"siemens",displayName:"Siemens PC-D"},{className:"philips",displayName:"Philips :YES G"},{className:"ti",displayName:"TI Pro"},{className:"jpn12",displayName:"DOS/V JPN12"},{className:"jpn16",displayName:"DOS/V JPN16"},{className:"ank16",displayName:"DOS/V ANK16"},{className:"stingray",displayName:"CL Stingray 8x16"}];function Fe(){var R,D,f;const e=document.documentElement.className.split(" "),n=e.find(u=>u.startsWith("theme__")),t=(R=e.find(u=>u.startsWith("font-base__")))==null?void 0:R.split("__")[1],i=(D=e.find(u=>u.startsWith("font-text__")))==null?void 0:D.split("__")[1],c=(f=e.find(u=>u.startsWith("font-title__")))==null?void 0:f.split("__")[1],[l,r]=T.exports.useState(n||""),[d,s]=T.exports.useState(t||""),[o,m]=T.exports.useState(i||""),[h,A]=T.exports.useState(c||""),g=X(l,`font-base__${d}`,`font-text__${o}`,`font-title__${h}`);console.log(g);const w=()=>{document.documentElement.className=g,localStorage.setItem("__theme",g)};return y("div",{className:"theme-root content",children:[a("div",{className:"theme-preview bevel content",children:a("div",{className:X("theme-preview-bg",g),children:a("div",{className:"theme-fake-frame bevel",children:y("div",{className:"win-main",children:[y("div",{className:"win-titlebar",children:[a("img",{className:"win-titlebar-icon",src:q,alt:"icon"}),a("div",{className:"win-titlebar-spacer"}),a("div",{className:"win-title",children:"Window Title"}),a("div",{className:"win-titlebar-spacer"}),y("div",{className:"win-titlebar-button-group",children:[a("div",{className:"win-titlebar-button fake-button icon-button bevel",children:a("img",{src:fe,alt:"max"})}),a("div",{className:"win-titlebar-button fake-button icon-button bevel",children:a("img",{src:oe,alt:"x"})})]})]}),a("div",{className:"win-content theme-fake-content bevel",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."}),y("div",{className:"action-bar",children:[a("div",{className:"fake-button bevel",children:"Cancel"}),a("div",{className:"fake-button bevel",children:"OK"})]})]})})})}),y("div",{className:"theme-settings",children:[a("span",{className:"theme-label",children:"Color Theme"}),a(Y,{value:l,options:Oe.map(u=>({name:u.displayName,value:u.className})),onChange:u=>r(u.selected.value)}),a("span",{className:"theme-label",children:"Text Font"}),a(Y,{value:o,options:ce.map(u=>({name:u.displayName,value:u.className})),onChange:u=>m(u.selected.value)}),a("span",{className:"theme-label",children:"Title Font"}),a(Y,{value:h,options:ce.map(u=>({name:u.displayName,value:u.className})),onChange:u=>A(u.selected.value)})]}),a("div",{className:"theme-actions action-bar",children:a("button",{className:"bevel",onClick:w,children:"Apply"})})]})}var Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAP1BMVEUAAADMzGb/zDP//4BmZmaysrKAgIDMM8wzM5kzMzPMMzP////AwMD/ZmaZZmZfX1+AAACZMzNmAACZAAB3d3cazDxqAAAAAXRSTlMAQObYZgAAAAFiS0dECx/XxMAAAAAHdElNRQfiBhoANRcGXhUDAAAAc0lEQVQY01WP2xLCIAwFuRSqhyJp9P+/VXJCnbpPsLOQSQgXMcZwJ+WcNz+WaqR9/4mHYUV6/gmguSkHmcnUZkojWzIo+mvQGHwCiEdH5acdco67gOhKXHS8PytxMYMmEI6uDMg5uIAHMoFcW6qarqrr/gXDPAZ1GQ9R2QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNi0yNlQwMDo1MzoyMy0wNDowMGnd9RQAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDYtMjZUMDA6NTM6MjMtMDQ6MDAYgE2oAAAAAElFTkSuQmCC";const ke={title:"System Theme",minWidth:440,minHeight:400,maxWidth:440,iconUrl:Ve,autoSize:!0,maximizable:!1,children:a(Fe,{})};var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAPElEQVQokWMYBoAR5oX////DfcPIyPj/////jEh8uBwTup9BipFpdMCETTEuPlgNEhuriVjUDW3AwMAAAMqIDA8h6hYtAAAAAElFTkSuQmCC";function j(e){const[n,t]=T.exports.useState(!0);return y("div",{className:"coll-root bevel",children:[y("div",{className:"coll-titlebar",onClick:()=>t(!n),children:[a("span",{className:"coll-title",children:e.title}),a("div",{className:"coll-titlebar-spacer"}),a("img",{src:n?Pe:ye})]}),a("div",{className:"coll-content",style:n?void 0:{display:"none"},children:e.children})]})}const Ae=["B","K","M","G","T","P"],je=e=>{let n=0;for(;e>=1e3&&n<Ae.length;)e=e/1e3,n++;const t=e.toString();return t.substring(0,t.includes(".")?5:4)+Ae[n]};function Je(e){let n=null;const t=l=>{e.onChange(l)},i=l=>{const r=l.target;if(r==null?void 0:r.files){const d=r.files[0];t(p(v({},e.options),{info:p(v({},e.options.info),{src:URL.createObjectURL(d),filename:d.name,meta:[{prop:"Size (bytes)",value:je(d.size)}]}),element:null}))}},c=l=>{const r=l.target;t(p(v({},e.options),{info:p(v({},e.options.info),{width:r.naturalWidth,height:r.naturalHeight,meta:[...e.options.info.meta,{prop:"Dimensions",value:`${r.naturalWidth}x${r.naturalHeight}`}]}),element:r}))};return y("div",{className:"dlab-image-root",children:[a("input",{type:"file",style:{display:"none"},ref:l=>n=l,onChange:l=>i(l.nativeEvent)}),a("span",{className:"dlab-image-filename",children:e.options.info.filename||"No image"}),a("button",{className:"dlab-image-upload-button bevel",onClick:()=>n==null?void 0:n.click(),children:"Browse..."}),a("div",{className:"dlab-image-preview bevel inset light",children:e.options.info.src?a("img",{src:e.options.info.src,onLoad:l=>c(l.nativeEvent)}):a("span",{children:"No preview available"})}),a("div",{className:"dlab-image-meta",children:e.options.info.meta.map((l,r)=>y("div",{className:"dlab-image-meta-item",children:[a("span",{className:"dlab-image-meta-name",children:l.prop}),a("span",{className:"dlab-image-meta-value",children:l.value})]},r))})]})}var N=(e=>(e.CGA2Bit="IBM CGA 2-bit modes",e.RetroPC="Retro PCs",e.RetroVC="Retro Consoles",e.Mono="Monochrome",e.Duo="Dual Tone",e.RGB="RGB",e.CMYK="CMYK",e.Auto="Optimized (Auto)",e.User="User (custom)",e.Other="Other",e.Generated="__AUTOGENERATED",e.Hidden="__HIDDEN",e))(N||{}),Q=(e=>(e.CPU="Software",e.GL="WebGL",e))(Q||{}),G=(e=>(e[e.Input=0]="Input",e[e.Combo=1]="Combo",e[e.Range=2]="Range",e))(G||{}),W=(e=>(e[e.KeepOriginalSize=0]="KeepOriginalSize",e[e.FitToSize=1]="FitToSize",e[e.ForceResize=2]="ForceResize",e))(W||{}),F=(e=>(e.Ready="Ready",e.Rendering="Rendering...",e.Done="Done",e))(F||{});const Xe={renderTarget:null,options:{image:{info:{src:"",filename:"",width:0,height:0,meta:[]},element:null},resize:{mode:0,x:800,y:600},palette:{group:N.RetroPC,palette:null,customPalettes:[],showEditor:!1},process:{device:Q.GL,process:null,settingValues:{}},liveRender:!0},status:{renderStatus:"Ready",lastRenderTime:0,renderWidth:0,renderHeight:0},view:1},He=[{value:W.KeepOriginalSize,name:"Keep original size"},{value:W.FitToSize,name:"Fit to size"},{value:W.ForceResize,name:"Force resize"}];function Ke(e){const n=c=>{e.onChange(c)},t=c=>{const l=c.key;l!=="Backspace"&&!l.match(/[0-9]/)&&!l.startsWith("Arrow")&&c.preventDefault()},i=(c,l)=>{const d=c.target.value;n(p(v({},e.options),{[l]:parseInt(d||"0")}))};return y("div",{className:"dlab-resize-root",children:[a(Y,{value:e.options.mode,options:He,onChange:c=>n(p(v({},e.options),{mode:c.selected.value}))}),y("div",{className:"dlab-resize-inputs",children:[a("input",{type:"number",className:"bevel",value:e.options.x,disabled:e.options.mode===W.KeepOriginalSize,onKeyDown:c=>t(c.nativeEvent),onInput:c=>i(c.nativeEvent,"x")}),a("span",{children:"x"}),a("input",{type:"number",className:"bevel",value:e.options.y,disabled:e.options.mode===W.KeepOriginalSize,onKeyDown:c=>t(c.nativeEvent),onInput:c=>i(c.nativeEvent,"y")})]})]})}var b=(e=>(e.Indexed="Indexed",e.Mono="Monochrome",e.RGB="RGB",e.Mixer="Mixer",e.Auto="Auto",e))(b||{});const _e=(e,n)=>{const i=e.data.slice(0,4)[1]===1,c=(e.data.length-4)/5,l=i?[255,255,255]:[0,0,0],r=m=>e.data[4+m*5],d=m=>e.data[5+m*5],s=m=>e.data.slice(6+m*5,9+m*5),o=m=>{let h=n;for(let A=0;A<m;A++)h=~~(h/r(A));return h%r(m)};for(let m=0;m<c;m++)s(m).forEach((h,A)=>{i&&(h=255-h);const g=~~(h*d(m)),w=h-g,R=g+o(m)*~~(w/(r(m)-1));l[A]+=i?-R:R,l[A]<0&&(l[A]=0),l[A]>255&&(l[A]=255)});return l},ie=e=>{switch(e.type){case b.Indexed:return e.data.length/3;case b.Mono:return e.data[0];case b.RGB:return e.data[0]*e.data[1]*e.data[2];case b.Mixer:{const n=(e.data.length-4)/5;let t=1;for(let i=0;i<n;i++)t*=e.data[4+i*5];return t}case b.Auto:return e.data[0];default:return 0}},Ne=(e,n)=>{if(n<0||n>=ie(e))throw new Error(`Color index ${n} out of bounds`);switch(e.type){case b.Indexed:return e.data.slice(n*3,n*3+3);case b.Mono:return e.data.slice(2,5).map(t=>{const i=~~(t*e.data[1]),c=t-i;return i+n*~~(c/(e.data[0]-1))});case b.Mixer:return _e(e,n);case b.RGB:{const t=n%e.data[2],i=~~(n/e.data[2])%e.data[1];return[~~(n/(e.data[2]*e.data[1])),i,t].map((l,r)=>l*~~(255/(e.data[r]-1)))}case b.Auto:default:throw new Error("Invalid or Auto palette type")}},P=e=>Array.from({length:ie(e)},(n,t)=>Ne(e,t)),Ie={name:"Windows 4-bit RGBI",type:b.Indexed,group:N.RetroPC,data:[0,0,0,0,0,128,0,128,0,0,128,128,128,0,0,128,0,128,128,128,0,192,192,192,128,128,128,0,0,255,0,255,0,0,255,255,255,0,0,255,0,255,255,255,0,255,255,255]},qe={name:"Commodore 64 (*)",type:b.Indexed,group:N.RetroPC,data:[0,0,0,98,98,82,137,137,137,173,173,173,255,255,255,159,78,68,203,126,117,109,84,18,161,104,60,201,212,135,154,226,155,92,171,94,106,191,198,136,126,203,80,69,155,160,87,163]},$e={name:"Apple II (16-color) (*)",type:b.Indexed,group:N.RetroPC,data:[0,0,0,156,156,156,255,255,255,96,78,189,208,195,255,255,68,253,227,30,96,255,160,208,255,106,60,96,114,3,208,221,141,20,245,60,0,163,96,114,255,208,20,207,253]},et={name:"Apple II High-res (6-color) (*)",type:b.Indexed,group:N.RetroPC,data:[0,0,0,255,255,255,255,68,253,255,106,60,20,245,60,20,207,253]},tt={name:"Apple IIGS (MCV)",type:b.Indexed,group:N.RetroPC,data:[0,0,0,221,0,51,0,0,153,221,34,221,0,119,34,85,85,85,34,34,255,102,170,255,136,85,0,255,102,0,170,170,170,255,153,136,17,221,0,255,255,0,68,255,153,255,255,255]},nt={name:"Macintosh II (1987)",type:b.Indexed,group:N.RetroPC,data:[255,255,255,255,255,0,255,102,0,221,0,0,255,0,153,51,0,153,0,0,204,0,153,255,0,170,0,0,102,0,102,51,0,153,102,51,187,187,187,136,136,136,68,68,68,0,0,0]},at={name:"16-color palette 1",type:b.Indexed,group:N.Other,data:[8,0,0,32,26,11,67,40,23,73,41,16,35,67,9,93,79,30,156,107,32,169,34,15,43,52,124,43,116,9,208,202,64,232,160,119,106,148,171,213,196,179,252,231,110,252,250,226]},ot={name:"IBM CGA 4-bit RGBI",type:b.Indexed,group:N.RetroPC,data:[0,0,0,0,0,170,0,170,0,0,170,170,170,0,0,170,0,170,170,85,0,170,170,170,85,85,85,85,85,255,85,255,85,85,255,255,255,85,85,255,85,255,255,255,85,255,255,255]},it={name:"CGA Mode 4 Palette 0 (low)",type:b.Indexed,group:N.CGA2Bit,data:[0,0,0,0,170,0,170,0,0,170,85,0]},rt={name:"CGA Mode 4 Palette 0 (high)",type:b.Indexed,group:N.CGA2Bit,data:[0,0,0,85,255,85,255,85,85,255,255,85]},st={name:"CGA Mode 4 Palette 1 (low)",type:b.Indexed,group:N.CGA2Bit,data:[0,0,0,0,170,170,170,0,170,170,170,170]},lt={name:"CGA Mode 4 Palette 1 (high)",type:b.Indexed,group:N.CGA2Bit,data:[0,0,0,85,255,255,255,85,255,255,255,255]},ct={name:"CGA Mode 5 (low)",type:b.Indexed,group:N.CGA2Bit,data:[0,0,0,0,170,170,170,0,0,170,170,170]},At={name:"CGA Mode 5 (high)",type:b.Indexed,group:N.CGA2Bit,data:[0,0,0,85,255,255,255,85,85,255,255,255]},dt={name:"Game Boy (2-bit MC)",type:b.Indexed,group:N.RetroVC,data:[15,56,15,48,98,48,139,172,15,155,188,15]},mt={name:"NES (All colors) (*)",type:b.Indexed,group:N.RetroVC,data:[0,0,0,40,40,40,168,168,168,0,24,32,0,96,112,0,192,208,144,224,232,0,30,0,0,104,16,0,200,112,144,232,200,0,104,0,40,192,32,168,232,160,0,24,0,8,88,0,112,176,0,200,224,144,16,0,0,96,64,0,192,152,0,232,216,136,64,0,0,160,32,0,248,128,24,248,200,160,88,0,0,208,16,0,248,112,104,248,192,192,88,0,16,208,0,88,248,112,176,248,192,224,56,0,80,160,8,168,248,104,248,248,192,248,0,8,112,88,24,216,152,104,248,208,184,248,0,8,120,8,48,224,80,120,248,176,192,248,0,8,88,0,72,184,32,160,248,168,216,248,72,72,72,160,160,160,248,248,248]},ut={name:"8-color RGB (3-bit, 1bpc)",type:b.RGB,group:N.RGB,data:[2,2,2]},ht={name:"16-color RGB (4-bit, 1-2-1)",type:b.RGB,group:N.RGB,data:[2,4,2]},gt={name:"32-color RGB (5-bit, 2-2-1)",type:b.RGB,group:N.RGB,data:[4,4,2]},vt={name:"64-color RGB (6-bit, 2bpc)",type:b.RGB,group:N.RGB,data:[4,4,4]},pt={name:"256-color RGB (8-bit, 3-3-2)",type:b.RGB,group:N.RGB,data:[8,8,4]},bt={name:"Black/White (1-bit MC)",type:b.Mono,group:N.Mono,data:[2,0,255,255,255]},wt={name:"Black/Green (1-bit MC)",type:b.Mono,group:N.Mono,data:[2,0,0,255,0]},ft={name:"Black/Amber (1-bit MC)",type:b.Mono,group:N.Mono,data:[2,0,255,200,15]},yt={name:"4-tone Greyscale (2-bit MC)",type:b.Mono,group:N.Mono,data:[4,0,255,255,255]},Nt={name:"4-tone Amber (2-bit MC)",type:b.Mono,group:N.Mono,data:[4,.04,255,200,15]},It={name:"16-tone Greyscale (4-bit MC)",type:b.Mono,group:N.Mono,data:[16,0,255,255,255]},Rt={name:"Pip-Boy 3000 (2-bit MC)",type:b.Mono,group:N.Other,data:[4,.15,64,252,155]},Et=[rt,it,lt,st,At,ct,Ie,ot,qe,$e,et,tt,nt,dt,mt,ut,ht,gt,vt,pt,bt,ft,wt,yt,Nt,It,at,Rt];function Ct(e){const n=s=>{e.onChange(s)},t=Et.concat(e.options.customPalettes),i=Object.values(N).filter(s=>!s.startsWith("__")).filter(s=>t.filter(o=>o.group===s).length>0).map(s=>({name:s,value:s})),c=t.filter(s=>s.group===e.options.group).map(s=>({name:s.name,value:s})),l=e.options.palette&&P(e.options.palette),r=(l==null?void 0:l.length)||0,d=r>64?"smaller":r>32?"small":"";return y("div",{className:"dlab-palette-root",children:[a(Y,{options:i,value:e.options.group,onChange:s=>n(p(v({},e.options),{group:s.selected.value}))}),a(Y,{options:c,value:e.options.palette,onChange:s=>n(p(v({},e.options),{palette:s.selected.value}))}),l&&a("div",{className:X("dlab-palette-preview",d),children:l.map((s,o)=>a("div",{className:"dlab-palette-swatch bevel content",style:{background:`rgb(${s[0]}, ${s[1]}, ${s[2]})`}},o))}),a("button",{className:"bevel",onClick:()=>n(p(v({},e.options),{showEditor:!0})),children:"Palette Editor"})]})}var Mt=`attribute vec4 a_position;
attribute vec2 a_texCoord;

varying vec2 v_texCoord;

void main() {
  gl_Position = a_position;

  v_texCoord = a_texCoord;
}`,xt=`precision mediump float;

uniform sampler2D u_image;

varying vec2 v_texCoord;

void main() {
  vec3 color = texture2D(u_image, v_texCoord).xyz;

  gl_FragColor = vec4(color, 1.0);
}`,Dt=`precision mediump float;

#define PALETTE_SIZE $ // $ is replaced in JS before compiling

#define CE 0.1 // Error multiplier, [0.0, 1.0] higher = more dither
#define CLIST_SIZE % // Candidate list size, higher is better quality but slower

uniform vec3 u_palette[PALETTE_SIZE];
uniform vec2 u_texSize;
uniform float u_gamma;
uniform sampler2D u_image;
uniform sampler2D u_threshold;
uniform float u_err_mult;

varying vec2 v_texCoord;

vec3 gamma(vec3 color) {
  return vec3(
    pow(color.x, u_gamma),
    pow(color.y, u_gamma),
    pow(color.z, u_gamma)
  );
}

vec3 ungamma(vec3 color) {
  float ungamma = 1.0 / u_gamma;
  return vec3(
    pow(color.x, ungamma),
    pow(color.y, ungamma),
    pow(color.z, ungamma)
  );
}

float compare(vec3 c1, vec3 c2) {
  return length(c1 - c2);
}

float luma(vec3 color) {
  return color.x * 0.299 + color.y * 0.587 + color.z * 0.114;
}

void main() {
  vec2 thresholdCoord = fract(v_texCoord * u_texSize / 8.0);
  float threshold = texture2D(u_threshold, thresholdCoord).x;

  vec3 color = texture2D(u_image, v_texCoord).xyz;
  color = gamma(color);

  // Build a list of potential candidates
  vec3 error = vec3(0.0);
  vec3 clist[CLIST_SIZE];
  for (int i = 0; i < CLIST_SIZE; i++) {
    vec3 target = color + error * u_err_mult;
    vec3 candidate = vec3(0.0);
    float dMin = 999999999.0; // Absurdly large number

    // Find the closest color from palette
    for (int j = 0; j < PALETTE_SIZE; j++) {
      vec3 test = u_palette[j];
      test = gamma(test);
      float d = compare(target, test);
      if (d < dMin) {
        dMin = d;
        candidate = test;
      }
    }

    // And add it to the candidate list
    clist[i] = candidate;

    // By adding the candidate's error to the next iteration,
    // the next candidate will compensate for that error thus
    // getting closer to the original color.
    error += color - candidate;
  }

  // Insertion sort the candidate list by luma
  for (int i = 1; i < CLIST_SIZE; i++) {
    for (int j = CLIST_SIZE; j > 0; j--) {
      if (j > i) continue; // silly GLSL won't let me do j = i, next best thing
      if (luma(clist[j-1]) <= luma(clist[j])) break;
      vec3 temp = clist[j-1];
      clist[j-1] = clist[j];
      clist[j] = temp;
    }
  }

  int index = int(threshold * float(CLIST_SIZE));
  // Silly workaround for GLSL not allowing indexing by variables
  for (int i = 0; i < CLIST_SIZE; i++) {
    if (i == index) color = clist[i];
  }

  color = ungamma(color);

  gl_FragColor = vec4(color, 1.0);
}
`,Tt=`precision mediump float;

#define PALETTE_SIZE $ // $ is replaced in JS before compiling

uniform vec3 u_palette[PALETTE_SIZE];
uniform vec2 u_texSize;
uniform float u_gamma;
uniform sampler2D u_image;
uniform sampler2D u_threshold;

varying vec2 v_texCoord;

struct ColorMix {
  vec3 color1;
  vec3 color2;
  float ratio;
};

float mixError(vec3 target, vec3 cmix, float compDist, float rmh) {
  return length(target - cmix) + compDist * (abs(rmh) + 0.5) / (40.0 / float(PALETTE_SIZE));
}

vec3 gamma(vec3 color) {
  return vec3(
    pow(color.x, u_gamma),
    pow(color.y, u_gamma),
    pow(color.z, u_gamma)
  );
}

vec3 ungamma(vec3 color) {
  float ungamma = 1.0 / u_gamma;
  return vec3(
    pow(color.x, ungamma),
    pow(color.y, ungamma),
    pow(color.z, ungamma)
  );
}

void main() {
  vec2 thresholdCoord = fract(v_texCoord * u_texSize / 8.0);
  float threshold = texture2D(u_threshold, thresholdCoord).x;

  vec3 color = texture2D(u_image, v_texCoord).xyz;

  vec3 cmix = vec3(0.0);
  vec3 c1 = vec3(0.0);
  vec3 c2 = vec3(0.0);
  vec3 g1 = vec3(0.0);
  vec3 g2 = vec3(0.0);
  ColorMix bestMix = ColorMix(vec3(0.0), vec3(0.0), 0.33);
  float minError = 999999999.0; // absurdly large number

  for(int i1 = 0; i1 < PALETTE_SIZE; i1++) {
    for(int i2 = 0; i2 < PALETTE_SIZE; i2++) {
      if(i2 < i1)
        continue;

      c1 = u_palette[i1];
      c2 = u_palette[i2];

      g1 = gamma(c1);
      g2 = gamma(c2);
      
      for(int ratio = 0; ratio < 64; ratio++) {
        if(i1 == i2 && ratio > 0)
          break;
        float r64 = float(ratio) / 64.0;
        cmix = g1 + r64 * (g2 - g1);

        float cdist = length(c2 - c1);
        float error = mixError(color, ungamma(cmix), cdist, r64 - 0.5);
        if(error < minError) {
          minError = error;
          bestMix = ColorMix(c1, c2, r64);
        }
      }
    }
  }

  color = threshold < bestMix.ratio ? bestMix.color2 : bestMix.color1;

  gl_FragColor = vec4(color, 1.0);
}`;const H={imageVert:Mt,imageFrag:xt,patternFrag:Dt,bayerFrag:Tt},Re=e=>e.viewport(0,0,e.canvas.width,e.canvas.height),K=(e,n,t)=>{const i=e.createShader(n);if(!i)throw new Error("createShader: gl.createShader failed");if(e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))return i;const l=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`createShader: compile error: ${l}`)},_=(e,n,t,i)=>{e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(n,i.size,i.type,i.normalize||!1,i.stride||0,i.offset||0)},Ee=(e,n,t)=>{const i=e.createProgram();if(!i)throw new Error("linkProgram: gl.createProgram failed");if(e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;const l=e.getProgramInfoLog(i);throw e.deleteProgram(i),new Error(`linkProgram: link error: ${l}`)},Ce=(e,n,t)=>{const i=e.createTexture();if(!i)throw new Error("tex2DFromData: failed to create texture");return e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,8,8,0,e.LUMINANCE,e.UNSIGNED_BYTE,new Uint8Array(n)),i},Me=(e,n,t)=>{const i=e.createTexture();if(!i)throw new Error("tex2DFromImage: failed to create texture");return e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),i},St=[-1,1,-1,-1,1,1,-1,-1,1,-1,1,1],Gt=[0,0,0,1,1,0,0,1,1,1,1,0],zt=(e,n)=>e!==void 0?e:n;let ee=null,de=null,me=null;const Lt=async(e,n)=>{if(!n.image.element)throw new Error("runBayerLike: Image is null");if(!n.palette.palette)throw new Error("runBayerLike: No palette selected");const t=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!t)throw new Error("runBayerLike: WebGL is unavailable");const i=n.process.settingValues,c=P(n.palette.palette).flat().map(f=>f/255);Re(t);const l=~~(c.length/3);(l!==me||t!==de)&&(ee=null),me=l,de=t;let r=ee;if(!r){console.log("Compiling shaders...");const f=H.bayerFrag.replace(/\$/g,l.toString()),u=K(t,t.VERTEX_SHADER,H.imageVert),x=K(t,t.FRAGMENT_SHADER,f);r=Ee(t,u,x),ee=r}const d=t.getAttribLocation(r,"a_position"),s=t.getAttribLocation(r,"a_texCoord"),o=t.getUniformLocation(r,"u_palette"),m=t.getUniformLocation(r,"u_texSize"),h=t.getUniformLocation(r,"u_image"),A=t.getUniformLocation(r,"u_threshold"),g=t.getUniformLocation(r,"u_gamma"),w=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,w),t.bufferData(t.ARRAY_BUFFER,new Float32Array(St),t.STATIC_DRAW);const R=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,new Float32Array(Gt),t.STATIC_DRAW),Me(t,n.image.element,t.TEXTURE0);const D=[0,48,12,60,3,51,15,63,32,16,44,28,35,19,47,31,8,56,4,52,11,59,7,55,40,24,36,20,43,27,39,23,2,50,14,62,1,49,13,61,34,18,46,30,33,17,45,29,10,58,6,54,9,57,5,53,42,26,38,22,41,25,37,21].map(f=>f*4);Ce(t,D,t.TEXTURE1),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(r),t.uniform3fv(o,c),t.uniform2f(m,t.canvas.width,t.canvas.height),t.uniform1i(h,0),t.uniform1i(A,1),t.uniform1f(g,zt(i.gamma,xe.settings.gamma.default)||0),_(t,d,w,{size:2,type:t.FLOAT}),_(t,s,R,{size:2,type:t.FLOAT}),t.drawArrays(t.TRIANGLES,0,6)},xe={device:Q.GL,name:"Color Pair Ordered",settings:{gamma:{name:"Gamma",type:G.Range,min:1,max:8,step:.2,default:2.2,showValue:e=>e.toFixed(1)}},run:Lt},Zt=[{x:1,y:0,w:7/16},{x:-1,y:1,w:3/16},{x:0,y:1,w:5/16},{x:1,y:1,w:1/16}],Bt=[{x:1,y:0,w:7/48},{x:2,y:0,w:5/48},{x:-2,y:1,w:3/48},{x:-1,y:1,w:5/48},{x:0,y:1,w:7/48},{x:1,y:1,w:5/48},{x:2,y:1,w:3/48},{x:-2,y:2,w:1/48},{x:-1,y:2,w:3/48},{x:0,y:2,w:5/48},{x:1,y:2,w:3/48},{x:2,y:2,w:1/48}],Yt=[{x:1,y:0,w:5/32},{x:2,y:0,w:3/32},{x:-2,y:1,w:2/32},{x:-1,y:1,w:4/32},{x:0,y:1,w:5/32},{x:1,y:1,w:4/32},{x:2,y:1,w:2/32},{x:-1,y:2,w:2/32},{x:0,y:2,w:3/32},{x:1,y:2,w:2/32}],Wt=[{x:1,y:0,w:8/42},{x:2,y:0,w:4/42},{x:-2,y:1,w:2/42},{x:-1,y:1,w:4/42},{x:0,y:1,w:8/42},{x:1,y:1,w:4/42},{x:2,y:1,w:2/42},{x:-2,y:2,w:1/42},{x:-1,y:2,w:2/42},{x:0,y:2,w:4/42},{x:1,y:2,w:2/42},{x:2,y:2,w:1/42}],Ut=[Zt,Bt,Wt,Yt];function ue(e,n=2.2){return e.map(t=>{let i=t/255;return i=i>.04045?Math.pow((i+.055)/1.055,n):i/12.92,i*100})}function Qt(e,n=2.2){return e.map(t=>{let i=t/100;return i=i>.0031308?1.055*Math.pow(i,1/n)-.055:i*12.92,~~(i*255)})}function Ot(e,n,t){let i=[],c=Number.POSITIVE_INFINITY;for(let l=0;l<n.length;l++){const r=t(e,n[l]);r<=c&&(i=n[l],c=r)}return i}const Ft=(e,n)=>(e[0]-n[0])*(e[0]-n[0])+(e[1]-n[1])*(e[1]-n[1])+(e[2]-n[2])*(e[2]-n[2]);function Vt(e,n,t,i){const c=e.width*e.height*4,l=e.width*4,r=Ut[t.matrix||0];if(!n.palette.palette)throw new Error("null palette");const d=P(n.palette.palette),s=t.gamma||2.2;for(let o=0;o<c;o+=4){const m=ue(Array.from(e.data.slice(o,o+3)),s);for(let h=0;h<3;h++)e.data[o+h]=m[h];o%(l*4)===0&&i&&i(o,c,e)}for(let o=0;o<d.length;o++)d[o]=ue(d[o],s);for(let o=0;o<c;o+=4){const m=Array.from(e.data.slice(o,o+3)),h=Ot(m,d,Ft),A=o%l/4;for(let w=0;w<3;w++)e.data[o+w]=Qt(h,s)[w];const g=m.map((w,R)=>(w-h[R])*(t.error_mult||1));for(let w=0;w<r.length;w++){const R=o+r[w].x*4+r[w].y*l;if(A+r[w].x>=0&&A+r[w].x<e.width)for(let D=0;D<3;D++)e.data[R+D]+=g[D]*r[w].w}o%(4*l)===0&&i&&i(o,c,e)}return e}const kt={id:"ProcErrorDiffusion",name:"Error Diffusion",run:Vt,maxAllowedPaletteSize:65536,supports:{threads:!1,gamma:!0},complexity:e=>e*2},Pt=[kt];function jt(){return new Worker("/dither/assets/worker.812cd4b0.js",{type:"module"})}class Jt{constructor(){U(this,"worker");U(this,"busy",!1);U(this,"x",0);U(this,"y",0);U(this,"onprogress");U(this,"onfinish");U(this,"onerror");this.worker=new jt,this.worker.onmessage=n=>{const t=n.data;switch(t.msg){case 0:this.onprogress&&this.onprogress(p(v({},t.params),{partial:t.params.partial?{data:t.params.partial,x:this.x,y:this.y}:void 0}));break;case 1:this.onfinish&&this.onfinish({data:t.params.result,x:this.x,y:this.y}),this.busy=!1;break;case 2:this.onerror&&this.onerror(t.params.error),this.busy=!1;break}}}get ready(){return!this.busy}start(n,t){var i;return this.busy?!1:(this.busy=!0,this.worker.postMessage({dataIn:n.data,options:{palette:t.palette,process:{process:{name:(i=t.process.process)==null?void 0:i.name},settingValues:t.process.settingValues}}}),!0)}terminate(){this.worker.terminate()}}const Xt=navigator.hardwareConcurrency,te=Math.max(~~(Xt/2),1),Ht=(e,n)=>new Promise((t,i)=>{var f;const c=n.image.element;if(!c)throw new Error("Image is null");const l=e.getContext("2d");if(!l)throw new Error("Unable to get output context");const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const d=r.getContext("2d");if(!d)throw new Error("Unable to get temp context");d.drawImage(c,0,0,e.width,e.height);const s=(f=n.process.process)==null?void 0:f.name,o=Pt.find(u=>u.name===s);if(!o)throw new Error(`Could not find async process ${s}`);const m=n.process.settingValues,h=n.palette.palette;if(!h)throw new Error("Palette is null");let A;if(!o.supports.threads)A=1;else if(m.autoThreads){const u=o.complexity(ie(h)),x=e.width*e.height,C=~~(x/5e4*u/2048)+1;A=C>te?te:C,console.log(`Want ${C} threads for ${x}px @CR${u}, got ${A} (max ${te})`)}else A=m.threads||1;let g=0;const w=~~(e.width/A/8)*8,R=e.width-w*A,D=new Date().getTime();for(let u=0;u<A;u++){const x=~~(R/8),C=u*w+8*(x<u?x:u),E=w+(u===A-1?R%8:x>u?8:0),I=d.getImageData(C,0,E,e.height);I||i("Unable to get image data from context");const z={data:I,x:C,y:0},O=new Jt;O.onprogress=L=>{const V=L.current/(E*4);L.partial&&l.putImageData(L.partial.data,C,0),l.fillStyle="#ff00ff",l.fillRect(C,V,E,2)},O.onfinish=L=>{l.putImageData(L.data,C,0),g--;const V=new Date().getTime();console.log(`Worker thread ${u+1} done in ${V-D}ms`),g===0&&(console.log(`${A} worker threads done in ${V-D}ms`),t())},O.onerror=L=>i(`Error in worker thread: ${L}`),console.log(`Starting worker thread ${u+1}/${A} w=${E}`),O.start(z,n),g++}}),Kt={device:Q.CPU,name:"Error Diffusion",settings:{matrix:{name:"Model",type:G.Combo,options:[{name:"Floyd-Steinberg",value:0},{name:"JJ&N",value:1},{name:"Stucki",value:2},{name:"Sierra",value:3}]},error_mult:{name:"Diffuse",type:G.Range,min:.5,max:1,step:.1,default:1,showValue:e=>e.toFixed(1)},gamma:{name:"Gamma",type:G.Range,min:1,max:4,step:.2,default:2.2,showValue:e=>e.toFixed(1)}},run:Ht},_t=[-1,1,-1,-1,1,1,-1,-1,1,-1,1,1],qt=[0,0,0,1,1,0,0,1,1,1,1,0],he=(e,n)=>e!==void 0?e:n,De=e=>[0,.01,.02,.05,.1,.2,.35,.5,.8,1][e];let ne=null,ge=null,ve=null,J=null;const $t=async(e,n)=>{if(!n.image.element)throw new Error("runPatternDither: Image is null");if(!n.palette.palette)throw new Error("runPatternDither: No palette selected");const t=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!t)throw new Error("runPatternDither: WebGL is unavailable");const i=n.process.settingValues,c=P(n.palette.palette).flat().map(u=>u/255);Re(t);const l=~~(c.length/3);(l!==ve||i.clist_size!==(J==null?void 0:J.clist_size)||t!==ge)&&(ne=null),ve=l,J=i,ge=t;let r=ne;if(!r){console.log("Compiling shaders...");const u=H.patternFrag.replace(/\$/g,l.toString()).replace(/%/g,(i.clist_size||64).toString()),x=K(t,t.VERTEX_SHADER,H.imageVert),C=K(t,t.FRAGMENT_SHADER,u);r=Ee(t,x,C),ne=r}const d=t.getAttribLocation(r,"a_position"),s=t.getAttribLocation(r,"a_texCoord"),o=t.getUniformLocation(r,"u_palette"),m=t.getUniformLocation(r,"u_texSize"),h=t.getUniformLocation(r,"u_image"),A=t.getUniformLocation(r,"u_threshold"),g=t.getUniformLocation(r,"u_err_mult"),w=t.getUniformLocation(r,"u_gamma"),R=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,new Float32Array(_t),t.STATIC_DRAW);const D=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,D),t.bufferData(t.ARRAY_BUFFER,new Float32Array(qt),t.STATIC_DRAW),Me(t,n.image.element,t.TEXTURE0);const f=[0,48,12,60,3,51,15,63,32,16,44,28,35,19,47,31,8,56,4,52,11,59,7,55,40,24,36,20,43,27,39,23,2,50,14,62,1,49,13,61,34,18,46,30,33,17,45,29,10,58,6,54,9,57,5,53,42,26,38,22,41,25,37,21].map(u=>u*4);Ce(t,f,t.TEXTURE1),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(r),t.uniform3fv(o,c),t.uniform2f(m,t.canvas.width,t.canvas.height),t.uniform1i(h,0),t.uniform1i(A,1),t.uniform1f(g,De(he(i.amount,ae.settings.amount.default)||0)),t.uniform1f(w,he(i.gamma,ae.settings.gamma.default)||0),_(t,d,R,{size:2,type:t.FLOAT}),_(t,s,D,{size:2,type:t.FLOAT}),t.drawArrays(t.TRIANGLES,0,6)},ae={device:Q.GL,name:"Pattern Dithering",settings:{clist_size:{name:"Mix",type:G.Combo,options:[{name:"64 level",value:64},{name:"16 level",value:16},{name:"4 level",value:4}]},amount:{name:"Dither",type:G.Range,max:9,step:1,default:5,showValue:e=>De(e).toFixed(2)},gamma:{name:"Gamma",type:G.Range,min:1,max:8,step:.2,default:2.2,showValue:e=>e.toFixed(1)}},run:$t},Te=[ae,xe,Kt],en=Object.values(Q).filter(e=>Te.filter(n=>n.device===e).length>0).map(e=>({name:e,value:e}));function tn(e){var s;const n=o=>{e.onChange(o)},t=(o,m)=>{n(p(v({},e.options),{settingValues:p(v({},e.options.settingValues),{[o]:m})}))},i=o=>{const m=o.key;m!=="Backspace"&&!m.match(/[0-9]/)&&!m.startsWith("Arrow")&&o.preventDefault()},c=(o,m)=>o!==void 0?o:m,l=Te.filter(o=>o.device===e.options.device).map(o=>({name:o.name,value:o})),r=((s=e.options.process)==null?void 0:s.settings)||{},d=Object.keys(r);return y("div",{className:"dlab-process-root",children:[a("span",{className:"dlab-process-label",children:"Device"}),a(Y,{options:en,value:e.options.device,onChange:o=>n(p(v({},e.options),{device:o.selected.value}))}),a("span",{className:"dlab-process-label",children:"Process"}),a(Y,{options:l,value:e.options.process,onChange:o=>n(p(v({},e.options),{process:o.selected.value,settingValues:{}}))}),d.length>0&&a("hr",{className:"divider bevel horizontal"}),d.map(o=>{var A;let m;const h=c(e.options.settingValues[o],r[o].default);switch(r[o].type){case G.Input:m=a("input",{type:"number",className:"bevel",value:h,onKeyDown:g=>i(g.nativeEvent),onInput:g=>t(o,parseFloat(g.target.value))},o);break;case G.Combo:m=a(Y,{value:e.options.settingValues[o],options:r[o].options||[],onChange:g=>t(o,g.selected.value)},o);break;case G.Range:m=y("div",{className:"dlab-process-control",children:[a("input",{type:"range",min:r[o].min||0,max:r[o].max||1,step:r[o].step,value:h,onInput:g=>t(o,parseFloat(g.target.value))}),r[o].showValue&&a("span",{children:(A=r[o].showValue)==null?void 0:A.call(void 0,h||0)})]},o);break}return[a("span",{className:"dlab-process-label",children:r[o].name},o+"_label"),m]})]})}var M=(e=>(e.Options="options",e.Image="image",e.Resize="resize",e.Palette="palette",e.Process="process",e.Live="live",e.RenderTarget="renderTarget",e.Status="status",e.View="view",e))(M||{});const nn=(e,n)=>{switch(n.type){case M.RenderTarget:return p(v({},e),{renderTarget:n.payload});case M.Options:return p(v({},e),{options:n.payload});case M.Image:return p(v({},e),{options:p(v({},e.options),{image:n.payload})});case M.Resize:return p(v({},e),{options:p(v({},e.options),{resize:n.payload})});case M.Palette:return p(v({},e),{options:p(v({},e.options),{palette:n.payload})});case M.Process:return p(v({},e),{options:p(v({},e.options),{process:n.payload})});case M.Live:return p(v({},e),{options:p(v({},e.options),{liveRender:n.payload})});case M.Status:return p(v({},e),{status:n.payload});case M.View:return p(v({},e),{view:n.payload});default:return console.warn(`dlabReducer: bad action type '${n.type}'`),e}};var an="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAbElEQVQ4jcVT0QrAIAg8Rx/mp/Vp/ZnDNkGYjO166CAq8C5ND6uQm2+kjrQ49X6tMcYrQ1VnjO+Og3k2yLSAZ7okkLFfoOWL15Y/qEKu/yGAIuBXBl8FqC748FRDtr8L00xmBhFhDBVmJAHgBEPWGSOGADVyAAAAAElFTkSuQmCC",on="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAD1BMVEUAAACAAAD/AAAAAAD///9mOKI0AAAABXRSTlMA/////xzQJlIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAXsaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMjZUMTQ6MjM6MzktMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTI2VDE1OjMzOjMxLTAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTI2VDE1OjMzOjMxLTAzOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMiIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkxOTUwMGFiLTIyNzAtZDM0NS1hYmI5LWY2MDVlZWJkYTEwYyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphMTk2ODViYy1hM2U2LTM4NDItYTczNi01ZGI5N2FhMWUxYjEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphMTk2ODViYy1hM2U2LTM4NDItYTczNi01ZGI5N2FhMWUxYjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExOTY4NWJjLWEzZTYtMzg0Mi1hNzM2LTVkYjk3YWExZTFiMSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yNlQxNDoyMzozOS0wMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MTk1MDBhYi0yMjcwLWQzNDUtYWJiOS1mNjA1ZWViZGExMGMiIHN0RXZ0OndoZW49IjIwMjEtMDItMjZUMTU6MzM6MzEtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vTpXkAAAAKUlEQVQYlWNgoAdgZGBgYGCGcv4yMDCwIIQZ/jMwMDAwoWthQcjREwAAocYDC8mP/cYAAAAASUVORK5CYII=";function rn(e){const[n,t]=T.exports.useState(),i=e.options.palette;if(!i)return a("span",{children:"[No palette selected]"});const c=A=>{const g=e.options.customPalettes.filter(w=>w!==i).concat(A);e.onChange(p(v({},e.options),{customPalettes:g,palette:A}))},l=A=>{c(p(v({},i),{name:A.target.value}))},r=(A,g)=>{if(n===void 0)return;const w=i.data.slice(),R=n*3+A;w[R]=parseInt(g.target.value),c(p(v({},i),{data:w}))},d=()=>{const A=i.data.concat([0,0,0]);c(p(v({},i),{data:A})),t(A.length/3-1)},s=A=>{const g=i.data.slice(0,A*3).concat(i.data.slice(A*3+3));n!==void 0&&n>=g.length/3&&t(g.length/3-1),c(p(v({},i),{data:g}))},o=A=>`#${A.map(g=>g.toString(16).padStart(2,"0")).join("")}`,m=[];switch(i.type){case b.Indexed:{let A=0;m.push(a("span",{className:"dlab-editor-title wide",children:"Colors"},A));for(const g of P(i)){const w=o(g),R=A;m.push(y("div",{className:X("dlab-editor-color wide",A===n?"selected":""),children:[a("div",{className:"bevel content",style:{background:w},onClick:()=>t(R)}),a("input",{readOnly:!0,className:"dlab-editor-color-input bevel",value:w,onClick:()=>t(R)}),i.data.length>3&&a("button",{className:"icon-button bevel light hover",onClick:()=>s(R),children:a("img",{src:on,alt:"remove"})})]},A+1)),A++}m.push(a("button",{className:"bevel",onClick:d,children:"Add Color"},A+1));break}default:m.push(a("span",{children:"Unsupported palette type. Sorry :("},0));break}const h=Ne(i,n||0);return y("div",{className:"dlab-editor-root",children:[a("input",{type:"text",className:"bevel wide",value:i.name,onInput:A=>l(A.nativeEvent)}),m,a("hr",{className:"divider horizontal bevel"}),n!==void 0?y("div",{className:"dlab-editor-picker wide",children:[a("div",{className:"dlab-editor-picker-preview bevel content wide",style:{background:o(h)}}),[0,1,2].map(A=>{const g=h.slice(),w=h.slice();g[A]=0,w[A]=255;const R={"--gradient-start":o(g),"--gradient-end":o(w)};return[a("input",{type:"range",min:0,max:255,step:1,value:h[A],style:R,onChange:D=>r(A,D.nativeEvent)},`${A}_input`),a("span",{children:h[A].toString().padStart(3,"0")},`${A}_value`)]})]}):a("div",{className:"wide",children:"Click on a color to edit."})]})}function sn(e){var d,s,o,m,h;const n=A=>{e.onChange(A)},t=()=>{const A=e.options.palette;if(!A)return;const g={name:A.name+" Copy",group:N.User,type:A.type,data:A.data.slice()};n(p(v({},e.options),{customPalettes:e.options.customPalettes.concat(g),group:N.User,palette:g}))},i=A=>`#${A.map(g=>g.toString(16).padStart(2,"0")).join("")}`,c=(d=e.options.palette)==null?void 0:d.data,l=A=>{if(!!c)switch(A){case"length":return(c.length||0)/3;case"bpc":return`${c[0]*c[1]*c[2]} (${c[0]} x ${c[1]} x ${c[2]})`;case"mono-lv":return c[0];case"mono-min":return c[1];case"mono-base":return i(c.slice(2,5))}};let r=[];switch((s=e.options.palette)==null?void 0:s.type){case b.Indexed:r=[a("span",{className:"dlab-editor-info-label",children:"Colors"},0),a("input",{readOnly:!0,className:"bevel",value:l("length")},1)];break;case b.RGB:r=[a("span",{className:"dlab-editor-info-label",children:"Levels"},0),a("input",{readOnly:!0,className:"bevel",value:l("bpc")},1)];break;case b.Mono:r=[a("span",{className:"dlab-editor-info-label",children:"Levels"},0),a("input",{readOnly:!0,className:"bevel",value:l("mono-lv")},1),a("span",{className:"dlab-editor-info-label",children:"Min lv."},2),a("input",{readOnly:!0,className:"bevel",value:l("mono-min")},3),a("span",{className:"dlab-editor-info-label",children:"Base"},4),y("div",{className:"dlab-editor-info-color",children:[a("div",{className:"bevel content",style:{background:`${l("mono-base")}`}}),a("input",{readOnly:!0,className:"bevel",value:l("mono-base")})]},5)];break;case b.Mixer:r=[a("span",{children:"TODO"},0)];break}return y("div",{className:"dlab-editor-root",children:[a("div",{className:"dlab-editor-title wide",children:(o=e.options.palette)==null?void 0:o.name}),a("span",{className:"dlab-editor-info-label",children:"Group"}),a("input",{readOnly:!0,className:"dlab-editor-info-value bevel",value:(m=e.options.palette)==null?void 0:m.group}),a("span",{className:"dlab-editor-info-label",children:"Type"}),a("input",{readOnly:!0,className:"dlab-editor-info-value bevel",value:(h=e.options.palette)==null?void 0:h.type}),r,a("hr",{className:"divider horizontal bevel"}),a("div",{className:"wide",children:"Editing is disabled for preset palettes. To edit this palette, create a copy first."}),a("button",{className:"bevel wide",onClick:t,children:"Copy as custom palette"})]})}function ln(e){var l,r;const n=d=>{e.onChange(d)};return y("div",{className:"dlab-editor-container",children:[y("div",{className:"dlab-editor-bar",children:[a("button",{className:"bevel",onClick:()=>{const d={name:"My Custom Palette",group:N.User,type:b.Indexed,data:[0,0,0,255,255,255]};n(p(v({},e.options),{customPalettes:e.options.customPalettes.concat(d),group:N.User,palette:d}))},children:"New"}),a("button",{className:"bevel",onClick:()=>{const d=e.options.palette;if(!d)return;const s={name:d.name+" Copy",group:N.User,type:d.type,data:d.data.slice()};n(p(v({},e.options),{customPalettes:e.options.customPalettes.concat(s),group:N.User,palette:s}))},children:"Duplicate"}),a("button",{className:"bevel",onClick:()=>{const d=e.options.palette,s=e.options.customPalettes.filter(m=>m!==d),o=s.length>0?s[0]:Ie;n(p(v({},e.options),{customPalettes:s,group:o.group,palette:o}))},disabled:((l=e.options.palette)==null?void 0:l.group)!==N.User,children:"Delete"})]}),a("hr",{className:"divider horizontal bevel"}),((r=e.options.palette)==null?void 0:r.group)===N.User?a(rn,v({},e)):a(sn,v({},e))]})}function cn(e){return y("div",{className:"clos-root bevel",children:[y("div",{className:"clos-titlebar",children:[a("span",{className:"clos-title",children:e.title}),a("div",{className:"clos-titlebar-spacer"}),a("button",{className:"clos-close icon-button bevel light hover",onClick:e.onClosed,children:a("img",{src:oe,alt:"x"})})]}),a("div",{className:"clos-content",children:e.children})]})}function An(){let e=null;const[n,t]=T.exports.useReducer(nn,Xe);T.exports.useEffect(()=>{const s=localStorage.getItem("__dlab_custom_palettes");if(s){const o=JSON.parse(s);o.length>0&&o[0].data&&t({type:M.Palette,payload:p(v({},n.options.palette),{customPalettes:o})})}},[]),T.exports.useEffect(()=>{const s=n.options.palette.customPalettes;localStorage.setItem("__dlab_custom_palettes",JSON.stringify(s))},[n.options.palette.customPalettes]),T.exports.useEffect(()=>{const s=e,o=s==null?void 0:s.querySelector("canvas");if(!s||!o)return;o.style.width=`${n.view*o.width/16}rem`,s.scrollWidth>s.clientWidth||s.scrollHeight>s.clientHeight?s.classList.add("__scroll"):s.classList.remove("__scroll")},[n.view]),T.exports.useEffect(()=>{console.log("destroy"),t({type:M.RenderTarget,payload:void 0})},[n.options.process.device]),T.exports.useEffect(()=>{if(!n.renderTarget){console.log("create");const s=we.createElement("canvas");t({type:M.RenderTarget,payload:s})}},[n.options]),T.exports.useEffect(()=>{const s=n.options;if(s.image.element){console.log("check");const o=e==null?void 0:e.querySelector("canvas");if(!o)return;const[m,h]=[s.image.info.width,s.image.info.height];let[A,g]=[0,0];switch(s.resize.mode){case W.KeepOriginalSize:A=m,g=h;break;case W.ForceResize:A=s.resize.x,g=s.resize.y;break;case W.FitToSize:{const w=Math.min((s.resize.x||0)/m,1),R=Math.min((s.resize.y||0)/h,1),D=Math.min(w,R);A=~~(m*D),g=~~(h*D);break}}(A!==o.width||g!==o.height)&&(console.log(`resize ${A} ${g} ${o.width} ${o.height}`),o.width=A,o.height=g),o.style.width=`${n.view*o.width/16}rem`,s.process.device===Q.GL&&s.liveRender?i():t({type:M.Status,payload:p(v({},n.status),{renderStatus:F.Ready,renderWidth:o.width,renderHeight:o.height})})}},[n.options,n.renderTarget]);const i=()=>{const s=e==null?void 0:e.querySelector("canvas"),o=n.options.process.process;if(!s||!o)return;const m=Date.now();t({type:M.Status,payload:p(v({},n.status),{renderStatus:F.Rendering})}),o.run(s,n.options).then(()=>{const h=Date.now()-m;t({type:M.Status,payload:p(v({},n.status),{renderStatus:F.Done,lastRenderTime:h,renderWidth:s.width,renderHeight:s.height})})})},c=()=>{n.view>1&&t({type:M.View,payload:n.view>4?n.view/2:n.view-1})},l=()=>{n.view<16&&t({type:M.View,payload:n.view<4?n.view+1:n.view*2})},r=s=>{const o=s;!(o.buttons&1)||e==null||e.scrollBy(-o.movementX,-o.movementY)};return y("div",{className:"dlab-root",children:[y("div",{className:"dlab-content bevel content",children:[y("div",{className:"dlab-control-bar bevel",children:[a("div",{className:"dlab-control dlab-control-save",children:a("button",{className:"bevel light hover icon-button",onClick:()=>{const s=e==null?void 0:e.querySelector("canvas");if(!s)return;const o=s.toDataURL("image/png").replace("image/png","image/octet-stream"),m=document.createElement("a");m.setAttribute("download","result.png"),m.setAttribute("href",o),m.click()},children:a("img",{src:an,alt:"Save"})})}),y("div",{className:"dlab-control dlab-control-view",children:[a("span",{children:"Zoom"}),y("div",{className:"bevel content",children:[a("button",{className:"bevel",onClick:c,disabled:n.view<=1,children:"-"}),a("input",{type:"text",readOnly:!0,value:`${n.view*100}%`}),a("button",{className:"bevel",onClick:l,disabled:n.view>=16,children:"+"})]})]}),a("hr",{className:"divider bevel vertical"}),y("div",{className:"dlab-control dlab-control-render",children:[a("input",{type:"checkbox",id:"dlab-live-render",name:"dlab-live-render",checked:n.options.liveRender,disabled:n.options.process.device===Q.CPU,onChange:s=>t({type:M.Live,payload:s.nativeEvent.target.checked})}),a("label",{htmlFor:"dlab-live-render",children:"Live Render"}),a("button",{className:"bevel",onClick:i,disabled:!n.options.image.element||n.status.renderStatus===F.Rendering,children:"Render"})]})]}),a("div",{className:"dlab-image-area",ref:s=>e=s,onMouseMove:s=>r(s.nativeEvent),children:n.options.image.element?n.renderTarget:a("span",{children:"[No image loaded]"})}),y("div",{className:"dlab-tool-pane",children:[a(j,{title:"Source Image",children:a(Je,{options:n.options.image,onChange:s=>t({type:M.Image,payload:s})})}),a(j,{title:"Resize",children:a(Ke,{options:n.options.resize,onChange:s=>t({type:M.Resize,payload:s})})}),a(j,{title:"Color Palette",children:a(Ct,{options:n.options.palette,onChange:s=>t({type:M.Palette,payload:s})})}),a(j,{title:"Process",children:a(tn,{options:n.options.process,onChange:s=>t({type:M.Process,payload:s})})})]}),n.options.palette.showEditor&&a("div",{className:"dlab-tool-pane dlab-editor-pane",children:a(cn,{title:"Palette Editor",onClosed:()=>t({type:M.Palette,payload:p(v({},n.options.palette),{showEditor:!1})}),children:a(ln,{options:n.options.palette,onChange:s=>t({type:M.Palette,payload:s})})})})]}),y("div",{className:"dlab-status-bar",children:[y("div",{className:"dlab-status bevel inset light",children:[n.status.renderStatus,n.status.renderStatus===F.Done&&` (${n.status.lastRenderTime}ms)`]}),a("div",{className:"dlab-status bevel inset light",children:n.status.renderWidth?`${n.status.renderWidth}x${n.status.renderHeight}`:""})]})]})}const dn={title:"DitherLab",minWidth:960,minHeight:720,iconUrl:q,children:a(An,{})};var Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAWlBMVEUAAACGhoYEBAQAAID/+/DAwMD//wDn59bMADP/zADq6ur////MAAClACH/AABmmWYAgAAAgIAAAP8A/wAA//8AmcwAmQCysrL/AP+ZZpmAgACAAACAAICZmQA2GEugAAAAAXRSTlMAQObYZgAAAAFiS0dECx/XxMAAAAAHdElNRQfiBBAHOBbUxf5ZAAABgUlEQVRIx7WVi3KDIBBFo8Cy+IgmTVptkv//zQILYoIIaadn0FkNZwC5Qw6Hd6ny1M8Cy1IocFFTKxWEqKmVCrWnVEiuQUTAy/OrIKUE0DeJaO4SlHwiEhrOOWDrQcWfiAVpXqM2zKVvvEiwhunf8UKB92hp80JDP2Cv6fK5qkDpJXPssBdVj+zIgJmW3JMKgCst4CKoWFjnalmDnVJBroJg6PK5Wj5rr9fBELO5IqHt0HxYIcy1hxfA7q/JVYdyByvofQBFq9B1q+eWRPoRXN7caGoYXYeThqrz+cxWgg+HrT8gCJcTc8LlGgtuhGHYEq5BaHx/7IwwjuPnGGZEAu13YgSzQe4FdePLy21hh18KzUrQtY29e15KV22OYBNAz6H8osoJC4VTChQJ9QpazzRNs+vwraHqeMRb6gSZYL57AR5egLQwz0F4eAH7pHA3hBmRcDOkRlhFI5QhGpuH2t5X2jw23xJy0YimtBkNEaLx1yllENk/yPggW1MXcPh3fgBrZiSYigysdQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNC0xNlQwNzo1NjoyMi0wNDowMHPebskAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDQtMTZUMDc6NTY6MjItMDQ6MDACg9Z1AAAAAElFTkSuQmCC",mn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAYFBMVEUAAADMzGb///+ZmWb//4D/zDNmZmbMM8wzMzOAAICysrKAgIAzM5n/zGbMmTOWlpZ3d3fAwMBmzACGhoYAgADMMzNmAADMmZmZZmaAAAAAAID/ZmaZMzNfX1+ZAADj4+ODtItOAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAHdElNRQfiBhoANRcGXhUDAAAB2klEQVRIx62VC3eCIBiGC5R9hptRaq3W+v//ct8FFBC7nLO3czbD99kjiG6zKWfL2bycreLo1/sVpzYv9z8wRMAr/Rr/foNA8xjY2RACiGhYYaOkQOtTywSahn9BOycHPr/aru32HvCpiXAdfUoAjjsCDocEOHb0aR9c0iEjipfkfBDA/qGfCfBn1oF+ArR2VV1DGdhJ6JL63veVMiyhEwtA9o+KV8kDSOCJx8AwDPjTGeOeAkxgfxiT2/EfwOl8/g7EKH1c/Ms6cB2GnzEoRt/3RAk4XekybvFCXeL+AqC+VyijBLlcpF8CWBAUygSE6/RtAUg/KAipfaSeAzKDWcGIJHxPARb8xopFEkAEx2uiyKLtQsDAmkIbWAiOal2h7+AgFyi1qtB3C2oiJoFaU+h7Bbg7IResKbBvIyASlBXYr8DOQCQoKLSmvmJAJiGC65RUod0O95MSQBR+F8WZFfgaAD4A2HvgVABmxQxYOoAgGOOwwr/WNE5XXuPWGQZEgGs0RQZu8i8hBsQQ+tnG+hllq2l82vipAJAbEQSLrT7e+Nho7QFredIFQVDIGD5BWgBZVplm2s8HmZhunEw0BfJBIuK99DxEvAUQ8R7AhHJvAEjAW31aX+r/AfezPDUVx2F1AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA2LTI2VDAwOjUzOjIzLTA0OjAwad31FAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNi0yNlQwMDo1MzoyMy0wNDowMBiATagAAAAASUVORK5CYII=";const un=[{id:"theme",display:"System Theme",iconUrl:mn,template:ke},{id:"dlab",display:"DitherLab",iconUrl:Se,template:dn}];function hn(e){return a("div",{className:"launch-root bevel content",children:un.map((n,t)=>y("div",{className:"launch-item",onDoubleClick:()=>e.onLaunch(n.template),children:[a("img",{src:n.iconUrl||Se,alt:n.id,className:"launch-icon"}),a("div",{className:"launch-label",children:n.display})]},t))})}const gn=e=>({title:"Program Manager",minWidth:480,minHeight:320,iconUrl:q,children:a(hn,{onLaunch:e.onLaunch})});var Z=(e=>(e[e.Restored=0]="Restored",e[e.Maximized=1]="Maximized",e))(Z||{}),S=(e=>(e[e.N=1]="N",e[e.E=2]="E",e[e.S=4]="S",e[e.W=8]="W",e[e.NE=3]="NE",e[e.SE=6]="SE",e[e.SW=12]="SW",e[e.NW=9]="NW",e))(S||{}),vn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAYAAACALL/6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHaGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4NmU4YTE1Mi02N2FlLTkyNDktYTU3Mi1iZjk2OTY3M2I3YTAiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozZGQ2ZDUzNy04MmI2LTFlNDUtOTUzMS1mNjUyZGNmNDgxN2YiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDc4ZjAwNTctNjliOS03NTQ0LTlmZTgtMWQ2MmFmNzFmMTczIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDEtMjNUMTg6NTA6MzktMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAyLTE2VDIwOjI2OjE3LTAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTAyLTE2VDIwOjI2OjE3LTAzOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Zjk1NzQxYmItMmNlOS0xYTQ1LWJmNjAtY2NkOGFhYWMyYzc1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkYmQ3MWE1YS05ZDJlLWU1NDMtODY1ZC00MTMxZTQ4NWYyOTUiIHN0RXZ0OndoZW49IjIwMjAtMDItMTZUMjA6MjY6MTctMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDc4ZjAwNTctNjliOS03NTQ0LTlmZTgtMWQ2MmFmNzFmMTczIiBzdEV2dDp3aGVuPSIyMDIwLTAyLTE2VDIwOjI2OjE3LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnhtcC5kaWQ6RkVGM0NCMzUzRTE0MTFFQTkzNjBCQTIzMTFCMDU4MkY8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5ChT8fAAAAZElEQVQYlZWQwQ6AMAxC6eJ/E768XiapqAd32UJ5Kay6G3/OcT0kXWSRROokCwDWgGvfLSnNANAJJDTNnhnIwdQkWassPbrYMzutNzPJudGdbkBm3jHc6SuSvzZiWT9ikMaHfgKtlTaQpMV5nwAAAABJRU5ErkJggg==",pn="data:image/png;base64,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UmVhZHlxyWU8AAADdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxRDA4MzExQjRGMzExMUVBQUY2RENBNDQ4NDJFNDc3RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxRDA4MzExQTRGMzExMUVBQUY2RENBNDQ4NDJFNDc3RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZGFjMGIxMC04MzFlLThjNDAtOTYxMy1iY2FiY2NjZjNjM2IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODZlOGExNTItNjdhZS05MjQ5LWE1NzItYmY5Njk2NzNiN2EwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UJGQOgAAALNJREFUeNqMUQkOgjAQnG0rVp9k4hExMT4aEI8ncZVjLQGRy+ikzXY203RmS8yMGrfQg0CO7eHSNEawOqqr+DSoT79CdSeSdjU0uD6ogsRSLZBmMU7ujvtPobXFc9vz762s0f30UFXlgNM7NBFx6D9JOQtESQQWjLN75HFo1b8thYExCdYrbatppxdQXmadZmBJ2KjEBbI0hta66QkBJWlmShabvTv5A5MVcLScZvgXLwEGAC40VyoZQ2c/AAAAAElFTkSuQmCC";function bn(e){const[n,t]=T.exports.useState({x:e.left||0,y:e.top||0}),[i,c]=T.exports.useState({w:Math.max(e.width||0,e.minWidth),h:Math.max(e.height||0,e.minHeight)}),[l,r]=T.exports.useState(Z.Restored);T.exports.useEffect(()=>w(!0),[]);let d=null;const s=(()=>{switch(l){case Z.Restored:return{width:e.autoSize?"auto":i.w,height:e.autoSize?"auto":i.h,left:n.x,top:n.y};case Z.Maximized:return{width:"100%",height:"100%",left:0,top:0}}})(),o=f=>{if(f.button!==0)return;const u=C=>{if(!d)return;const E=d.getBoundingClientRect();d.style.left=`${E.left+C.movementX}px`,d.style.top=`${E.top+C.movementY}px`},x=C=>{if(C.button===0){if(d&&d.parentElement){const E=d.getBoundingClientRect(),I=d.parentElement.getBoundingClientRect();t({x:E.left-I.left,y:E.top-I.top})}window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",x)}};window.addEventListener("mousemove",u),window.addEventListener("mouseup",x)},m=(f,u)=>{if(f.button!==0)return;const x=E=>{if(!d)return;const I=d.getBoundingClientRect(),O=(e.maxHeight||Number.MAX_VALUE)-I.height,L=I.height-e.minHeight,re=(e.maxWidth||Number.MAX_VALUE)-I.width,se=I.width-e.minWidth;if(u&S.N){const B=E.movementY<0?Math.max(E.movementY,-O):Math.min(E.movementY,L);d.style.top=`${I.top+B}px`,d.style.height=`${I.height-B}px`}else if(u&S.S){const B=E.movementY>0?Math.min(E.movementY,O):Math.max(E.movementY,-L);d.style.height=`${I.height+B}px`}if(u&S.W){const B=E.movementX<0?Math.max(E.movementX,-re):Math.min(E.movementX,se);d.style.left=`${I.left+B}px`,d.style.width=`${I.width-B}px`}else if(u&S.E){const B=E.movementX>0?Math.min(E.movementX,re):Math.max(E.movementX,-se);d.style.width=`${I.width+B}px`}},C=E=>{if(E.button===0){if(d&&d.parentElement){const I=d.getBoundingClientRect(),z=d.parentElement.getBoundingClientRect();t({x:I.left-z.left,y:I.top-z.top}),c({w:I.width,h:I.height})}window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",C)}};window.addEventListener("mousemove",x),window.addEventListener("mouseup",C)},h=(f,u)=>{if(f.button!==0)return;const x=E=>{u(E),C()},C=()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",C)};window.addEventListener("mousemove",x),window.addEventListener("mouseup",C)},A=()=>{e.maximizable!==!1&&(l===Z.Maximized?r(Z.Restored):r(Z.Maximized))},g=()=>{e.onClose&&e.onClose(e.id)},w=(f=!1)=>{if(!d)return;const u=parseInt(d.style.zIndex||"0"),x=document.querySelectorAll(".win-frame"),C=[];for(let I=0;I<x.length;I++)x.item(I).id!==d.id&&C.push(x.item(I));f||C.forEach(I=>{const z=parseInt(I.style.zIndex||"0");z>u&&(I.style.zIndex=(z-1).toString())});const E=C.map(I=>parseInt(I.style.zIndex||"0")).reduce((I,z)=>Math.max(I,z),0);d.style.zIndex=(E+1).toString()},R=!e.autoSize&&e.resizeable!==!1,D=[a("div",{className:"win-resize-handle-nw",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.NW))},"nw"),a("div",{className:"win-resize-handle-n",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.N))},"n"),a("div",{className:"win-resize-handle-ne",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.NE))},"ne"),a("div",{className:"win-resize-handle-w",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.W))},"w"),a("div",{className:"win-resize-handle-e",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.E))},"e"),a("div",{className:"win-resize-handle-sw",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.SW))},"sw"),a("div",{className:"win-resize-handle-s",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.S))},"s"),a("div",{className:"win-resize-handle-se",onMouseDown:f=>h(f.nativeEvent,u=>m(u,S.SE))},"se")];return console.log(`render window ${e.id} @ ${n.x}, ${n.y} [${i.w}x${i.h}] State: ${l}`),y("div",{className:"win-frame bevel",id:`win_${e.id}`,style:s,ref:f=>d=f,onMouseDown:()=>w(),children:[y("div",{className:"win-main",children:[y("div",{className:"win-titlebar",onMouseDown:l===Z.Restored?f=>h(f.nativeEvent,u=>o(u)):void 0,onDoubleClick:A,children:[a("img",{className:"win-titlebar-icon",src:e.iconUrl||q,alt:"icon"}),a("div",{className:"win-titlebar-spacer"}),a("div",{className:"win-title",children:e.title}),a("div",{className:"win-titlebar-spacer"}),y("div",{className:"win-titlebar-button-group",children:[e.maximizable!==!1&&a("button",{className:"win-titlebar-button icon-button bevel",onClick:A,children:a("img",{src:l===Z.Maximized?pn:fe,alt:"max"})}),a("button",{className:"win-titlebar-button icon-button bevel",onClick:g,disabled:e.closeable===!1,children:a("img",{src:e.closeable?vn:oe,alt:"x"})})]})]}),a("div",{className:"win-content",children:e.children})]}),R&&l===Z.Restored&&D]})}let k={x:100,y:100};function wn(){const[e,n]=T.exports.useState(0),[t,i]=T.exports.useState([]),[c,l]=T.exports.useState();T.exports.useEffect(()=>{c&&(r(c),l(void 0))},[c]);const r=o=>{const m=p(v({id:e},o),{top:o.top||k.y,left:o.left||k.x});i(t.concat(m)),n(e+1),k={x:100+(k.x-50)%500,y:100+(k.y-50)%300}},d=o=>{i(t.filter(m=>m.id!==o))},s=o=>{l(o)};return y("div",{className:"desktop",children:[a("button",{className:"bevel",onClick:()=>r(gn({onLaunch:s})),children:"Program Manager"}),t.map(o=>a(bn,p(v({},o),{onClose:d,children:o.children}),o.id))]})}function fn(){return a("div",{className:"app",children:a(wn,{})})}const Ge=()=>{const e=window.devicePixelRatio,n=Math.round(e)/e;document.documentElement.style.fontSize=`${16*n}px`};window.onresize=Ge;Ge();const pe=localStorage.getItem("__theme");pe&&(document.documentElement.className=pe);We.render(a(we.StrictMode,{children:a(fn,{})}),document.getElementById("root"));
