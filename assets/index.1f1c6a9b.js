var vt=Object.defineProperty,wt=Object.defineProperties;var bt=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var he=(e,t,n)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L=(e,t)=>{for(var n in t||(t={}))Ze.call(t,n)&&he(e,n,t[n]);if(te)for(var n of te(t))Te.call(t,n)&&he(e,n,t[n]);return e},W=(e,t)=>wt(e,bt(t));var xe=(e,t)=>{var n={};for(var i in e)Ze.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&te)for(var i of te(e))t.indexOf(i)<0&&Te.call(e,i)&&(n[i]=e[i]);return n};var X=(e,t,n)=>(he(e,typeof t!="symbol"?t+"":t,n),n);import{u as It,a as yt,c as Mt,r as G,j as f,b as a,R as Xe,p as ft,d as He,e as Nt,f as Rt,P as Et}from"./vendor.5a56545c.js";const Dt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};Dt();var O=(e=>(e.Launcher="win_launcher",e.ThemeEditor="win_theme",e.Help="win_help",e.DitherLab="win_ditherLab",e.Minesweeper="min_mine",e.Sudoku="min_sudoku",e))(O||{}),Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAACAgIDAwMAAAAD///8A//8AgIA+In3bAAAAAXRSTlMAQObYZgAAAAFiS0dEBI9o2VEAAAAHdElNRQfiBBMBJCt84jxJAAAAWElEQVQI12NgQABGQUFBARBDSElJSRgk4OLioghmOBsbQxlhiVBGGowhKAhhOCkpKRoC9TMaA4GQAcQYRUUgQxgEBA0YGI1AwJiBQQRosIsTUMYYDJDcAABR5A0vWu5CGwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNC0xOVQwMTozNjo0My0wNDowMNV8Hl4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDQtMTlUMDE6MzY6NDMtMDQ6MDCkIabiAAAAAElFTkSuQmCC";const Gt={title:"Program Manager",minWidth:480,minHeight:320,iconUrl:Ie,content:O.Launcher};var P=(e=>(e[e.Restored=0]="Restored",e[e.Maximized=1]="Maximized",e))(P||{}),j=(e=>(e[e.N=1]="N",e[e.E=2]="E",e[e.S=4]="S",e[e.W=8]="W",e[e.NE=3]="NE",e[e.SE=6]="SE",e[e.SW=12]="SW",e[e.NW=9]="NW",e))(j||{});const K=()=>It(),Zt=yt,Ke=Mt({name:"windows",initialState:{nextWindowId:0,windows:[]},reducers:{createWindow:(e,t)=>{const n=W(L({id:e.nextWindowId},t.payload),{top:t.payload.top||100,left:t.payload.left||100});e.windows.push(n),e.nextWindowId++},destroyWindow:(e,t)=>{e.windows=e.windows.filter(n=>n.id!==t.payload)}}}),{createWindow:ye,destroyWindow:me}=Ke.actions;var Tt=Ke.reducer;const xt=e=>e.windows;var Me="data:image/png;base64,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UmVhZHlxyWU8AAADdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRUYzQ0IzNTNFMTQxMUVBOTM2MEJBMjMxMUIwNTgyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRUYzQ0IzNDNFMTQxMUVBOTM2MEJBMjMxMUIwNTgyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmOTU3NDFiYi0yY2U5LTFhNDUtYmY2MC1jY2Q4YWFhYzJjNzUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODZlOGExNTItNjdhZS05MjQ5LWE1NzItYmY5Njk2NzNiN2EwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/N1XTgAAAFBJREFUeNpi/P//PwMpgAnGYGRk/A/C6ArQxeEagDYxwhQgK0aWA4uhOwndFmTFKDZgU4CuGKsGbE7CqQHZzdj8hBFKuJyEYivZ8UAsAAgwAALnMRFw3KPlAAAAAElFTkSuQmCC",St="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAYAAACALL/6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHaGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4NmU4YTE1Mi02N2FlLTkyNDktYTU3Mi1iZjk2OTY3M2I3YTAiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozZGQ2ZDUzNy04MmI2LTFlNDUtOTUzMS1mNjUyZGNmNDgxN2YiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDc4ZjAwNTctNjliOS03NTQ0LTlmZTgtMWQ2MmFmNzFmMTczIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDEtMjNUMTg6NTA6MzktMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAyLTE2VDIwOjI2OjE3LTAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTAyLTE2VDIwOjI2OjE3LTAzOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Zjk1NzQxYmItMmNlOS0xYTQ1LWJmNjAtY2NkOGFhYWMyYzc1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkYmQ3MWE1YS05ZDJlLWU1NDMtODY1ZC00MTMxZTQ4NWYyOTUiIHN0RXZ0OndoZW49IjIwMjAtMDItMTZUMjA6MjY6MTctMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDc4ZjAwNTctNjliOS03NTQ0LTlmZTgtMWQ2MmFmNzFmMTczIiBzdEV2dDp3aGVuPSIyMDIwLTAyLTE2VDIwOjI2OjE3LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnhtcC5kaWQ6RkVGM0NCMzUzRTE0MTFFQTkzNjBCQTIzMTFCMDU4MkY8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5ChT8fAAAAZElEQVQYlZWQwQ6AMAxC6eJ/E768XiapqAd32UJ5Kay6G3/OcT0kXWSRROokCwDWgGvfLSnNANAJJDTNnhnIwdQkWassPbrYMzutNzPJudGdbkBm3jHc6SuSvzZiWT9ikMaHfgKtlTaQpMV5nwAAAABJRU5ErkJggg==",_e="data:image/png;base64,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UmVhZHlxyWU8AAADdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMDQ1OTRGRDNFMTUxMUVBQTIyMUZGMkE5OTFBM0M5MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMDQ1OTRGQzNFMTUxMUVBQTIyMUZGMkE5OTFBM0M5MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmOTU3NDFiYi0yY2U5LTFhNDUtYmY2MC1jY2Q4YWFhYzJjNzUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODZlOGExNTItNjdhZS05MjQ5LWE1NzItYmY5Njk2NzNiN2EwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+fEJGSgAAADZJREFUeNpi/P//PwMjI+N/BgIAqI4RRDMxkAhY0E3ABpBdQLINw0EDC7aQwAcYQRFHCgAIMACrSw8T5h39PwAAAABJRU5ErkJggg==",zt="data:image/png;base64,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UmVhZHlxyWU8AAADdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2ZThhMTUyLTY3YWUtOTI0OS1hNTcyLWJmOTY5NjczYjdhMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxRDA4MzExQjRGMzExMUVBQUY2RENBNDQ4NDJFNDc3RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxRDA4MzExQTRGMzExMUVBQUY2RENBNDQ4NDJFNDc3RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZGFjMGIxMC04MzFlLThjNDAtOTYxMy1iY2FiY2NjZjNjM2IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODZlOGExNTItNjdhZS05MjQ5LWE1NzItYmY5Njk2NzNiN2EwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UJGQOgAAALNJREFUeNqMUQkOgjAQnG0rVp9k4hExMT4aEI8ncZVjLQGRy+ikzXY203RmS8yMGrfQg0CO7eHSNEawOqqr+DSoT79CdSeSdjU0uD6ogsRSLZBmMU7ujvtPobXFc9vz762s0f30UFXlgNM7NBFx6D9JOQtESQQWjLN75HFo1b8thYExCdYrbatppxdQXmadZmBJ2KjEBbI0hta66QkBJWlmShabvTv5A5MVcLScZvgXLwEGAC40VyoZQ2c/AAAAAElFTkSuQmCC";function Ct(e){const t=K(),[n,i]=G.exports.useState({x:e.left||0,y:e.top||0}),[s,r]=G.exports.useState({w:Math.max(e.width||0,e.minWidth),h:Math.max(e.height||0,e.minHeight)}),[o,d]=G.exports.useState(P.Restored);G.exports.useEffect(()=>v(!0),[]);let m=null;const u=(()=>{switch(o){case P.Restored:return{width:e.autoSize?"auto":s.w,height:e.autoSize?"auto":s.h,left:n.x,top:n.y};case P.Maximized:return{width:"100%",height:"100%",left:0,top:0}}})(),A=b=>{if(b.button!==0)return;const w=Z=>{if(!m)return;const D=m.getBoundingClientRect();m.style.left=`${D.left+Z.movementX}px`,m.style.top=`${D.top+Z.movementY}px`},T=Z=>{if(Z.button===0){if(m&&m.parentElement){const D=m.getBoundingClientRect(),I=m.parentElement.getBoundingClientRect();i({x:D.left-I.left,y:D.top-I.top})}window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",T)}};window.addEventListener("mousemove",w),window.addEventListener("mouseup",T)},p=(b,w)=>{if(b.button!==0)return;const T=D=>{if(!m)return;const I=m.getBoundingClientRect(),M=(e.maxHeight||Number.MAX_VALUE)-I.height,z=I.height-e.minHeight,R=(e.maxWidth||Number.MAX_VALUE)-I.width,Y=I.width-e.minWidth;if(w&j.N){const Q=D.movementY<0?Math.max(D.movementY,-M):Math.min(D.movementY,z);m.style.top=`${I.top+Q}px`,m.style.height=`${I.height-Q}px`}else if(w&j.S){const Q=D.movementY>0?Math.min(D.movementY,M):Math.max(D.movementY,-z);m.style.height=`${I.height+Q}px`}if(w&j.W){const Q=D.movementX<0?Math.max(D.movementX,-R):Math.min(D.movementX,Y);m.style.left=`${I.left+Q}px`,m.style.width=`${I.width-Q}px`}else if(w&j.E){const Q=D.movementX>0?Math.min(D.movementX,R):Math.max(D.movementX,-Y);m.style.width=`${I.width+Q}px`}},Z=D=>{if(D.button===0){if(m&&m.parentElement){const I=m.getBoundingClientRect(),N=m.parentElement.getBoundingClientRect();i({x:I.left-N.left,y:I.top-N.top}),r({w:I.width,h:I.height})}window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",Z)}};window.addEventListener("mousemove",T),window.addEventListener("mouseup",Z)},l=(b,w)=>{if(b.button!==0)return;const T=D=>{w(D),Z()},Z=()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",Z)};window.addEventListener("mousemove",T),window.addEventListener("mouseup",Z)},h=()=>{e.maximizable!==!1&&(o===P.Maximized?d(P.Restored):d(P.Maximized))},c=()=>{t(me(e.id))},v=(b=!1)=>{if(!m)return;const w=parseInt(m.style.zIndex||"0"),T=document.querySelectorAll(".win-frame"),Z=[];for(let I=0;I<T.length;I++)T.item(I).id!==m.id&&Z.push(T.item(I));b||Z.forEach(I=>{const N=parseInt(I.style.zIndex||"0");N>w&&(I.style.zIndex=(N-1).toString())});const D=Z.map(I=>parseInt(I.style.zIndex||"0")).reduce((I,N)=>Math.max(I,N),0);m.style.zIndex=(D+1).toString()},y=!e.autoSize&&e.resizeable!==!1,g=[a("div",{className:"win-resize-handle-nw",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.NW))},"nw"),a("div",{className:"win-resize-handle-n",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.N))},"n"),a("div",{className:"win-resize-handle-ne",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.NE))},"ne"),a("div",{className:"win-resize-handle-w",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.W))},"w"),a("div",{className:"win-resize-handle-e",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.E))},"e"),a("div",{className:"win-resize-handle-sw",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.SW))},"sw"),a("div",{className:"win-resize-handle-s",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.S))},"s"),a("div",{className:"win-resize-handle-se",onMouseDown:b=>l(b.nativeEvent,w=>p(w,j.SE))},"se")];return console.log(`render window ${e.id} @ ${n.x}, ${n.y} [${s.w}x${s.h}] State: ${o}`),f("div",{className:"win-frame bevel",id:`win_${e.id}`,style:u,ref:b=>m=b,onMouseDown:()=>v(),children:[f("div",{className:"win-main",children:[f("div",{className:"win-titlebar",onMouseDown:o===P.Restored?b=>l(b.nativeEvent,w=>A(w)):void 0,onDoubleClick:h,children:[a("img",{className:"win-titlebar-icon",src:e.iconUrl||Ie,alt:"icon"}),a("div",{className:"win-titlebar-spacer"}),a("div",{className:"win-title",children:e.title}),a("div",{className:"win-titlebar-spacer"}),f("div",{className:"win-titlebar-button-group",children:[e.maximizable!==!1&&a("button",{className:"win-titlebar-button icon-button bevel",onClick:h,children:a("img",{src:o===P.Maximized?zt:_e,alt:"max"})}),a("button",{className:"win-titlebar-button icon-button bevel",onClick:c,disabled:e.closeable===!1,children:a("img",{src:e.closeable?St:Me,alt:"x"})})]})]}),a("div",{className:"win-content",children:e.children})]}),y&&o===P.Restored&&g]})}var Yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUVBMVEUAAACGhoZmmQDAwMAzmQAzmTP///8EBARmmTMA/wBmZmYAgAD//wBfX18AAP8AAMyysrIA////AACAAAAAAJnMADOAgAAzAJkAAIAzAGZ3d3do0YoDAAAAAXRSTlMAQObYZgAAAAFiS0dEBmFmuH0AAAAHdElNRQfiBhgXBTG4ddtzAAAAgElEQVQY0z2O2xLCIAxEiWhiaxXkUqv//6FuSOiZ4eEsyU5CCORc8AKgaFxvkUng7NwXjusIxHhsFJ8WvJSURPIM3uqlVFnnREqplb5v4gH80wrcV/Ddji/858GhwGseHXYWvFsQxhHw0qt2DghOCKYSR6GsE+bMo4Uq+YacqP0BJBIH/wTxBYYAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjRUMjM6MDU6NDktMDQ6MDCsj/LYAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI0VDIzOjA1OjQ5LTA0OjAw3dJKZAAAAABJRU5ErkJggg==";const Lt={title:"System Theme",minWidth:440,minHeight:400,maxWidth:440,iconUrl:Yt,autoSize:!0,maximizable:!1,content:O.ThemeEditor};var kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAG1BMVEUAAICAAAD///8A//8AAACAgIAAgAAAgIDAwMBxGJYGAAAAAWJLR0QCZgt8ZAAAAAd0SU1FB+IGGBcQI3x5TC8AAABUSURBVAjXY2CAAUZBMBBgYFQCAyBD2djY2NkIynABM4KNTVJADNVSUzcwQ708Ii3NCcQobUmDiER0uIFFVDs62lKaIIwOCTAjNDRUNAjZCpilMAAAsMIVbJw8uZkAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjRUMjM6MTY6MzUtMDQ6MDBLU/V2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI0VDIzOjE2OjM1LTA0OjAwOg5NygAAAABJRU5ErkJggg==";const Wt={title:"DitherLab",minWidth:960,minHeight:720,iconUrl:kt,content:O.DitherLab};var Bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEUAAACAAIAAAACAgID//wCAgADAwMD///8ESTq2AAAAAXRSTlMAQObYZgAAAAFiS0dEBxZhiOsAAAAHdElNRQfiBhgXChaa53LXAAAAZUlEQVQI1y2NwQ2AIAxFP2zQYjyDnQAO3k1wAA8OwEUHYP/EFuzp5fUlHwBcxLzAk1ymSYFokMtLvSiauJdDjRZrJYlWnMT7Bk7aysMIJalo+uolmYC8vZiAVzIxqM0tL/yvexMfb8ENvozHSYAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjRUMjM6MTA6MjItMDQ6MDBPQLshAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI0VDIzOjEwOjIyLTA0OjAwPh0DnQAAAABJRU5ErkJggg==";const qe=e=>({title:"Help",minWidth:540,minHeight:480,width:680,height:540,iconUrl:Bt,content:O.Help,contentProps:{path:e}}),jt=qe();var Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiBhgXCCaOCCD5AAAAhklEQVQoz32PYQ6FMAiDP4z32m4m3mzvZPgDcDLz7LJk0BY6KFDjC2pmq2T7L34I9OVT62AA4kXjBA5+wAA6PVhJfYOgOwMNOlfIKDQ3Dbtv9+EN6Kj7PZXscNxuv5pBAUVm/ghWITK/9XTPDFu6FzozOIapUU7UC00QlFeMe7etRCnN0rsAPbNN8FUWTr0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjRUMjM6MDg6MzgtMDQ6MDD1w3vFAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI0VDIzOjA4OjM4LTA0OjAwhJ7DeQAAAABJRU5ErkJggg==";const Qt={title:"Minesweeper",minWidth:400,minHeight:400,iconUrl:Ot,autoSize:!0,maximizable:!1,content:O.Minesweeper};var Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABPklEQVQ4jZWTT0rFMBDGv4oInuKBJ5Ck93g3cPfS7twKnsJVSIInUPQSbyUv8QaCS0Fw6UpGJn3Tpv8EPxjSKfnNzDelIKI/Y0203VK8BFVPD3frt1a0+bqGQkQwGuACRLEIouWzi+hBFEHegBvTsUAJEWmtR0UkzzD5AfYRp92QCYCazKtG71PQUBoIjYHxgLUWr1rhZLgsSrPTNxFq5xEcMsweWC8uyARAXdej/nVt8pnhorPWur9z32AocDj4fmyGuxwIwSE633dOqQvW+9u3WEiF57GM8XBR97BSOoOszcV5uYM5zBK/Aj8/7jOYKbUbvoJ4nu5AZIzrn29vrgCc5efJDgbY+yZ35M4Mcy6+eYKPz5+cHy3MJTCfIoFlB4sFZMMClxufwrMCApXji+clmFVZa//9N4ratq1+AT/jD0LR10UKAAAAAElFTkSuQmCC";const Pt={title:"Sudoku",minWidth:400,minHeight:400,iconUrl:Ut,autoSize:!0,maximizable:!1,content:O.Sudoku};var Vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeFBMVEUAAACGhobAwMCysrKgoKSZmZkzmQD///8EBARmmTN3d3cA/wDd3d3MzMz//wCAgABmmQBmMwAAAP8AAMxmZgD/AP8AAICAAACAAIAAAJkzAMz/mZnMADNmZmYA////AADMzAAMDAyZmQBfX19VVVVmAADMAACWlpZBUzm2AAAAAXRSTlMAQObYZgAAAAFiS0dEBxZhiOsAAAAHdElNRQfiBhgXBTG4ddtzAAABU0lEQVQ4y3WT4XKCMBCEuYDmhEqqVJAKYhtb3v8Ne0eOJIBdZvizX3YDc5ckLPhHiQjUpJSVZdku2+9YGnDhC8LEwfm5A0CvtS+Q3lSBzn/zOrLUoSiR4iD3QA7zM2lfgEGtcqkgAJd6L82JgTwA51kVP+b0sQGKS/DPFaXUK+BSRH6jr9eXFeK3DQm12QDif7bN7dahKbGPgPsw+1VbNbehM2VpsA/AcD97nxIGU5rHw6AAR/QN7BNA5x9fIWECgt827NP5PgaCX9fsI/sREJ2vpV/FQOx/u36temsXCf781E+A9YDC2kv6O9SptXOFCrMk/UPHCU+f4CXfT3+SRso+cT3y0s+/GiG3MtOJnyTpxx8GEGffS/rBJaxdl0/9KoMXAEBKYz79v/QV4FZH0bDzcmVN99stb8AAfyVMy7cb6YKwjECMFm8caaU2l1ztTjD+AHhHKgb43lzxAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA2LTI0VDIzOjA1OjQ5LTA0OjAwrI/y2AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNi0yNFQyMzowNTo0OS0wNDowMN3SSmQAAAAASUVORK5CYII=",Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEUAAACAAIAAAACAgICAgAD//wDAwMD///9lJw0+AAAAAXRSTlMAQObYZgAAAAFiS0dEBxZhiOsAAAAHdElNRQfiBhgXChR06RP7AAAAvUlEQVQoz3XRUQ6DIAyAYeYNKOwd8QTLEn1eMg+wxF7AB7zBvP7aUlBM5hufP5QEY/58N7iAs7ENHrYVZ20jHDQiwUk4mPF1CAV3RKwNB7i88UMAGnj6LRDKCE9GAKGOmOWMIZQ70JqmwBg08Ljw1CGFcknPaxgJIMoOXlPA8GSRkXZMKRpILHM+Ia1gYPtKIyeknrZsu0oOGLJoYKybsmhgul5Fg0M0qLKXoEoNihyByto8Jsk5ELm+dqfBDwcgN9nfkQsOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA2LTI0VDIzOjEwOjIwLTA0OjAw2N+qCAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNi0yNFQyMzoxMDoyMC0wNDowMKmCErQAAAAASUVORK5CYII=",Jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEUAAICAAACAgAD///8AgIAA//8AAAAA/wAAgACAgIDAwMCq0QB2AAAAAWJLR0QDEQxM8gAAAAd0SU1FB+IGGBcQI3x5TC8AAADnSURBVCjPjdK9boMwEMBx6BMkrcScMGSvGiKVNeWrKxYv0POl6owUPwBNeIJIsFpi8FPG4OPDzdL/ePr5BtuO8zd3a7VxntZWK8d9eVv0qoU96MX+Y+o4iH1uKvL8aERgwiCwBXzNgmtwEPEkCn08/y5nwSP+HpzSmJMoGOtaBMBR8Ogzk524/I47GGNteLpWiCSiKJMoxLxDg4Ook6qaRCYlnmPdKNowDCEp4UJCg16kk+hBV5cVAAkplVKYpjGSUEMAP4qEGXSeUiSaoZvXNCT8oZ3n+ySWl/yvd7GfUotnq9XDb7gDZ6Z1avBJWe4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjRUMjM6MTY6MzUtMDQ6MDBLU/V2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI0VDIzOjE2OjM1LTA0OjAwOg5NygAAAABJRU5ErkJggg==",Xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiBhgXExWY7op1AAABHElEQVRIx81VWw7DIAwz0+4FR0tvBifLPsIjIdBWqyYtVUHbsB0bxIB/LwafL3idw1lIvia4UeGk+VsrgwMFmQe+AAASxm87MgYzyyiVzZh5rBigt2+Iu2pGRAFwiP7SibMg8DjBgIzUjBjURNB6K85fBpAWBG4bC0o3kNVM69wMQdXPZtRzajQqxGAJxH0xjq02TbjWAYOb86OHxmCQIlBUfStfTZsBREQcSLVtqyov9W/IGJHDoY4MMTHqKA/V1zy9A5VEUbpk/M+fBWVCtDswB2jgLsRaWQHn9Gl7FkwWw7tOgZz3LQEUZEuBCwqsdZfw4Aiuy2BsiHwdE00i/kq7U9v7QN9460v15EbcREoXqT/+X7jRw68lntYHCbPf2nyUk7MAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMjRUMjM6MTk6MjEtMDQ6MDCCvYp2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTI0VDIzOjE5OjIxLTA0OjAw8+AyygAAAABJRU5ErkJggg==",Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACwklEQVRYhcVXMYvVQBCePNLY2YoHgt0JNknK+wdeo3it3e2VtgHh4AlCWstbO8HqRDHgH3hYHcnrbYSr7ie8MjJJZjM7md2XV70PwiabefvNfDM7+wLHRvLj9nN3LB/eXLxPUrx5/faMTWcAsBVjCNKOj3H8/P6nf5/6VtMiRVFA0zTujfZMGOa3UBQGmsYyG8NspnkO4cBEHsPkjO4skUtn6Hm7beGufejvV1IBbbG5k6DI7cseihjJsyx3z0yBpeRZvziXNwayw98QOY6Elb/4IC+lYJ6KzHMCnY1FiuTWXs3IgwqEiy4su8w1wZibnpyTagqkU2QTuALD4vQ+Y0pN0oaATnCQEhyp9ls/cr3QYsRIosnejx9/9za3p6cyBVrOfSwpvJhNc3IC8OoawORwcf8LKpzEVjxHO85MY57n43P4Ipu2tbOxtYAtv+sAOjteixQISS27HOVWLbjWQHZpocsNJOMGKMsSoKp8B6aCi3dEqnwi4TshRA5bA1/Gmlyv17Db7fp70QfkWaBHrzUVTYGBvHPkxg7k5+dP3FrpoeREwrcY7XeuwBR5MiO//7eTDiw/SilC3mSo6TglXOQ6+bPnj+BubAeruQI6KSfHnMu26trrnsiRPKKADimvPIyoJuxVuzdyTs4ciB+lWoHNCvHAyIUDy7qc7O2EIXLrVXue51DXNdS1b/uhfKc7wKPWmok83Qht20B22Rwc+cyBGLmsASpEqvzNZgN/v/nkmloyetWB2PlNI0+XMRassU52vs81QgnXCWO9nP+DgbHxcDw8XfeRI0h2xKfqq7tCcAqEIpc550AyJH754nFPigVHOZfRoxPRFBxKjqBIeaHFCk7Dah+5lJ+T8ConZ3jES5AulZ/yjmS0OMmqbTWc506ECrL/OMUFYuR0LyNess9DwC+jqqqSpCzLo30dV1WV/Afzhtm1V2X8ZwAAAABJRU5ErkJggg==";const Kt=[{id:"theme",display:"System Theme",iconUrl:Vt,template:Lt},{id:"dlab",display:"DitherLab",iconUrl:Jt,template:Wt},{id:"help",display:"Help",iconUrl:Ft,template:jt},{id:"mine",display:"Minesweeper",iconUrl:Xt,template:Qt},{id:"sudoku",display:"Sudoku",iconUrl:Ht,template:Pt}];function _t(){const e=K();return a("div",{className:"launch-root bevel content",children:Kt.map(t=>f("div",{className:"launch-item",onDoubleClick:()=>e(ye(t.template)),children:[a("img",{src:t.iconUrl||"",alt:t.id,className:"launch-icon"}),a("div",{className:"launch-label",children:t.display})]},t.id))})}const U=(...e)=>e.join(" ");var qt=`# Help

These pages explain in detail the functions of DitherOS and its many programs and features.

## Using this help

To get started, select a topic from the navigation menu to the left, or click the Next [\u2193] button above.

You can select different topics using the navigation menu. Some help topics contain sub-pages that explain further aspects, these topics are indicated by a [+] button to their left and can be expanded by clicking on the [+] button. Expanded topics can be collapsed by clicking on the [-] button.`,$t=`# DitherOS Basics

DitherOS does everything with windows, much like a real desktop environment. Each program runs within its own window, allowing multiple instances of the same program to run at the same time.

## Starting programs

Programs are started from the Program Manager, a launcher application. To start the Program Manager after closing it, click the [Program Manager] button on the desktop, found in the top left corner.

## Manipulating windows

All windows can be moved and closed. Most windows can also be resized and maximized. Window manipulation may be restricted on some windows that have a fixed size.

### Moving and resizing windows

To move a window, simply drag from anywhere on the title bar. To resize a window, drag starting from its border. The cursor will change to [\u2194] dual arrows when the window can be resized by dragging, and the direction of the arrows indicates the direction of resizing.  
Drag from the corners to change the width and height of a window at the same time.

### Maxmizing and closing windows

Windows can be maximized to take up the entire screen by clicking on the maximize button at the top right corner or double-clicking anywhere on the title bar. The same action will restore a maximized window to its original size.  
Windows can be closed by clicking the [x] close button at the top right corner of the title bar. Be aware that closing a window will terminate the program running in it and the program state will be lost.`,en=`# About DitherOS

DitherOS is a web application designed to resemble the desktop environments of the 1990s to early 2000s. While its primary feature and namesake is the dithering engine DitherLab, DitherOS runs several programs [not yet -- it's very early in development].

## Why?

Because, well, why not. DitherOS is a side project for fun and practice that essentially acts as a sandbox for whatever silly things I might want to put online.

And because I find explaining things almost as much fun as making things, these pages will often contain detailed explanations on how the different parts of DitherOS work. Of course, DitherOS is also an open source project, so if you're really curious you can always [take a look](https://github.com/teofum/dither).
`,tn=`# Credits

## Frameworks and Libraries

DitherOS is built with [React](https://reactjs.org/), [Redux](https://redux.js.org/) and [TypeScript](https://www.typescriptlang.org/) using [Vite](https://vitejs.dev/).

Other libraries used:

* [react-redux](https://react-redux.js.org/)
* [react-markdown](https://github.com/remarkjs/react-markdown)
* [immer](https://immerjs.github.io/immer/)

## Resources

### Fonts

* HP 100LX 6x8
* Paradise132 7x16
* DOS/V re. JPN12
* DOS/V re. ANK16
* DOS/V re. ANK24
* Nix8810 M15
* Toshiba TxL2 8x16
* Toshiba TxL1 8x16
* CL EagleII 9x16

All fonts from [The Ultimate Oldschool PC Font Pack](https://int10h.org/oldschool-pc-fonts/) by VileR.

Downloading and installing TTF versions of the fonts is recommended for best results ([Why?](help/how/font)).

### Icons

* [Windows 98 Icons](https://win98icons.alexmeub.com/)`,nn=`# Programs

DitherOS is composed of several different programs. In this section, you can find a complete description of each one as well as a guide on how to use it.`,an=`# DitherLab

DitherLab is a highly customizable general-purpose [dithering](https://en.wikipedia.org/wiki/Dither) engine, powered by WebGL and Web Workers. It supports a variety of dithering algorithms or **processes** and a large number of preset color palettes, as well as the ability to create and edit custom palettes.

`,on=`# The DitherLab User Interface

The DitherLab UI consists of four main parts: the control bar, the view area, the tool pane, and the status bar.

## Control bar

The control bar is the horizontal bar at the top. It contains DitherLab's basic controls: saving a render result, controlling the view, and rendering a dithered image.

### Live Render

When the "Live Render" box is checked, the image will be automatically rendered whenever settings are changed. Uncheck it if you have a slow GPU and the application becomes unresponsive. Live Render is disabled for processes running on the CPU (Software). 

## View area

The view area is where you'll see the dithered image once rendered. If the image is larger than the viewport, you can move around using the scrollbars or by panning with the mouse. You can zoom in and out with the view controls in the control bar.

## Tool pane

The tool pane to the right of the view area is where most of DitherLab's interaction happens. In it, you will find panels containing the various settings you can adjust to control the dithering process. Each setting is explained in detail in the [DitherLab Settings](help/programs/dlab/settings) section.

Setting panels can be collapsed and expanded by clicking on their title bars. Collapsed panels will show an arrow pointing down [\u2193] at the top right corner. Expanded panels will show an arrow pointing up [\u2191].

## Status bar

The status bar can be found at the bottom of the DitherLab window. It displays useful information like the program status, how long the last render took and the actual render resolution.`,sn=`# DitherLab Settings


## Source Image

In this section you can open an image from your computer to dither and see a preview thumbnail, as well as some basic source image metadata such as resolution and file size.

## Resize

In this section you can set resizing behavior as well as a target size. The final size of the rendered image is determined as:

* Keep original size: The image is rendered at its original size. No resizing is done.
* Resize to fit: The image is resized to fit within the specified size, while conserving its original aspect ratio. This mode will not scale the image up.
* Force resize: The image is resized to the specified size, and may be scaled up or stretched.

## Color Palette

In this section, you can select a color palette to use when dithering. Palettes are divided into groups, selected with the first dropdown menu. The second dropdown menu selects palettes within the group.

From this section you can also click [Palette Editor] to open the custom palette editor. For more details, see [Custom palettes](help/programs/dlab/settings/palettes).

## Process

In this section you can select a render device and the dithering process to run. For more details on render devices, processes, and a breakdown of each process' settings, see [Processes](help/programs/dlab/process).`,rn=`# The Palette Editor

In addition to the preset color palettes, DitherLab allows for the creation and editing of custom palettes with any number of colors. Palettes are managed and modified using the Palette Editor panel.

To open the Palette Editor, click [Palette Editor] under the palette options in the main tool pane. To close it, click the [x] button in the top right corner of the panel.

Note that currently, only editing of indexed palettes is supported.

## Palette management

### Creating a custom palette

You can create a new custom palette from scratch by clicking [New], or copy an existing custom or preset palette by clicking [Duplicate].

### Deleting a custom palette

You can delete a custom palette by clicking the [Delete] button. Please note this action is irreversible and all palette data will be permanently lost.

### Renaming palettes

You can rename a custom palette by typing in the box below the palette management buttons.

## Palette editing

### Viewing preset palettes

Preset palettes cannot be edited. Instead, the editor will display information about the palette and allow you to duplicate it as an editable custom palette.

### Adding and removing colors

With a custom palette selected, the editor will display a list of the palette's colors. Click [Add Color] at the end of the list to add a new color. Click the [-] button to the right of a color to remove it from the palette. Please note this action cannot be undone.

### Modifying colors

Clicking on a color from the list will select it. The selected color will be highlighted with a colored outline. When a color is selected, a color picker will be shown below the list allowing you to modify the color.`,ln=`# Programs

DitherLab supports many different render processes or programs. Each process is an implementation of a dithering algorithm with configuration options. Different processes will give drastically different results, so be sure to try more than one.

## Render device

DitherLab supports two rendering devices: Software (CPU) and WebGL (GPU). Because implementations, capabilities and limitations differ between devices, most programs support only one device. 

The render device can be changed with the [Device] option in the process settings.

### Software

The Software device uses Web Workers to run intensive rendering programs on the CPU without locking the main UI thread. Software rendering supports using multiple render threads for compatible programs. By default, the software renderer is allowed to use up to half of your CPU's available thread count.

Any dithering algorithm can be implemented in software. However, the software renderer is much slower than hardware-accelerated rendering. For this reason, some programs are not available with software rendering.

### WebGL

The WebGL device runs on the GPU through the WebGL API. Hardware acceleration massively increases performance, enabling features such as live rendering.

While the WebGL device is much faster than software, it has some limitations. Programs are implemented as shaders, which means dithering algorithms must be parallelizable. Some processes, such as Error Diffusion, are incompatible with parallelization and this the WebGL device.`,cn=`# Error Diffusion

The error diffusion program applies dithering by choosing the closest color from the palette for each pixel, calculating the error (how different the chosen color is from the actual color), and "spreading" or diffusing that error across neighboring pixels.

Because of each pixel's dependence on the error values calculated from the previous pixels, the error diffusion algorithm is inherently serial and cannot be parallelized. For this reason, error diffusion is only available in Software rendering with no support for multiple threads.

For a complete technical explanation of how error diffusion works, check out the [Wikipedia article on error diffusion](https://en.wikipedia.org/wiki/Error_diffusion).

## Error Diffusion options

### Model

The error diffusion model used. Each model distributes error in a different pattern, achieving different results.

### Diffuse

The error diffusion coefficient. Error is multiplied by this number: at 0.0, no error is diffused (equal to no dithering); at 1.0, the full error is diffused. Lower values reduce the "intensity" of the dithering effect, and may reduce noise.

### Gamma

Value used for gamma correction. The standard value for sRGB and correct for most screens is the default of 2.2, a value of 1.0 does no gamma correction.`,An=`# Color Pair Ordered

Color pair ordered dithering is an implementation of arbitrary-color [ordered dithering](https://en.wikipedia.org/wiki/Ordered_dithering) that attempts to find the mix of two palette colors that best represents a given pixel, then applies a threshold matrix to the mix.

The algorithm can be easily parallelized and is implemented exclusively for the WebGL device. While a software implementation is possible, color pair ordered dithering's complexity can cause it to become extremely slow when used with larger palettes of more than 16 colors.

For a full explanation of the algorithm, see [How it works: Color Pair Ordered](help/how/dlab_cpo).

## Color Pair Ordered options

### Matrix

Threshold map or matrix used for dithering. A larger matrix allows for finer mixing and higher quality. The matrix type changes the look of the dithered image:

* A Bayer Matrix is mathematically balanced and will produce a distinct cross-hatch pattern.
* Blue Noise (Void and Cluster) is randomly generated, and looks similar to error diffusion dithering.
* Halftone maps are clustered maps that produce a circular halftone pattern.

### Variance

Variance is a mix control parameter that reduces the penalty for mixing two colors distant from each other. Higher variance increases color accuracy, but might introduce noise, odd-looking mixes and artifacts.

The ideal value for variance depends on the image and palette: a palette with colors closer to those of the image and to each other will allow higher variance before mix artifacts occur.
  
### Gamma

Value used for gamma correction. The standard value for sRGB and correct for most screens is the default of 2.2, a value of 1.0 does no gamma correction.`,dn=`# Pattern Dithering

Pattern dithering is an implementation of arbitrary-color [ordered dithering](https://en.wikipedia.org/wiki/Ordered_dithering) based on the algorithm of the same name used by Adobe Photoshop for dithering images.

Pattern Dithering differs from [Color Pair Ordered](help/programs/dlab/process/cpo) dithering in that it drops the assumption that thresholding can only be done on a mix of two colors. Instead, Pattern Dithering picks a list of possible colors for each pixel, starting with the closest color and adding the accumulated error to subsequent picks. The threshold matrix is then used to select a color from the list. This allows Pattern Dithering to effectively "mix" as many as 64 colors for a given pixel, thus achieving superior color accuracy on par with or even surpassing error diffusion algorithms.

Pattern Dithering is fully parallelizable and runs on WebGL. A software implementation is also available.

For a full explanation of the algorithm, see [How it works: Pattern Dithering](help/how/dlab_pattern).

## Pattern Dithering options

### Threads

This option is only available in software mode. Controls the number of CPU threads used for rendering.

The default **AUTO** setting attempts to balance CPU load and performance by calculating the necessary number of threads based on render size and process complexity, capped at half the available CPU threads. This is the recommended setting.

### Matrix

Threshold map or matrix used for dithering. A larger matrix allows for finer mixing and higher quality. The matrix type changes the look of the dithered image:

* A Bayer Matrix is mathematically balanced and will produce a distinct cross-hatch pattern.
* Blue Noise (Void and Cluster) is randomly generated, and looks similar to error diffusion dithering.
* Halftone maps are clustered maps that produce a circular halftone pattern.

### Mix

The maximum number of colors used in mixing and, by extension, possible mix levels. A higher value will result in higher quality dithering, but you may want to experiment with lower values for aesthetic or performance reasons.

### Dither

Effectively an intensity scale. Error is multiplied by this value, with a higher error multiplier resulting in more "aggressive" mixing to compensate. At 1.0, error is not reduced and maximum dithering is applied. At 0.0, error is nullified (equivalent to no dithering).

Generally, higher values will be more accurate, but may introduce unwanted noise. The ideal value varies from image to image, and experimentation is recommended for best results.

### Gamma

Value used for gamma correction. The standard value for sRGB and correct for most screens is the default of 2.2, a value of 1.0 does no gamma correction.`,mn=`# Minesweeper

The classic game and time-honored work-avoiding tradition of Minesweeper. Based on the version shipped with the Windows 9x family of operating systems.

## Controls

*Click* to reveal tiles. *Right click* to flag.

## How to play

The game is won by either revealing all non-mine tiles, or correctly flagging all mines (and no other tiles). You lose if you hit a mine. Go figure.  

The number on a revealed tile indicates the number of adjacent tiles that contain mines.`,hn=`# Sudoku

A simple Sudoku game.

## How to play

The objective of Sudoku is to fill the 9x9 grid with numbers between 1-9 such that each row, column, and 3x3 block contains each digit exactly once.

## Controls

*Click* on a cell to select it.  
*Click* on the selected cell to cycle its value. *Right click* cycles down.

Use number keys *1-9* to change the selected cell.  
Use *Ctrl+Number keys* to toggle annotations for the number pressed.

*0* clears the cell value.  
*Ctrl+0* clears annotations.  
*BackSpace* clears cell value and annotations.

*Arrow keys* can be used to move between cells.  
*Ctrl+Arrow keys* moves one block (3 cells) at a time.

Click-to-cycle can be toggled on and off under Game \u2192 Mouse Controls

## Credits

[Sudoku puzzle generation API](https://github.com/bertoort/sugoku)`,un=`# How it works

In this section, you can find technical explanations on how some parts of DitherOS work under the hood and why.`,gn=`# Pixel-perfect fonts

Modern computers use almost excusively vector-based fonts, formats such as TrueType (TTF) and PostScript (OTF). Vector fonts are great: small file sizes, effectively infinite detail, and amazing flexibility. Text rendering has come a long way too, and fonts look better than ever.

When emulating the look of an oldschool PC, though, we don't \\*want\\* smooth, antialiased text. It'll just look wrong, because that's not what text looked like in computers back then. For best results, we want crisp, pixel-perfect text like you'd get from a bitmap font, but web browsers, like most modern software, lack support for such font formats.

## Retro fonts

Emulating a pixelated bitmap font in a vector format is easy enough: you just have to draw square lines on a grid. There's [great adaptations](https://int10h.org/oldschool-pc-fonts/) of old bitmap fonts to be found online. Getting the browser to render it just right is somewhat trickier.

## Font size

The first step in getting a web browser to render pixel-perfect text is to get the font size just right: we can use only multiples of the font's pixel height, such that each font pixel maps exactly to a number of **hardware pixels** (this last part is important; we'll get to why and what it means in a second). Otherwise, antialiasing will kick in and our text will look blurry (having no antialiasing at all would be even worse: the font would appear distorted, with some rows and columns of pixels larger than others).

### High-res displays and DPI scaling

Setting the font size just right is enough to get pixel-perfect (or close to it) text on standard, unscaled displays. These days though, that's not enough: many high resolution monitors and laptop displays use a non-integer scaling factor like 150%. On such a display, 16px becomes 24 \\*real\\* pixels, the size is no longer just right, and your font looks blurry. Woe is you.

There's no real fix for this, but we can work around it by "snapping" our text to multiples accounting for scaling. For example, to deal with 150% scaling, we could divide all our sizes by 1.5, causing our app to render as if scaling was set to 100% with the right font size. We could also multiply everything by (2/1.5)=4/3, for an "effective" scaling of 200%. The actual number doesn't matter, as long as it's an integer.

DitherOS deals with this by detecting display scaling, then scaling the \\*entire app\\* to the nearest integer. It does this by redefining the root font size, and having every UI element sized in font size relative **rem** and **em** units. It scales everything rather than just text for two reasons: to keep a consistent font-to-ui size ratio, and because most icons and UI elements are designed to be pizel-perfect as well.

## TTF vs Web Fonts

Even doing everything right, it's still nearly impossible to achieve pixel-perfect text in a real web application. There are many reasons, chief among them that the \\*position\\* of your text can be a non-integer number and there's nothing you can do about that.

There's a solution for this, however. Turns out, browsers \\*do\\* support bitmap fonts! Well, sort of, anyway. It's complicated. 

The short version: TTF fonts can contain bitmap font data alongside the vector data, to render pixel-perfect fonts when the size is just right (all [fonts used in this app](https://int10h.org/oldschool-pc-fonts/) have a version with it). This rendering is flawless, and browsers \\*do\\* support it. The Web Font spec, however, doesn't; should you try to load such a TTF for use with CSS, the sanitizer will reject it. No font for you. This means you can have pixel-perfect, bitmap enabled TTF fonts, as long as the user manually installed them in their computer. Not very convenient.

DitherOS is set to use the Web Font version of all fonts, but does look for installed TTF versions of most fonts first (excluding a few with incompatible sizes). Thus, for the best pixel-perfect results, you might want to download and install the fonts used in their **Mx (mixed outline)** TTF version (and really, you should just download them anyway because they're cool).
`;const $e=e=>{var n;let t=[e];return(n=e.children)==null||n.forEach(i=>t=t.concat($e(i))),t.map(i=>W(L({},i),{content:""}))},re={id:"help",name:"Help Pages",content:qt,children:[{id:"help/about",name:"About DitherOS",content:en,children:[{id:"help/about/credits",name:"Credits",content:tn}]},{id:"help/basics",name:"DitherOS Basics",content:$t},{id:"help/programs",name:"Programs",content:nn,children:[{id:"help/programs/dlab",name:"DitherLab",content:an,children:[{id:"help/programs/dlab/ui",name:"User Interface",content:on},{id:"help/programs/dlab/settings",name:"Settings",content:sn,children:[{id:"help/programs/dlab/settings/palettes",name:"Palette Editor",content:rn}]},{id:"help/programs/dlab/process",name:"Programs",content:ln,children:[{id:"help/programs/dlab/process/errord",name:"Error Diffusion",content:cn},{id:"help/programs/dlab/process/cpo",name:"Color Pair Ordered",content:An},{id:"help/programs/dlab/process/pattern",name:"Pattern Dithering",content:dn}]}]},{id:"help/programs/mine",name:"Minesweeper",content:mn},{id:"help/programs/sudoku",name:"Sudoku",content:hn}]},{id:"help/how",name:"How it works",content:un,children:[{id:"help/how/font",name:"Pixel perfect fonts",content:gn}]}]};var pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAACXBIWXMAABYlAAAWJQFJUiTwAAAF42lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAyLTE1VDIwOjQ4OjE4LTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0xNlQwMjo1MDoxMC0wMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMi0xNlQwMjo1MDoxMC0wMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxNDY1NDM2My1iMzkxLTQ2NGItYjY0Yy00ZTg3MjAyNThiOTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MmQzZjQ3ZjItNmEwMi1hNDQ3LTk4YzEtZjMyNzNjM2VhYjI4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MmQzZjQ3ZjItNmEwMi1hNDQ3LTk4YzEtZjMyNzNjM2VhYjI4Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyZDNmNDdmMi02YTAyLWE0NDctOThjMS1mMzI3M2MzZWFiMjgiIHN0RXZ0OndoZW49IjIwMjItMDItMTVUMjA6NDg6MTgtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4zIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MTQ2NTQzNjMtYjM5MS00NjRiLWI2NGMtNGU4NzIwMjU4YjkzIiBzdEV2dDp3aGVuPSIyMDIyLTAyLTE2VDAyOjUwOjEwLTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Px8i3AAAADNJREFUGJVj/P//PwMhwERQBTZFjIyMGEYTZRIjzE3YTPj//z8jiiJk62CS5FmHDxBlEgAAvRUFaR1C2QAAAABJRU5ErkJggg==",vn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF42lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAyLTE1VDIwOjQ4OjE3LTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0xNlQwMjo1MDoyOS0wMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMi0xNlQwMjo1MDoyOS0wMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5ZDhiYTU5Ny01NTIxLTA5NDAtOWY4YS1hNjFiMjY1MDY1ZmMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M2JkNDBlYjYtZDczNi1mMDQ5LThjOTAtYTYyZmI4ZGFmZDAxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6M2JkNDBlYjYtZDczNi1mMDQ5LThjOTAtYTYyZmI4ZGFmZDAxIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYmQ0MGViNi1kNzM2LWYwNDktOGM5MC1hNjJmYjhkYWZkMDEiIHN0RXZ0OndoZW49IjIwMjItMDItMTVUMjA6NDg6MTctMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4zIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWQ4YmE1OTctNTUyMS0wOTQwLTlmOGEtYTYxYjI2NTA2NWZjIiBzdEV2dDp3aGVuPSIyMDIyLTAyLTE2VDAyOjUwOjI5LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AV7+ZQAAAClJREFUGJVj/P//PwMhwERQBVUVscAYjIyMGI77//8/IwMDAwPjIHQ4AB3pCg2UFM66AAAAAElFTkSuQmCC";const $=$e(re);function wn(e){const[t,n]=G.exports.useState(["/help"]),[i,s]=G.exports.useState(re);G.exports.useEffect(()=>{e.path&&d(e.path)},[e.path]);const r=l=>{t.includes(l)?n(t.filter(h=>h!==l)):n(t.concat(l))},o=l=>{var y;const h=l.split("/").slice(1);let c=re,v="help";for(const g of h){v=`${v}/${g}`;const b=(y=c.children)==null?void 0:y.find(w=>w.id===v);if(b)c=b;else return}return{item:c,id:v}},d=l=>{const h=o(l);if(!h)return;const c=A(l).map(v=>(v==null?void 0:v.id)||"");n(t.filter(v=>!c.includes(v)).concat(c)),s(h.item)},m=()=>{const l=$.findIndex(h=>h.id===i.id);if(!(l<1))return $[l-1].id},u=()=>{const l=$.findIndex(h=>h.id===i.id);if(!(l===-1||l>=$.length-1))return $[l+1].id},A=l=>l.split("/").slice(0,-1).map((h,c,v)=>{const y=v.slice(0,c+1).join("/");return o(y)}),p=l=>{var y;const h=l.children&&l.children.length>0,c=t.includes(l.id);return f("li",{className:U("help-nav-item",i===l?"selected":""),children:[h&&a("button",{className:"help-nav-item-button",onClick:()=>r(l.id),children:a("img",{src:c?vn:pn,alt:c?"-":"+"})}),a("span",{className:"help-nav-item-label",onClick:()=>s(l),children:l.name}),c&&h&&a("ul",{className:"help-nav-item-children",children:(y=l.children)==null?void 0:y.map(g=>p(g))})]},l.id)};return f("div",{className:"help-root",children:[a("div",{className:"help-nav bevel content",children:a("ul",{className:"help-nav-tree",children:p(re)})}),f("div",{className:"help-infobar",children:[a("button",{className:"bevel",disabled:m()===void 0,onClick:()=>d(m()||""),children:"\u2191"}),a("button",{className:"bevel",disabled:u()===void 0,onClick:()=>d(u()||""),children:"\u2193"}),f("div",{children:[A(i.id).map((l,h)=>[a("a",{className:"fake-href",onClick:()=>d((l==null?void 0:l.id)||""),children:l==null?void 0:l.item.name},`${h}_item`),a("span",{children:"\xA0\u2192\xA0"},`${h}_sep`)]),a("span",{children:i.name})]})]}),a("div",{className:"help-content bevel content",children:a("div",{className:"help-content-scroll",children:a(Xe,{components:{a(v){var y=v,{href:l,children:h}=y,c=xe(y,["href","children"]);return(l==null?void 0:l.startsWith("help"))?a("a",W(L({className:"fake-href"},c),{onClick:()=>d(l),children:h})):a("a",W(L({href:l},c),{target:"_blank",rel:"noopener noreferrer",children:h}))}},children:i.content})})})]})}var et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAMElEQVQokWMYBoARyQv/8XgHro4Jrvr/f0ZsKtHFmfBJYjMERQOyIlw2DnnAwMAAAJr8EvyXKpcyAAAAAElFTkSuQmCC",bn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAASklEQVQokd2PSQoAMAgDTT+uvtwiRenmvdSLmMTA0AeDQBARq3CYGcCItklHEfaVZW3zcQkv+v6QZoRVdSnJw+xAcCH9YHhtiKgDumQPB+3C89EAAAAASUVORK5CYII=";function F(e){var r;let t=null,n=null;G.exports.useEffect(()=>{e.options.find(o=>o.value===e.value)||i(e.options[0])},[e.options]);const i=o=>{!o||(n&&n.classList.remove("show"),e.onChange&&e.onChange({selected:o}))},s=()=>{if(!(!t||!n))if(n.classList.contains("show"))n.classList.remove("show");else{const o=t.getBoundingClientRect();n.style.top=`${o.bottom}px`,n.style.left=`${o.left}px`,n.style.width=`${o.width}px`,n.classList.add("show");const d=m=>{const u=m.target;(t==null?void 0:t.contains(u))||(n&&n.classList.remove("show"),window.removeEventListener("mousedown",d))};window.addEventListener("mousedown",d)}};return f("div",{className:"cmb-root bevel inset",ref:o=>t=o,children:[a("input",{type:"text",className:"cmb-input",readOnly:!0,disabled:e.disabled,value:((r=e.options.find(o=>o.value===e.value))==null?void 0:r.name)||""}),a("button",{className:"cmb-button bevel",onClick:s,children:a("img",{src:e.disabled?bn:et,alt:"v"})}),a("div",{className:"cmb-option-list",ref:o=>n=o,children:e.options.map((o,d)=>a("div",{className:"cmb-option",onClick:()=>i(o),children:o.name},d))})]})}const Se=[{className:"theme__default",displayName:"Default"},{className:"theme__dark",displayName:"Dark"},{className:"theme__2k",displayName:"2K"},{className:"theme__blue",displayName:"Steel"}],ze=[{className:"set0",displayName:"Default Font Set"},{className:"set1",displayName:"Font Set 1"},{className:"set2",displayName:"Font Set 2"},{className:"set3",displayName:"Font Set 3"}],Ce=[{className:"paradise",displayName:"Paradise132 7x16"},{className:"jpn12",displayName:"DOS/V JPN12"},{className:"ank16",displayName:"DOS/V ANK16"},{className:"tosh2",displayName:"ToshibaTxL2 8x16"}];function In(){var l,h,c,v,y;const e=document.documentElement.className.split(" "),t=e.find(g=>g.startsWith("theme__")),n=(l=e.find(g=>g.startsWith("font-text__")))==null?void 0:l.split("__")[1],i=(h=e.find(g=>g.startsWith("font-title__")))==null?void 0:h.split("__")[1],[s,r]=G.exports.useState(((c=Se.find(g=>g.className===t))==null?void 0:c.className)||""),[o,d]=G.exports.useState(((v=ze.find(g=>g.className===n))==null?void 0:v.className)||""),[m,u]=G.exports.useState(((y=Ce.find(g=>g.className===i))==null?void 0:y.className)||""),A=U(s,`font-text__${o}`,`font-title__${m}`);console.log(A);const p=()=>{document.documentElement.className=A,localStorage.setItem("__theme",A)};return f("div",{className:"theme-root content",children:[a("div",{className:"theme-preview bevel content",children:a("div",{className:U("theme-preview-bg",A),children:a("div",{className:"theme-fake-frame bevel",children:f("div",{className:"win-main",children:[f("div",{className:"win-titlebar",children:[a("img",{className:"win-titlebar-icon",src:Ie,alt:"icon"}),a("div",{className:"win-titlebar-spacer"}),a("div",{className:"win-title",children:"Window Title"}),a("div",{className:"win-titlebar-spacer"}),f("div",{className:"win-titlebar-button-group",children:[a("div",{className:"win-titlebar-button fake-button icon-button bevel",children:a("img",{src:_e,alt:"max"})}),a("div",{className:"win-titlebar-button fake-button icon-button bevel",children:a("img",{src:Me,alt:"x"})})]})]}),f("div",{className:"win-content theme-fake-content bevel",children:[a("h1",{children:"Heading"}),a("h2",{children:"Heading 2"}),a("h3",{children:"Heading 3"}),a("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."})]}),f("div",{className:"action-bar",children:[a("div",{className:"fake-button bevel",children:"Cancel"}),a("div",{className:"fake-button bevel",children:"OK"})]})]})})})}),f("div",{className:"theme-settings",children:[a("span",{className:"theme-label",children:"Color Theme"}),a(F,{value:s,options:Se.map(g=>({name:g.displayName,value:g.className})),onChange:g=>r(g.selected.value)}),a("span",{className:"theme-label",children:"Text Font"}),a(F,{value:o,options:ze.map(g=>({name:g.displayName,value:g.className})),onChange:g=>d(g.selected.value)}),a("span",{className:"theme-label",children:"Title Font"}),a(F,{value:m,options:Ce.map(g=>({name:g.displayName,value:g.className})),onChange:g=>u(g.selected.value)})]}),a("div",{className:"theme-actions action-bar",children:a("button",{className:"bevel",onClick:p,children:"Apply"})})]})}var yn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAPElEQVQokWMYBoAR5oX////DfcPIyPj/////jEh8uBwTup9BipFpdMCETTEuPlgNEhuriVjUDW3AwMAAAMqIDA8h6hYtAAAAAElFTkSuQmCC";function ne(e){const[t,n]=G.exports.useState(!0);return f("div",{className:"coll-root bevel",children:[f("div",{className:"coll-titlebar",onClick:()=>n(!t),children:[a("span",{className:"coll-title",children:e.title}),a("div",{className:"coll-titlebar-spacer"}),a("img",{src:t?yn:et})]}),a("div",{className:"coll-content",style:t?void 0:{display:"none"},children:e.children})]})}const Ye=["B","K","M","G","T","P"],Mn=e=>{let t=0;for(;e>=1e3&&t<Ye.length;)e=e/1e3,t++;const n=e.toString();return n.substring(0,n.includes(".")?5:4)+Ye[t]};function k(e){return t=>({type:e,payload:t})}const x={setRenderTarget:k("renderTarget"),setRenderControl:k("renderControl"),setImageInfo:k("options/image/info"),setImageElement:k("options/image/element"),setResizeMode:k("options/resize/mode"),resize:k("options/resize/size"),setPaletteGroup:k("options/palette/group"),setPalette:k("options/palette/palette"),setCustomPalettes:k("options/palette/custom"),setDevice:k("options/process/device"),setProcess:k("options/process/process"),setProcSettings:k("options/process/settings"),setProcSetting:k("options/process/setting"),setLiveRender:k("options/liveRender"),setStatus:k("status/status"),setRenderStatus:k("status/renderStatus"),setRenderTime:k("status/time"),setRenderSize:k("status/size"),zoomIn:k("view/zoom/in"),zoomOut:k("view/zoom/out"),resetZoom:k("view/zoom/reset"),showPaletteEditor:k("view/showPaletteEditor"),hidePaletteEditor:k("view/hidePaletteEditor"),togglePaletteEditor:k("view/togglePaletteEditor")};function fn(e){const{info:t}=e.slice;let n=null;const i=r=>{const o=r.target;if(o==null?void 0:o.files){const d=o.files[0];e.dispatch(x.setImageElement(null)),e.dispatch(x.setImageInfo(W(L({},t),{src:URL.createObjectURL(d),filename:d.name,meta:[{prop:"Size (bytes)",value:Mn(d.size)}]})))}},s=r=>{const o=r.target;e.dispatch(x.setImageElement(o)),e.dispatch(x.setImageInfo(W(L({},t),{width:o.naturalWidth,height:o.naturalHeight,meta:[...t.meta,{prop:"Dimensions",value:`${o.naturalWidth}x${o.naturalHeight}`}]})))};return f("div",{className:"dlab-image-root",children:[a("input",{type:"file",style:{display:"none"},ref:r=>n=r,onChange:r=>i(r.nativeEvent)}),a("span",{className:"dlab-image-filename",children:t.filename||"No image"}),a("button",{className:"dlab-image-upload-button bevel",onClick:()=>n==null?void 0:n.click(),children:"Browse..."}),a("div",{className:"dlab-image-preview bevel inset light",children:t.src?a("img",{src:t.src,onLoad:r=>s(r.nativeEvent)}):a("span",{children:"No preview available"})}),a("div",{className:"dlab-image-meta",children:t.meta.map((r,o)=>f("div",{className:"dlab-image-meta-item",children:[a("span",{className:"dlab-image-meta-name",children:r.prop}),a("span",{className:"dlab-image-meta-value",children:r.value})]},o))})]})}var S=(e=>(e.CGA2Bit="IBM CGA 2-bit modes",e.RetroPC="Retro PCs",e.RetroVC="Retro Consoles",e.Mono="Monochrome",e.Duo="Dual Tone",e.RGB="RGB",e.CMYK="CMYK",e.Auto="Optimized (Auto)",e.User="User (custom)",e.Other="Other",e.Generated="__AUTOGENERATED",e.Hidden="__HIDDEN",e))(S||{}),V=(e=>(e.CPU="Software",e.GL="WebGL",e))(V||{}),B=(e=>(e[e.Input=0]="Input",e[e.Combo=1]="Combo",e[e.Range=2]="Range",e))(B||{}),J=(e=>(e[e.KeepOriginalSize=0]="KeepOriginalSize",e[e.FitToSize=1]="FitToSize",e[e.ForceResize=2]="ForceResize",e))(J||{}),H=(e=>(e.Ready="Ready",e.Rendering="Rendering...",e.Done="Done",e.Stopped="Stopped",e))(H||{});const Nn={renderTarget:null,renderControl:{},options:{image:{info:{src:"",filename:"",width:0,height:0,meta:[]},element:null},resize:{mode:0,x:800,y:600},palette:{group:S.RetroPC,palette:null,customPalettes:[]},process:{device:V.GL,process:null,settingValues:{}},liveRender:!0},status:{renderStatus:"Ready",lastRenderTime:0,renderWidth:0,renderHeight:0},view:{scale:1,showEditor:!1}},Rn=[{value:J.KeepOriginalSize,name:"Keep original size"},{value:J.FitToSize,name:"Fit to size"},{value:J.ForceResize,name:"Force resize"}];function En(e){const{mode:t,x:n,y:i}=e.slice,s=o=>{const d=o.key;d!=="Backspace"&&!d.match(/[0-9]/)&&!d.startsWith("Arrow")&&o.preventDefault()},r=(o,d)=>{const u=parseInt(o.target.value),A=d==="x"?{w:u||0,h:i}:{w:n,h:u||0};e.dispatch(x.resize(A))};return f("div",{className:"dlab-resize-root",children:[a(F,{value:t,options:Rn,onChange:o=>e.dispatch(x.setResizeMode(o.selected.value))}),f("div",{className:"dlab-resize-inputs",children:[a("input",{type:"number",className:"bevel",value:n,disabled:t===J.KeepOriginalSize,onKeyDown:o=>s(o.nativeEvent),onInput:o=>r(o.nativeEvent,"x")}),a("span",{children:"x"}),a("input",{type:"number",className:"bevel",value:i,disabled:t===J.KeepOriginalSize,onKeyDown:o=>s(o.nativeEvent),onInput:o=>r(o.nativeEvent,"y")})]})]})}var E=(e=>(e.Indexed="Indexed",e.Mono="Monochrome",e.RGB="RGB",e.Mixer="Mixer",e.Auto="Auto",e))(E||{});const Dn=(e,t)=>{const i=e.data.slice(0,4)[1]===1,s=(e.data.length-4)/5,r=i?[255,255,255]:[0,0,0],o=A=>e.data[4+A*5],d=A=>e.data[5+A*5],m=A=>e.data.slice(6+A*5,9+A*5),u=A=>{let p=t;for(let l=0;l<A;l++)p=~~(p/o(l));return p%o(A)};for(let A=0;A<s;A++)m(A).forEach((p,l)=>{i&&(p=255-p);const h=~~(p*d(A)),c=p-h,v=h+u(A)*~~(c/(o(A)-1));r[l]+=i?-v:v,r[l]<0&&(r[l]=0),r[l]>255&&(r[l]=255)});return r},fe=e=>{switch(e.type){case E.Indexed:return e.data.length/3;case E.Mono:return e.data[0];case E.RGB:return e.data[0]*e.data[1]*e.data[2];case E.Mixer:{const t=(e.data.length-4)/5;let n=1;for(let i=0;i<t;i++)n*=e.data[4+i*5];return n}case E.Auto:return e.data[0];default:return 0}},tt=(e,t)=>{if(t<0||t>=fe(e))throw new Error(`Color index ${t} out of bounds`);switch(e.type){case E.Indexed:return e.data.slice(t*3,t*3+3);case E.Mono:return e.data.slice(2,5).map(n=>{const i=~~(n*e.data[1]),s=n-i;return i+t*~~(s/(e.data[0]-1))});case E.Mixer:return Dn(e,t);case E.RGB:{const n=t%e.data[2],i=~~(t/e.data[2])%e.data[1];return[~~(t/(e.data[2]*e.data[1])),i,n].map((r,o)=>r*~~(255/(e.data[o]-1)))}case E.Auto:default:throw new Error("Invalid or Auto palette type")}},_=e=>Array.from({length:fe(e)},(t,n)=>tt(e,n)),nt={name:"Windows 4-bit RGBI",type:E.Indexed,group:S.RetroPC,data:[0,0,0,0,0,128,0,128,0,0,128,128,128,0,0,128,0,128,128,128,0,192,192,192,128,128,128,0,0,255,0,255,0,0,255,255,255,0,0,255,0,255,255,255,0,255,255,255]},Gn={name:"Commodore 64 (*)",type:E.Indexed,group:S.RetroPC,data:[0,0,0,98,98,82,137,137,137,173,173,173,255,255,255,159,78,68,203,126,117,109,84,18,161,104,60,201,212,135,154,226,155,92,171,94,106,191,198,136,126,203,80,69,155,160,87,163]},Zn={name:"Apple II (16-color) (*)",type:E.Indexed,group:S.RetroPC,data:[0,0,0,156,156,156,255,255,255,96,78,189,208,195,255,255,68,253,227,30,96,255,160,208,255,106,60,96,114,3,208,221,141,20,245,60,0,163,96,114,255,208,20,207,253]},Tn={name:"Apple II High-res (6-color) (*)",type:E.Indexed,group:S.RetroPC,data:[0,0,0,255,255,255,255,68,253,255,106,60,20,245,60,20,207,253]},xn={name:"Apple IIGS (MCV)",type:E.Indexed,group:S.RetroPC,data:[0,0,0,221,0,51,0,0,153,221,34,221,0,119,34,85,85,85,34,34,255,102,170,255,136,85,0,255,102,0,170,170,170,255,153,136,17,221,0,255,255,0,68,255,153,255,255,255]},Sn={name:"Macintosh II (1987)",type:E.Indexed,group:S.RetroPC,data:[255,255,255,255,255,0,255,102,0,221,0,0,255,0,153,51,0,153,0,0,204,0,153,255,0,170,0,0,102,0,102,51,0,153,102,51,187,187,187,136,136,136,68,68,68,0,0,0]},zn={name:"16-color palette 1",type:E.Indexed,group:S.Other,data:[8,0,0,32,26,11,67,40,23,73,41,16,35,67,9,93,79,30,156,107,32,169,34,15,43,52,124,43,116,9,208,202,64,232,160,119,106,148,171,213,196,179,252,231,110,252,250,226]},Cn={name:"IBM CGA 4-bit RGBI",type:E.Indexed,group:S.RetroPC,data:[0,0,0,0,0,170,0,170,0,0,170,170,170,0,0,170,0,170,170,85,0,170,170,170,85,85,85,85,85,255,85,255,85,85,255,255,255,85,85,255,85,255,255,255,85,255,255,255]},Yn={name:"CGA Mode 4 Palette 0 (low)",type:E.Indexed,group:S.CGA2Bit,data:[0,0,0,0,170,0,170,0,0,170,85,0]},Ln={name:"CGA Mode 4 Palette 0 (high)",type:E.Indexed,group:S.CGA2Bit,data:[0,0,0,85,255,85,255,85,85,255,255,85]},kn={name:"CGA Mode 4 Palette 1 (low)",type:E.Indexed,group:S.CGA2Bit,data:[0,0,0,0,170,170,170,0,170,170,170,170]},Wn={name:"CGA Mode 4 Palette 1 (high)",type:E.Indexed,group:S.CGA2Bit,data:[0,0,0,85,255,255,255,85,255,255,255,255]},Bn={name:"CGA Mode 5 (low)",type:E.Indexed,group:S.CGA2Bit,data:[0,0,0,0,170,170,170,0,0,170,170,170]},jn={name:"CGA Mode 5 (high)",type:E.Indexed,group:S.CGA2Bit,data:[0,0,0,85,255,255,255,85,85,255,255,255]},On={name:"Game Boy (2-bit MC)",type:E.Indexed,group:S.RetroVC,data:[15,56,15,48,98,48,139,172,15,155,188,15]},Qn={name:"NES (All colors) (*)",type:E.Indexed,group:S.RetroVC,data:[0,0,0,40,40,40,168,168,168,0,24,32,0,96,112,0,192,208,144,224,232,0,30,0,0,104,16,0,200,112,144,232,200,0,104,0,40,192,32,168,232,160,0,24,0,8,88,0,112,176,0,200,224,144,16,0,0,96,64,0,192,152,0,232,216,136,64,0,0,160,32,0,248,128,24,248,200,160,88,0,0,208,16,0,248,112,104,248,192,192,88,0,16,208,0,88,248,112,176,248,192,224,56,0,80,160,8,168,248,104,248,248,192,248,0,8,112,88,24,216,152,104,248,208,184,248,0,8,120,8,48,224,80,120,248,176,192,248,0,8,88,0,72,184,32,160,248,168,216,248,72,72,72,160,160,160,248,248,248]},Un={name:"8-color RGB (3-bit, 1bpc)",type:E.RGB,group:S.RGB,data:[2,2,2]},Pn={name:"16-color RGB (4-bit, 1-2-1)",type:E.RGB,group:S.RGB,data:[2,4,2]},Vn={name:"32-color RGB (5-bit, 2-2-1)",type:E.RGB,group:S.RGB,data:[4,4,2]},Fn={name:"64-color RGB (6-bit, 2bpc)",type:E.RGB,group:S.RGB,data:[4,4,4]},Jn={name:"256-color RGB (8-bit, 3-3-2)",type:E.RGB,group:S.RGB,data:[8,8,4]},Xn={name:"Black/White (1-bit MC)",type:E.Mono,group:S.Mono,data:[2,0,255,255,255]},Hn={name:"Black/Green (1-bit MC)",type:E.Mono,group:S.Mono,data:[2,0,0,255,0]},Kn={name:"Black/Amber (1-bit MC)",type:E.Mono,group:S.Mono,data:[2,0,255,200,15]},_n={name:"4-tone Greyscale (2-bit MC)",type:E.Mono,group:S.Mono,data:[4,0,255,255,255]},qn={name:"4-tone Amber (2-bit MC)",type:E.Mono,group:S.Mono,data:[4,.04,255,200,15]},$n={name:"16-tone Greyscale (4-bit MC)",type:E.Mono,group:S.Mono,data:[16,0,255,255,255]},ei={name:"Pip-Boy 3000 (2-bit MC)",type:E.Mono,group:S.Other,data:[4,.15,64,252,155]},ti=[Ln,Yn,Wn,kn,jn,Bn,nt,Cn,Gn,Zn,Tn,xn,Sn,On,Qn,Un,Pn,Vn,Fn,Jn,Xn,Kn,Hn,_n,qn,$n,zn,ei];function ni(e){const{group:t,palette:n,customPalettes:i}=e.slice,s=ti.concat(i),r=Object.values(S).filter(A=>!A.startsWith("__")).filter(A=>s.filter(p=>p.group===A).length>0).map(A=>({name:A,value:A})),o=s.filter(A=>A.group===t).map(A=>({name:A.name,value:A})),d=n&&_(n),m=(d==null?void 0:d.length)||0,u=m>64?"smaller":m>32?"small":"";return f("div",{className:"dlab-palette-root",children:[a(F,{options:r,value:t,onChange:A=>e.dispatch(x.setPaletteGroup(A.selected.value))}),a(F,{options:o,value:n,onChange:A=>e.dispatch(x.setPalette(A.selected.value))}),d&&a("div",{className:U("dlab-palette-preview",u),children:d.map((A,p)=>a("div",{className:"dlab-palette-swatch bevel content",style:{background:`rgb(${A[0]}, ${A[1]}, ${A[2]})`}},p))}),a("button",{className:"bevel",onClick:()=>e.dispatch(x.showPaletteEditor()),children:"Palette Editor"})]})}var ii=`attribute vec4 a_position;
attribute vec2 a_texCoord;

varying vec2 v_texCoord;

void main() {
  gl_Position = a_position;

  v_texCoord = a_texCoord;
}`,ai=`precision mediump float;

uniform sampler2D u_image;

varying vec2 v_texCoord;

void main() {
  vec3 color = texture2D(u_image, v_texCoord).xyz;

  gl_FragColor = vec4(color, 1.0);
}`,oi=`precision mediump float;

#define PALETTE_SIZE $ // $ is replaced in JS before compiling

#define CE 0.1 // Error multiplier, [0.0, 1.0] higher = more dither
#define CLIST_SIZE % // Candidate list size, higher is better quality but slower

uniform vec3 u_palette[PALETTE_SIZE];
uniform vec2 u_texSize;
uniform float u_gamma;
uniform sampler2D u_image;
uniform sampler2D u_threshold;
uniform float u_thres_size;
uniform float u_err_mult;

varying vec2 v_texCoord;

vec3 gamma(vec3 color) {
  return vec3(
    pow(color.x, u_gamma),
    pow(color.y, u_gamma),
    pow(color.z, u_gamma)
  );
}

vec3 ungamma(vec3 color) {
  float ungamma = 1.0 / u_gamma;
  return vec3(
    pow(color.x, ungamma),
    pow(color.y, ungamma),
    pow(color.z, ungamma)
  );
}

float compare(vec3 c1, vec3 c2) {
  return length(c1 - c2);
}

float luma(vec3 color) {
  return color.x * 0.299 + color.y * 0.587 + color.z * 0.114;
}

void main() {
  vec2 thresholdCoord = fract(v_texCoord * u_texSize / u_thres_size);
  float threshold = texture2D(u_threshold, thresholdCoord).x;

  vec3 color = texture2D(u_image, v_texCoord).xyz;
  color = gamma(color);

  // Build a list of potential candidates
  vec3 error = vec3(0.0);
  vec3 clist[CLIST_SIZE];
  for (int i = 0; i < CLIST_SIZE; i++) {
    vec3 target = color + error * u_err_mult;
    vec3 candidate = vec3(0.0);
    float dMin = 999999999.0; // Absurdly large number

    // Find the closest color from palette
    for (int j = 0; j < PALETTE_SIZE; j++) {
      vec3 test = u_palette[j];
      test = gamma(test);
      float d = compare(target, test);
      if (d < dMin) {
        dMin = d;
        candidate = test;
      }
    }

    // And add it to the candidate list
    clist[i] = candidate;

    // By adding the candidate's error to the next iteration,
    // the next candidate will compensate for that error thus
    // getting closer to the original color.
    error += color - candidate;
  }

  // Insertion sort the candidate list by luma
  for (int i = 1; i < CLIST_SIZE; i++) {
    for (int j = CLIST_SIZE; j > 0; j--) {
      if (j > i) continue; // silly GLSL won't let me do j = i, next best thing
      if (luma(clist[j-1]) <= luma(clist[j])) break;
      vec3 temp = clist[j-1];
      clist[j-1] = clist[j];
      clist[j] = temp;
    }
  }

  int index = int(threshold * float(CLIST_SIZE));
  if (threshold == 1.0) index = CLIST_SIZE - 1;

  // Silly workaround for GLSL not allowing indexing by variables
  for (int i = 0; i < CLIST_SIZE; i++) {
    if (i == index) color = clist[i];
  }

  color = ungamma(color);

  gl_FragColor = vec4(color, 1.0);
}
`,si=`precision mediump float;

#define PALETTE_SIZE $ // $ is replaced in JS before compiling

uniform vec3 u_palette[PALETTE_SIZE];
uniform vec2 u_texSize;
uniform float u_gamma;
uniform sampler2D u_image;
uniform sampler2D u_threshold;
uniform float u_thres_size;
uniform float u_variance;

varying vec2 v_texCoord;

struct ColorMix {
  vec3 color1;
  vec3 color2;
  float ratio;
};

float mixError(vec3 target, vec3 cmix, float compDist, float rmh) {
  return length(target - cmix) + compDist * (abs(rmh) + 0.5) * float(PALETTE_SIZE) / (10.0 * pow(2.0, u_variance));
}

vec3 gamma(vec3 color) {
  return vec3(
    pow(color.x, u_gamma),
    pow(color.y, u_gamma),
    pow(color.z, u_gamma)
  );
}

vec3 ungamma(vec3 color) {
  float ungamma = 1.0 / u_gamma;
  return vec3(
    pow(color.x, ungamma),
    pow(color.y, ungamma),
    pow(color.z, ungamma)
  );
}

void main() {
  vec2 thresholdCoord = fract(v_texCoord * u_texSize / u_thres_size);
  float threshold = texture2D(u_threshold, thresholdCoord).x;

  vec3 color = texture2D(u_image, v_texCoord).xyz;

  vec3 cmix = vec3(0.0);
  vec3 c1 = vec3(0.0);
  vec3 c2 = vec3(0.0);
  vec3 g1 = vec3(0.0);
  vec3 g2 = vec3(0.0);
  ColorMix bestMix = ColorMix(vec3(0.0), vec3(0.0), 0.33);
  float minError = 999999999.0; // absurdly large number

  for(int i1 = 0; i1 < PALETTE_SIZE; i1++) {
    for(int i2 = 0; i2 < PALETTE_SIZE; i2++) {
      if(i2 < i1)
        continue;

      c1 = u_palette[i1];
      c2 = u_palette[i2];

      g1 = gamma(c1);
      g2 = gamma(c2);
      
      for(int ratio = 0; ratio < 64; ratio++) {
        if(i1 == i2 && ratio > 0)
          break;
        float r64 = float(ratio) / 64.0;
        cmix = g1 + r64 * (g2 - g1);

        float cdist = length(c2 - c1);
        float error = mixError(color, ungamma(cmix), cdist, r64 - 0.5);
        if(error < minError) {
          minError = error;
          bestMix = ColorMix(c1, c2, r64);
        }
      }
    }
  }

  color = threshold < bestMix.ratio ? bestMix.color2 : bestMix.color1;

  gl_FragColor = vec4(color, 1.0);
}`;const ce={imageVert:ii,imageFrag:ai,patternFrag:oi,bayerFrag:si},it=e=>e.viewport(0,0,e.canvas.width,e.canvas.height),Ae=(e,t,n)=>{const i=e.createShader(t);if(!i)throw new Error("createShader: gl.createShader failed");if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))return i;const r=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`createShader: compile error: ${r}`)},de=(e,t,n,i)=>{e.enableVertexAttribArray(t),e.bindBuffer(e.ARRAY_BUFFER,n),e.vertexAttribPointer(t,i.size,i.type,i.normalize||!1,i.stride||0,i.offset||0)},at=(e,t,n)=>{const i=e.createProgram();if(!i)throw new Error("linkProgram: gl.createProgram failed");if(e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;const r=e.getProgramInfoLog(i);throw e.deleteProgram(i),new Error(`linkProgram: link error: ${r}`)},ot=(e,t,n,i,s={internalFormat:e.RGBA,format:e.RGBA,type:e.UNSIGNED_BYTE},r=e.TEXTURE0)=>{const o=e.createTexture();if(!o)throw new Error("tex2DFromData: failed to create texture");e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);let d=null;switch(s.type){case e.UNSIGNED_BYTE:d=new Uint8Array(i);break;case e.UNSIGNED_SHORT:case e.UNSIGNED_SHORT_5_6_5:case e.UNSIGNED_SHORT_5_5_5_1:case e.UNSIGNED_SHORT_4_4_4_4:d=new Uint16Array(i);break;case e.UNSIGNED_INT:d=new Uint32Array(i);break;case e.FLOAT:d=new Float32Array(i);break}return e.texImage2D(e.TEXTURE_2D,0,s.internalFormat,t,n,0,s.format,s.type,d),o},st=(e,t,n={internalFormat:e.RGBA,format:e.RGBA,type:e.UNSIGNED_BYTE},i=e.TEXTURE0)=>{const s=e.createTexture();if(!s)throw new Error("tex2DFromImage: failed to create texture");return e.activeTexture(i),e.bindTexture(e.TEXTURE_2D,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,n.internalFormat,n.format,n.type,t),s},ri=[0,12,3,15,8,4,11,7,2,14,1,13,10,6,9,5].map(e=>e*16);var li={size:4,data:ri};const ci=[0,48,12,60,3,51,15,63,32,16,44,28,35,19,47,31,8,56,4,52,11,59,7,55,40,24,36,20,43,27,39,23,2,50,14,62,1,49,13,61,34,18,46,30,33,17,45,29,10,58,6,54,9,57,5,53,42,26,38,22,41,25,37,21].map(e=>e*4);var Ai={size:8,data:ci};const di=[111,49,141,161,113,194,71,176,200,50,150,94,66,37,85,251,25,99,238,221,32,249,147,19,38,106,219,169,193,137,13,166,125,177,79,15,65,172,123,87,212,130,246,23,116,54,228,211,41,201,151,131,188,104,53,235,160,62,1,180,77,240,146,68,2,243,56,91,229,5,203,28,186,101,143,205,33,92,189,107,222,163,114,36,213,155,138,70,244,84,225,48,126,157,17,134,83,195,21,253,76,45,178,115,12,40,168,105,252,175,210,59,100,179,144,122,171,97,234,128,214,148,198,8,72,26,237,44,231,31,69,11,204,58,18,192,88,60,112,220,139,86,120,152,207,129,242,159,223,110,34,247,164,24,233,183,52,197,170,6,108,187,51,89,136,185,153,78,47,133,98,156,35,248,95,63,16,75,218,39,0,67,227,121,196,239,3,74,127,20,226,142,245,174,119,199,250,103,145,14,208,173,109,217,191,82,202,162,29,93,149,22,165,181,55,30,90,64,42,140,167,57,117,46,215,232,61,128,81,236,216,118,158,254,184,27,241,102,4,132,73,190,9,209,43,96,7,135,230,80,10,124,224,206,154,182];var mi={size:16,data:di};const hi=[65,246,203,177,54,148,96,135,122,62,109,205,27,217,151,103,250,78,122,228,3,83,232,160,45,241,109,40,125,93,201,36,230,187,254,206,147,14,87,134,245,197,177,223,59,92,132,169,49,182,140,3,58,164,27,204,12,83,196,5,159,183,92,196,170,140,24,127,109,255,36,210,79,192,178,141,168,11,70,130,181,27,147,47,191,170,67,14,187,76,0,197,161,66,146,172,104,134,58,97,182,231,162,115,34,74,2,237,162,187,7,242,217,31,69,193,243,87,146,130,248,172,224,104,235,21,217,117,236,49,87,154,228,69,15,166,235,25,48,86,119,238,195,91,7,221,165,105,21,255,120,146,210,129,88,236,22,52,244,18,74,157,25,8,126,43,64,189,218,95,128,24,207,46,113,145,85,102,228,119,41,106,222,66,50,152,32,126,47,144,57,10,191,104,213,4,43,196,181,104,146,1,223,252,60,34,161,45,244,61,208,133,89,199,37,56,245,29,174,151,114,189,211,127,179,238,215,194,246,109,26,240,170,52,155,108,81,249,28,195,60,175,153,19,208,176,16,186,114,210,93,72,178,203,82,162,28,72,179,241,160,83,120,55,213,128,155,100,180,136,213,106,144,117,31,230,71,154,177,106,94,224,47,69,229,99,83,4,46,114,87,141,72,156,202,80,139,13,232,181,137,67,159,212,10,130,253,77,52,160,234,80,6,241,192,19,253,111,227,131,247,147,115,60,133,207,26,248,91,68,31,202,13,78,229,16,201,82,183,52,240,18,220,8,139,163,202,13,134,32,164,223,198,63,33,169,51,223,101,20,116,211,61,198,36,226,121,93,236,38,200,97,141,123,33,102,139,165,58,133,157,4,96,41,198,13,219,98,17,226,144,40,189,172,236,113,53,189,126,67,173,156,4,101,141,114,204,63,191,79,118,240,185,57,143,247,103,154,229,121,1,178,39,149,186,253,89,4,101,172,17,185,55,112,167,0,215,246,63,203,227,43,86,219,34,206,65,172,80,51,186,37,171,73,110,161,10,219,81,140,163,241,26,95,252,39,215,193,170,44,85,125,249,22,40,149,108,207,76,21,130,13,183,252,94,209,240,129,68,45,165,127,242,48,152,82,142,222,71,29,179,86,189,150,24,176,122,104,184,141,238,120,225,135,89,253,125,193,242,61,97,123,45,5,212,104,148,50,223,135,120,75,247,29,228,158,53,176,213,88,5,168,43,191,90,213,74,29,135,59,84,9,225,110,27,145,215,70,204,250,22,194,155,242,133,46,8,115,73,249,15,233,77,48,23,154,106,165,205,2,152,49,25,206,232,150,183,251,66,35,203,185,20,86,57,11,150,96,186,3,137,234,102,64,254,221,119,231,173,54,148,201,162,115,195,173,153,203,234,79,188,114,6,131,105,43,91,118,59,226,162,95,213,136,55,193,163,94,211,10,240,28,64,232,104,84,177,137,74,18,198,89,131,171,77,113,160,235,199,225,128,66,209,108,75,35,155,196,132,29,157,67,112,36,239,105,19,46,220,33,93,53,11,178,58,34,226,169,64,182,235,206,19,107,198,236,39,157,204,1,127,251,177,72,191,122,42,143,198,13,218,119,35,108,54,159,23,240,219,0,143,100,177,37,166,243,16,173,224,123,20,183,50,82,16,244,141,3,217,81,185,249,142,73,107,245,124,137,99,156,239,87,201,11,135,35,170,143,69,181,28,88,110,67,147,30,115,54,150,174,221,76,163,240,58,156,248,173,226,213,99,120,60,43,246,67,17,110,52,144,89,199,57,245,94,208,146,105,178,205,94,190,128,65,170,8,122,229,22,193,162,218,16,195,46,123,30,158,73,216,84,254,13,53,130,244,173,230,43,220,201,86,244,23,94,131,33,114,95,190,3,84,140,40,10,146,178,194,130,210,80,190,218,25,119,42,139,163,11,70,238,219,124,57,162,44,228,152,97,57,209,156,180,66,42,86,253,71,143,103,224,248,113,178,44,124,223,104,150,215,23,81,184,101,137,6,111,210,52,229,179,17,212,45,131,235,63,187,206,81,231,93,29,163,121,253,152,71,237,187,80,215,116,43,168,6,34,77,252,12,113,30,238,198,39,83,131,3,232,112,27,167,214,2,187,54,96,148,5,196,161,75,189,7,119,58,159,18,234,68,185,158,11,193,65,246,144,72,204,27,122,105,255,157,52,12,223,141,40,6,92,207,172,2,31,102,251,142,191,91,234,197,135,182,87,211,138,16,116,247,98,212,146,201,182,59,130,82,153,17,207,241,63,91,237,32,205,96,144,250,198,126,169,40,254,98,139,121,86,169,107,160,93,182,168,15,70,33,117,173,106,62,233,183,55,132,107,158,230,198,59,24,128,64,111,151,21,221,53,166,75,177,190,62,30,172,52,121,92,237,38,245,171,69,34,128,183,24,117,49,168,67,221,34,88,51,214,78,29,57,206,232,41,22,221,8,249,54,227,152,197,132,215,245,76,204,169,101,22,243,45,66,124,88,180,225,157,211,175,47,102,68,127,245,106,47,226,158,136,241,77,10,155,19,105,197,118,225,142,105,229,153,215,138,245,17,130,176,229,3,116,148,129,172,7,75,152,199,60,117,35,138,80,43,241,87,20,185,149,9,128,81,220,193,140,212,16,148,50,8,81,32,248,0,231,204,155,27,5,147,88,12,109,219,41,185,228,207,138,49,21,190,85,167,14,56,80,101,187,43,111,74,156,103,240,195,90,225,111,243,178,127,237,189,210,100,218,3,112,165,56,98,35,48,249,156,114,34,177,79,249,166,110,240,99,199,123,143,88,171,39,194,216,125,254,203,25,194,96,128,61,164,78,234,97,60,212,42,243,200,175,0,230,150,209,192,25,62,180,16,69,35,144,50,99,28,88,71,151,173,125,66,181,140,200,232,119,213,191,18,69,235,7,98,200,39,218,184,138,55,73,186,16,115,79,236,99,66,181,80,57,166,148,251,31,114,7,176,149,253,9,133,71,114,32,126,64,88,12,246,142,220,45,207,249,158,188,216,15,137,164,48,10,23,193,235,31,222,15,70,163,142,60,91,168,146,121,57,133,20,65,119,13,229,160,212,241,58,137,177,51,160,33,134,239,118,1,71,216,90,189,220,33,121,161,184,94,225,157,252,203,166,53,98,122,82,164,134,118,1,83,63,202,252,184,227,109,246,91,145,49,103,128,84,242,2,108,227,200,45,215,187,238,154,91,207,174,44,26,95,36,153,223,7,119,209,16,222,92,175,50,197,139,242,45,131,70,106,204,23,144,194,47,106,22,136,216,36,173,231,28,95,236,175,224,125,103,39,76,214,132,58,201,78,159,252,208,29,175,188,37,132,254,27,85,107,164,30,246,76,147,107,252,132,201,109,23,249,88,192,149,107,40,231,211,23,106,154,18,166,237,51,82,245,62,6,86,178,77,239,112,184,68,10,193,55,108,43,23,167,148,9,118,153,27,168,38,121,178,6,62,154,96,223,54,76,153,176,4,71,222,51,128,190,3,217,81,168,65,184,75,166,46,232,72,186,12,158,77,124,180,63,84,193,2,214,175,36,218,130,236,149,41,191,4,131,248,153,205,143,213,73,197,243,85,229,179,65,96,209,239,19,218,112,194,43,135,117,207,12,101,124,233,141,201,15,101,231,60,117,195,48,12,125,206,101,139,25,127,245,54,141,98,247,35,227,208,96,118,137,152,100,114,165,207,15,223,60,161,90,47,104,79,18,254,156,135,57,32,204,48,248,2,187,136,70,90,143,232,79,247,21,164,243,183,59,194,35,114,172,151,41,180,24,156,235,223,146,243,36,220,62,174,86,115,206,191,5,169,52,142,250,29,64,232,10,190,49,69,122,102,142,200,235,30,225,126,179,93,5,120,97,187,111,137,162,78,104,225,46,165,30,183,10,202,66,145,83,217,44,159,93,251,65,207,85,242,140,99,31,89,57,1,160,113,198,7,214,163,20,66,221,129,112,12,160,180,44,198,76,255,92,27,174,245,83,19,116,168,187,61,37,165,50,222,173,12,218,21,233,125,151,14,198,251,57,102,125,170,49,110,32,134,17,237,78,8,132,226,20,124,72,205,171,115,191,80,180,93,251,151,37,236,47,94,148,79,237,201,71,90,220,126,19,157,136,230,186,37,210,54,71,216,9,147,230,69,193,240,76,147,60,90,192,37,55,177,114,131,214,157,224,92,238,195,228,98,205,119,177,215,49,96,165,196,6,255,44,135,239,216,23,131,50,103,77,123,178,254,26,187,40,103,21,242,147,105,171,209,59,111,11,162,124,150,251,134,99,206,112,141,17,33,206,127,251,169,72,212,244,92,26,82,4,71,39,19,150,180,1,167,70,143,24,155,188,35,145,55,109,219,65,19,152,39,70,233,189,15,227,136,195,109,160,215,60,170,132,188,54,34,82,226,40,145,74,195,94,1,178,42,84,26,246,125,89,107,157,45,100,29,121,5,158,203,234,145,188,244,208,116,79,61,129,47,248,192,58,105,246,116,234,177,82,158,185,98,202,122,173,145,61,166,204,28,55,1,85,121,140,230,209,4,118,249,200,8,98,246,214,50,234,220,108,199,158,56,174,41,212,234,177,8,199,227,184,106,134,65,45,167,108,55,175,140,254,23,220,90,113,36,230,83,3,70,200,16,32,126,230,9,84,250,107,11,213,115,90,156,72,222,242,15,32,76,46,87,158,176,68,133,190,168,116,21,132,34,64,240,14,225,188,2,148,61,82,136,239,53,149,83,220,17,99,225,31,126,8,192,100,160,203,185,16,148,209,127,172,218,136,93,241,143,53,214,164,48,196,32,79,247,41,235,144,102,173,205,183,152,100,238,215,18,108,151,28,86,61,181,154,78,170,143,116,95,75,166,220,192,21,115,68,165,13,40,253,176,196,76,154,237,87,44,230,30,136,77,239,164,95,48,22,156,61,44,205,181,71,118,26,140,94,224,179,132,7,184,200,126,48,65,248,112,195,26,127,56,233,42,219,239,6,207,250,91,189,28,211,134,253,103,121,48,248,181,96,217,129,191,59,117,138,22,202,60,169,216,68,109,53,122,5,64,195,226,183,102,249,113,167,6,103,243,191,64,236,150,55,162,97,67,20,34,163,90,134,7,168,69,142,182,201,78,124,162,142,104,39,123,12,233,49,66,33,144,14,90,160,36,205,24,109,232,92,159,1,244,111,94,130,16,183,153,246,176,221,141,31,74,133,11,211,29,147,81,222,39,174,124,2,111,21,209,121,221,253,110,214,18,229,53,219,38,253,93,1,171,100,50,71,192,222,57,202,109,162,182,198,237,209,226,64,140,243,153,74,171,33,212,49,179,219,38,250,144,205,9,84,210,44,106,253,118,233,86,191,68,235,197,133,15,156,86,217,75,245,194,44,84,170,142,188,77,150,117,202,81,159,120,31,211,247,14,232,26,134,168,147,74,244,9,83,53,27,170,126,4,84,51,201,9,241,131,85,69,149,25,191,77,117,35,163,96,20,150,180,56,167,41,155,122,48,95,59,253,203,46,185,167,35,137,154,10,56,234,99,40,246,178,102,14,189,228,60,135,185,154,113,177,83,6,227,41,93,154,130,180,73,98,195,111,230,184,123,63,146,106,188,231,123,165,54,103,223,63,241,129,198,79,8,203,25,138,221,0,181,164,24,114,100,144,233,61,106,91,226,181,72,131,2,210,60,22,137,239,47,107,148,75,39,89,208,62,254,99,120,214,20,205,114,37,222,147,254,44,19,166,97,222,21,207,41,10,97,210,14,235,171,140,189,52,229,159,216,92,110,238,73,103,247,214,140,229,72,9,28,130,206,14,249,112,198,31,161,121,194,92,156,68,215,10,200,236,20,224,127,46,198,32,186,136,173,63,247,160,190,12,58,134,217,150,34,248,80,174,157,253,65,195,130,43,88,27,1,109,69,30,123,246,61,172,196,131,20,64,35,188,170,215,155,241,79,172,26,51,150,222,242,80,171,226,34,129,164,88,175,123,101,168,3,141,160,238,70,50,234,105,1,92,120,79,174,199,89,70,118,190,136,56,115,30,141,81,244,155,184,120,209,251,176,143,46,185,149,16,38,89,158,205,82,125,45,89,117,54,193,146,124,212,87,103,44,141,17,52,252,112,187,28,248,42,67,194,243,80,108,14,151,87,29,196,139,46,211,231,25,106,244,13,49,232,5,94,200,221,181,4,107,217,72,232,149,39,85,102,227,5,81,211,228,53,179,112,237,18,197,250,178,3,98,40,237,63,167,7,185,69,208,100,199,3,78,222,55,139,155,216,31,58,176,205,217,126,164,225,68,19,243,155,128,38,208,182,154,212,168,74,238,45,122,163,55,34,17,97,59,165,192,23,204,134,164,106,121,143,244,4,153,99,139,67,32,224,204,73,187,138,24,248,110,228,130,152,174,63,144,119,204,8,111,183,92,121,230,23,98,6,252,111,182,145,99,52,72,167,139,61,101,128,28,110,149,20,89,229,193,145,175,203,129,11,218,116,237,54,68,254,28,190,74,40,217,56,228,163,113,133,159,107,11,219,120,201,155,36,13,87,231,43,242,160,90,234,74,25,251,149,41,135,192,78,56,38,204,171,7,194,223,113,2,227,80,42,250,186,59,172,209,69,132,247,80,110,239,47,75,157,91,37,199,175,12,221,94,169,129,184,12,78,240,19,56,253,174,91,50,77,177,58,243,122,24,192,102,35,18,188,171,132,51,200,166,64,243,179,156,130,82,29,117,251,88,178,23,241,161,199,11,219,135,241,7,103,42,26,219,3,183,138,249,174,15,127,148,100,47,137,62,208,24,105,201,46,175,211,85,37,147,230,26,132,96,217,187,72,211,135,167,217,125,64,210,98,15,224,85,105,33,119,11,238,216,231,134,59,34,144,205,95,120,67,145,83,99,35,156,202,117,167,63,155,93,31,65,107,213,186,241,82,231,159,119,251,85,233,145,124,96,152,195,116,66,207,161,237,3,142,163,46,110,9,78,53,250,146,39,240,160,116,4,210,228,140,196,95,66,43,184,161,214,77,50,190,32,233,180,49,125,189,77,255,141,88,235,210,122,199,150,224,25,57,1,206,111,27,196,6,152,37,68,220,1,29,242,138,9,186,42,107,197,30,89,255,151,179,229,94,197,5,108,76,185,58,145,172,73,23,51,164,107,147,200,9,101,245,127,154,10,109,166,22,216,231,14,56,181,19,190,51,14,230,42,83,120,142,70,169,38,182,77,54,176,114,192,248,59,182,75,224,100,126,83,247,55,118,224,18,62,202,32,118,157,176,221,138,30,195,253,43,91,184,247,207,15,125,71,237,115,21,174,60,220,252,89,199,66,112,173,128,223,36,111,78,134,176,102,189,163,252,95,219,127,245,139,214,236,92,17,166,132,108,157,50,17,216,169,151,73,175,206,129,101,239,137,68,22,84,48,235,95,123,17,216,132,153,114,81,224,27,93,151,45,224,194,138,75,39,129,157,5,144,44,95,72,239,146,165,250,62,6,236,32,201,48,153,9,62,99,14,161,128,48,81,213,36,232,176,200,63,25,228,7,137,37,82,169,0,45,185,247,211,128,10,202,68,165,104,231,2,62,38,179,255,56,209,168,86,3,101,211,182,55,234,102,245,214,194,158,0,202,96,28,212,154,74,133,17,108,188,87,226,197,110,32,203,228,148,190,8,92,115,252,145,97,193,109,184,245,51,218,192,148,227,104,164,62,151,175,244,50,79,31,189,239,139,161,7,192,129,33,67,248,122,15,148,26,206,79,33,169,21,120,64,218,45,126,193,113,90,222,177,67,234,28,173,149,51,254,72,20,102,244,65,139,27,80,38,131,47,238,15,93,159,112,74,123,90,33,16,115,226,37,110,143,208,158,121,87,213,104,227,112,176,233,142,162,197,229,91,172,117,188,133,51,87,249,139,174,84,240,11,53,170,38,246,143,117,206,41,123,84,167,138,182,120,42,170,197,156,236,209,162,70,213,146,60,229,25,12,210,56,179,206,75,191,88,6,182,224,58,12,199,46,73,149,82,18,97,50,28,111,59,41,246,69,11,220,150,107,199,13,35,106,181,226,147,207,124,2,54,161,76,13,236,189,222,2,58,208,86,224,126,52,2,181,117,21,85,172,124,201,136,252,167,233,131,146,250,47,136,236,20,128,94,250,171,133,26,203,55,218,188,240,75,180,221,158,140,97,239,62,180,227,75,233,155,59,134,73,20,101,186,85,212,97,249,136,63,25,96,113,241,152,30,14,248,94,67,104,225,195,249,33,103,44,187,66,100,42,4,85,23,160,100,197,73,168,40,113,66,183,235,164,116,0,126,151,208,19,85,123,4,194,162,18,125,42,24,186,118,208,252,31,162,238,65,230,22,194,179,108,214,159,202,38,175,133,73,185,111,217,167,18,138,56,153,4,223,78,161,30,149,199,119,184,221,62,212,119,30,244,145,218,17,100,36,138,252,69,171,40,103,135,251,33,214,49,112,204,93,144,166,97,48,6,192,92,116,46,140,155,37,129,49,5,146,74,127,52,90,231,211,161,44,147,200,231,41,91,129,179,205,243,116,89,219,242,71,105,238,36,176,153,53,204,78,191,157,242,87,215,24,192,90,227,13,202,170,70,182,235,81,31,254,213,65,242,220,141,77,171,218,197,8,105,171,225,89,240,34,228,180,247,21,105,5,61,84,130,32,76,186,238,110,68,51,139,24,174,9,135,53,169,13,133,88,1,228,105,131,8,51,124,61,179,108,48,144,243,64,115,52,145,101,129,154,57,174,2,84,128,159,109,16,57,244,127,80,251,202,70,118,165,190,102,15,67,165,196,142,242,190,11,251,120,158,9,216,166,14,98,234,61,188,38,208,151,196,113,254,67,186,24,91,173,226,200,13,233,159,210,122,30,163,86,196,219,22,10,225,188,136,115,196,19,36,237,183,152,40,27,180,59,16,150,25,56,80,137,209,153,221,124,38,113,225,100,175,63,208,83,29,254,193,152,203,123,81,250,95,22,76,47,217,143,163,240,210,42,110,151,79,39,98,8,76,222,186,5,239,42,161,247,74,95,41,232,52,169,203,64,96,213,135,112,208,97,138,223,178,216,250,7,116,49,86,26,75,170,54,212,22,149,47,104,142,119,37,73,227,18,108,159,215,125,233,181,99,38,118,58,137,71,250,29,133];var ui={size:64,data:hi};const gi=[3,1,6,4,2,0,7,5,6,4,3,1,7,5,2,0].map(e=>e*32);var pi={size:4,data:gi};const vi=[13,12,9,7,1,2,0,0,15,17,11,6,0,3,0,0,14,16,10,8,5,4,0,0,7,1,2,13,12,9,0,0,6,0,3,15,17,11,0,0,8,5,4,14,16,10,0,0].map(e=>e*14);var wi={size:6,data:vi};const bi=[12,6,7,13,16,20,21,17,5,0,2,8,27,30,28,22,4,1,3,9,26,31,29,23,15,11,10,14,19,25,24,18,16,20,21,17,12,6,7,13,27,30,28,22,5,0,2,8,26,31,29,23,4,1,3,9,19,25,24,18,15,11,10,14].map(e=>e*8);var Ii={size:8,data:bi};const Ne=[Ai,li,ui,mi,Ii,wi,pi],yi=[-1,1,-1,-1,1,1,-1,-1,1,-1,1,1],Mi=[0,0,0,1,1,0,0,1,1,1,1,0],Le=(e,t)=>e!==void 0?e:t;let ue=null,ke=null,We=null;const fi=async(e,t)=>{if(!t.image.element)throw new Error("runBayerLike: Image is null");if(!t.palette.palette)throw new Error("runBayerLike: No palette selected");const n=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!n)throw new Error("runBayerLike: WebGL is unavailable");const i=t.process.settingValues,s=_(t.palette.palette).flat().map(w=>w/255);it(n);const r=~~(s.length/3);(r!==We||n!==ke)&&(ue=null),We=r,ke=n;let o=ue;if(!o){console.log("Compiling shaders...");const w=ce.bayerFrag.replace(/\$/g,r.toString()),T=Ae(n,n.VERTEX_SHADER,ce.imageVert),Z=Ae(n,n.FRAGMENT_SHADER,w);o=at(n,T,Z),ue=o}const d=n.getAttribLocation(o,"a_position"),m=n.getAttribLocation(o,"a_texCoord"),u=n.getUniformLocation(o,"u_palette"),A=n.getUniformLocation(o,"u_texSize"),p=n.getUniformLocation(o,"u_image"),l=n.getUniformLocation(o,"u_threshold"),h=n.getUniformLocation(o,"u_thres_size"),c=n.getUniformLocation(o,"u_variance"),v=n.getUniformLocation(o,"u_gamma"),y=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,y),n.bufferData(n.ARRAY_BUFFER,new Float32Array(yi),n.STATIC_DRAW);const g=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,g),n.bufferData(n.ARRAY_BUFFER,new Float32Array(Mi),n.STATIC_DRAW);const b=Ne[i.threshold||0];st(n,t.image.element),ot(n,b.size,b.size,b.data,{format:n.LUMINANCE,internalFormat:n.LUMINANCE,type:n.UNSIGNED_BYTE},n.TEXTURE1),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.useProgram(o),n.uniform3fv(u,s),n.uniform2f(A,n.canvas.width,n.canvas.height),n.uniform1i(p,0),n.uniform1i(l,1),n.uniform1f(h,b.size),n.uniform1f(c,Le(i.variance,ve.settings.variance.default)||0),n.uniform1f(v,Le(i.gamma,ve.settings.gamma.default)||0),de(n,d,y,{size:2,type:n.FLOAT}),de(n,m,g,{size:2,type:n.FLOAT}),n.drawArrays(n.TRIANGLES,0,6)},ve={device:V.GL,name:"Color Pair Ordered",settings:{threshold:{name:"Matrix",type:B.Combo,options:[{name:"8x8 Bayer Matrix",value:0},{name:"4x4 Bayer Matrix",value:1},{name:"64x64 Blue Noise",value:2},{name:"16x16 Blue Noise",value:3},{name:"8x8 Halftone",value:4},{name:"6x6 Halftone",value:5},{name:"4x4 Halftone",value:6}]},variance:{name:"Variance",type:B.Range,min:0,max:8,step:.2,default:3,showValue:e=>e.toFixed(1)},gamma:{name:"Gamma",type:B.Range,min:1,max:8,step:.2,default:2.2,showValue:e=>e.toFixed(1)}},run:fi},Ni=[{x:1,y:0,w:7/16},{x:-1,y:1,w:3/16},{x:0,y:1,w:5/16},{x:1,y:1,w:1/16}],Ri=[{x:1,y:0,w:7/48},{x:2,y:0,w:5/48},{x:-2,y:1,w:3/48},{x:-1,y:1,w:5/48},{x:0,y:1,w:7/48},{x:1,y:1,w:5/48},{x:2,y:1,w:3/48},{x:-2,y:2,w:1/48},{x:-1,y:2,w:3/48},{x:0,y:2,w:5/48},{x:1,y:2,w:3/48},{x:2,y:2,w:1/48}],Ei=[{x:1,y:0,w:5/32},{x:2,y:0,w:3/32},{x:-2,y:1,w:2/32},{x:-1,y:1,w:4/32},{x:0,y:1,w:5/32},{x:1,y:1,w:4/32},{x:2,y:1,w:2/32},{x:-1,y:2,w:2/32},{x:0,y:2,w:3/32},{x:1,y:2,w:2/32}],Di=[{x:1,y:0,w:8/42},{x:2,y:0,w:4/42},{x:-2,y:1,w:2/42},{x:-1,y:1,w:4/42},{x:0,y:1,w:8/42},{x:1,y:1,w:4/42},{x:2,y:1,w:2/42},{x:-2,y:2,w:1/42},{x:-1,y:2,w:2/42},{x:0,y:2,w:4/42},{x:1,y:2,w:2/42},{x:2,y:2,w:1/42}],Gi=[Ni,Ri,Di,Ei];function Zi(e){return(e[0]*299+e[1]*587+e[2]*114)/(255*1e3)}function Ti(e){return e[0]*.299+e[1]*.587+e[2]*.114}function Be(e,t=2.2){return e.map(n=>{let i=n/255;return i=i>.04045?Math.pow((i+.055)/1.055,t):i/12.92,i*100})}function xi(e,t=2.2){return e.map(n=>{let i=n/100;return i=i>.0031308?1.055*Math.pow(i,1/t)-.055:i*12.92,~~(i*255)})}function Si(e){const[t,n,i]=e.map(h=>h/255),s=Math.max(t,n,i),r=Math.min(t,n,i),o=s-r,d=(s+r)/2;if(o===0)return[0,0,d*100];const m=d<.5?o/(s+r):o/(2-s-r),[u,A,p]=[t,n,i].map(h=>((s-h)/6+o/2)/o);let l=0;return t===s?l=p-A:n===s?l=1/3+u-p:i===s&&(l=2/3+A-u),l<0&&(l=l+1),l>1&&(l=l-1),[l*360,m*100,d*100]}function ge(e,t,n){return n<0&&(n=n+1),n>1&&(n=n-1),6*n<1?e+(t-e)*6*n:2*n<1?t:3*n<2?e+(t-e)*6*(2/3-n):e}function zi(e){const[t,n,i]=e.map((d,m)=>d/(m===0?360:100));if(n===0)return[i*255,i*255,i*255];const s=i<.5?i*(1+n):i+n-n*i,r=2*i-s;return[ge(r,s,t+1/3),ge(r,s,t),ge(r,s,t-1/3)].map(d=>d*255)}function ee(e){return`#${e.map(t=>Math.round(t)).map(t=>t.toString(16).padStart(2,"0")).join("")}`}function Ci(e,t,n){let i=[],s=Number.POSITIVE_INFINITY;for(let r=0;r<t.length;r++){const o=n(e,t[r]);o<=s&&(i=t[r],s=o)}return i}const Yi=(e,t)=>(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2]);function Li(e,t,n,i){const s=e.width*e.height*4,r=e.width*4,o=Gi[n.matrix||0];if(!t.palette.palette)throw new Error("null palette");const d=_(t.palette.palette),m=n.gamma||2.2;for(let u=0;u<s;u+=4){const A=Be(Array.from(e.data.slice(u,u+3)),m);for(let p=0;p<3;p++)e.data[u+p]=A[p];u%(r*4)===0&&i&&i(u,s,e)}for(let u=0;u<d.length;u++)d[u]=Be(d[u],m);for(let u=0;u<s;u+=4){const A=Array.from(e.data.slice(u,u+3)),p=Ci(A,d,Yi),l=u%r/4;for(let c=0;c<3;c++)e.data[u+c]=xi(p,m)[c];const h=A.map((c,v)=>(c-p[v])*(n.error_mult||1));for(let c=0;c<o.length;c++){const v=u+o[c].x*4+o[c].y*r;if(l+o[c].x>=0&&l+o[c].x<e.width)for(let y=0;y<3;y++)e.data[v+y]+=h[y]*o[c].w}u%(4*r)===0&&i&&i(u,s,e)}return e}const ki={id:"ProcErrorDiffusion",name:"Error Diffusion",run:Li,maxAllowedPaletteSize:65536,supports:{threads:!1,gamma:!0},complexity:e=>e*2};Array.from({length:100001});function je(e,t=2.2){const n=[0,0,0];for(let i=0;i<3;i++)n[i]=Math.pow(e[i]/255,t);return n}const Wi=(e,t)=>(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2]),Bi=e=>[0,.01,.02,.05,.1,.2,.35,.5,.8,1][e];function ji(e,t,n,i){if(!t.palette.palette)throw new Error("runPatternDither: No palette selected");const s=_(t.palette.palette),r=e.width*e.height*4,o=e.width*4,d=Ne[n.threshold||0],m=n.gamma||2.2,u=Bi(n.amount||5),A=Array(n.clist_size||64).fill(-1),p=[0,0,0];let l;const h=s.map(y=>je(y,m)),c=h.map(Ti),v=Array(e.data.length).fill(0);for(let y=0;y<r;y+=4){const g=je(Array.from(e.data.slice(y,y+3)),m);for(let b=0;b<3;b++)v[y+b]=g[b];y%(o*24)===0&&i&&i(y,r,e)}for(let y=0;y<r;y+=4){l=Array.from(v.slice(y,y+4));const g=y%o/4,b=~~(y/o),w=d.size,T=4*Math.ceil(w/4),Z=d.data[g%w+T*(b%w)]/255,D=[0,0,0];A.fill(-1);for(let M=0;M<A.length;M++){for(let R=0;R<3;R++)p[R]=l[R]+D[R]*u;let z=0,C=Number.MAX_VALUE;for(let R=0;R<h.length;R++){const Y=Wi(p,h[R]);Y<C&&(C=Y,z=R)}A[M]=z;for(let R=0;R<3;R++)D[R]=D[R]+l[R]-h[z][R]}A.sort((M,z)=>c[M]-c[z]);let I=~~(Z*A.length);I===A.length&&(I=A.length-1);const N=A[I];for(let M=0;M<3;M++)e.data[y+M]=s[N][M];y%(o*4)===0&&i&&i(y,r,e)}return e}const Oi={id:"ProcPatternDither",name:"Pattern Dithering",run:ji,maxAllowedPaletteSize:65536,supports:{threads:!0,gamma:!0},complexity:e=>e*64},Qi=[ki,Oi];function Ui(){return new Worker("/dither/assets/worker.5401ddec.js",{type:"module"})}class Pi{constructor(){X(this,"worker");X(this,"busy",!1);X(this,"x",0);X(this,"y",0);X(this,"onprogress");X(this,"onfinish");X(this,"onerror");this.worker=new Ui,this.worker.onmessage=t=>{const n=t.data;switch(n.msg){case 0:this.onprogress&&this.onprogress(W(L({},n.params),{partial:n.params.partial?{data:n.params.partial,x:this.x,y:this.y}:void 0}));break;case 1:this.onfinish&&this.onfinish({data:n.params.result,x:this.x,y:this.y}),this.busy=!1;break;case 2:this.onerror&&this.onerror(n.params.error),this.busy=!1;break}}}get ready(){return!this.busy}start(t,n){var i;return this.busy?!1:(this.busy=!0,this.worker.postMessage({dataIn:t.data,options:{palette:n.palette,process:{process:{name:(i=n.process.process)==null?void 0:i.name},settingValues:n.process.settingValues}}}),!0)}terminate(){this.worker.terminate()}}const rt=navigator.hardwareConcurrency,le=Math.max(~~(rt/2),1),ie=[],lt=(e,t,n)=>new Promise((i,s)=>{var b;const r=t.image.element;if(!r)throw new Error("Image is null");const o=e.getContext("2d");if(!o)throw new Error("Unable to get output context");const d=document.createElement("canvas");d.width=e.width,d.height=e.height;const m=d.getContext("2d");if(!m)throw new Error("Unable to get temp context");m.drawImage(r,0,0,e.width,e.height);const u=(b=t.process.process)==null?void 0:b.name,A=Qi.find(w=>w.name===u);if(!A)throw new Error(`Could not find async process ${u}`);const p=t.process.settingValues,l=t.palette.palette;if(!l)throw new Error("Palette is null");let h;if(!A.supports.threads)h=1;else if(p.threads)h=p.threads||1;else{const w=A.complexity(fe(l)),T=e.width*e.height,Z=~~(T/5e4*w/2048)+1;h=Z>le?le:Z,console.log(`Want ${Z} threads for ${T}px @CR${w}, got ${h} (max ${le})`)}let c=0;const v=~~(e.width/h/8)*8,y=e.width-v*h,g=new Date().getTime();for(let w=0;w<h;w++){const T=~~(y/8),Z=w*v+8*(T<w?T:w),D=v+(w===h-1?y%8:T>w?8:0),I=m.getImageData(Z,0,D,e.height);I||s("Unable to get image data from context");const N={data:I,x:Z,y:0},M=new Pi;M.onprogress=z=>{const C=z.current/(D*4);z.partial&&o.putImageData(z.partial.data,Z,0),o.fillStyle="#ff00ff",o.fillRect(Z,C,D,2)},M.onfinish=z=>{o.putImageData(z.data,Z,0),c--,ie.splice(ie.indexOf(M),1);const C=new Date().getTime();console.log(`Worker thread ${w+1} done in ${C-g}ms`),c===0&&(console.log(`${h} worker threads done in ${C-g}ms`),i())},M.onerror=z=>s(`Error in worker thread: ${z}`),console.log(`Starting worker thread ${w+1}/${h} w=${D}`),M.start(N,t),c++,ie.push(M)}n&&(n.stop=()=>ie.forEach(w=>w.terminate()))}),Vi={device:V.CPU,name:"Error Diffusion",settings:{matrix:{name:"Model",type:B.Combo,options:[{name:"Floyd-Steinberg",value:0},{name:"JJ&N",value:1},{name:"Stucki",value:2},{name:"Sierra",value:3}]},error_mult:{name:"Diffuse",type:B.Range,min:.5,max:1,step:.1,default:1,showValue:e=>e.toFixed(1)},gamma:{name:"Gamma",type:B.Range,min:1,max:4,step:.2,default:2.2,showValue:e=>e.toFixed(1)}},run:lt},Fi=[-1,1,-1,-1,1,1,-1,-1,1,-1,1,1],Ji=[0,0,0,1,1,0,0,1,1,1,1,0],Oe=(e,t)=>e!==void 0?e:t,ct=e=>[0,.01,.02,.05,.1,.2,.35,.5,.8,1][e];let pe=null,Qe=null,Ue=null,ae=null;const Xi=async(e,t)=>{if(!t.image.element)throw new Error("runPatternDither: Image is null");if(!t.palette.palette)throw new Error("runPatternDither: No palette selected");const n=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!n)throw new Error("runPatternDither: WebGL is unavailable");const i=t.process.settingValues,s=_(t.palette.palette).flat().map(w=>w/255);it(n);const r=~~(s.length/3);(r!==Ue||i.clist_size!==(ae==null?void 0:ae.clist_size)||n!==Qe)&&(pe=null),Ue=r,ae=i,Qe=n;let o=pe;if(!o){console.log("Compiling shaders...");const w=ce.patternFrag.replace(/\$/g,r.toString()).replace(/%/g,(i.clist_size||64).toString()),T=Ae(n,n.VERTEX_SHADER,ce.imageVert),Z=Ae(n,n.FRAGMENT_SHADER,w);o=at(n,T,Z),pe=o}const d=n.getAttribLocation(o,"a_position"),m=n.getAttribLocation(o,"a_texCoord"),u=n.getUniformLocation(o,"u_palette"),A=n.getUniformLocation(o,"u_texSize"),p=n.getUniformLocation(o,"u_image"),l=n.getUniformLocation(o,"u_threshold"),h=n.getUniformLocation(o,"u_thres_size"),c=n.getUniformLocation(o,"u_err_mult"),v=n.getUniformLocation(o,"u_gamma"),y=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,y),n.bufferData(n.ARRAY_BUFFER,new Float32Array(Fi),n.STATIC_DRAW);const g=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,g),n.bufferData(n.ARRAY_BUFFER,new Float32Array(Ji),n.STATIC_DRAW);const b=Ne[i.threshold||0];st(n,t.image.element),ot(n,b.size,b.size,b.data,{format:n.LUMINANCE,internalFormat:n.LUMINANCE,type:n.UNSIGNED_BYTE},n.TEXTURE1),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.useProgram(o),n.uniform3fv(u,s),n.uniform2f(A,n.canvas.width,n.canvas.height),n.uniform1i(p,0),n.uniform1i(l,1),n.uniform1f(h,b.size),n.uniform1f(c,ct(Oe(i.amount,we.settings.amount.default)||0)),n.uniform1f(v,Oe(i.gamma,we.settings.gamma.default)||0),de(n,d,y,{size:2,type:n.FLOAT}),de(n,m,g,{size:2,type:n.FLOAT}),n.drawArrays(n.TRIANGLES,0,6)},we={device:V.GL,name:"Pattern Dithering",settings:{threshold:{name:"Matrix",type:B.Combo,options:[{name:"8x8 Bayer Matrix",value:0},{name:"4x4 Bayer Matrix",value:1},{name:"64x64 Blue Noise",value:2},{name:"16x16 Blue Noise",value:3},{name:"8x8 Halftone",value:4},{name:"6x6 Halftone",value:5},{name:"4x4 Halftone",value:6}]},clist_size:{name:"Mix",type:B.Combo,options:[{name:"64 level",value:64},{name:"16 level",value:16},{name:"4 level",value:4}]},amount:{name:"Dither",type:B.Range,max:9,step:1,default:5,showValue:e=>ct(e).toFixed(2)},gamma:{name:"Gamma",type:B.Range,min:1,max:8,step:.2,default:2.2,showValue:e=>e.toFixed(1)}},run:Xi},Hi=e=>[0,.01,.02,.05,.1,.2,.35,.5,.8,1][e],Ki={device:V.CPU,name:"Pattern Dithering",settings:{threads:{name:"Threads",type:B.Range,min:0,max:rt,step:1,default:0,showValue:e=>e===0?"AUTO":e.toFixed(0).padStart(4,"\xA0"),valueColor:e=>e===0?"var(--ct-ok)":e>le?"var(--ct-warn)":"inherit"},threshold:{name:"Matrix",type:B.Combo,options:[{name:"8x8 Bayer Matrix",value:0},{name:"4x4 Bayer Matrix",value:1},{name:"64x64 Blue Noise",value:2},{name:"16x16 Blue Noise",value:3},{name:"8x8 Halftone",value:4},{name:"6x6 Halftone",value:5},{name:"4x4 Halftone",value:6}]},clist_size:{name:"Mix",type:B.Combo,options:[{name:"64 level",value:64},{name:"16 level",value:16},{name:"4 level",value:4}]},amount:{name:"Dither",type:B.Range,max:9,step:1,default:5,showValue:e=>Hi(e).toFixed(2)},gamma:{name:"Gamma",type:B.Range,min:1,max:8,step:.2,default:2.2,showValue:e=>e.toFixed(1)}},run:lt},At=[we,ve,Vi,Ki],_i=Object.values(V).filter(e=>At.filter(t=>t.device===e).length>0).map(e=>({name:e,value:e}));function qi(e){const{device:t,process:n,settingValues:i}=e.slice,s=(A,p)=>{e.dispatch(x.setProcSetting({setting:A,value:p}))},r=A=>{const p=A.key;p!=="Backspace"&&!p.match(/[0-9]/)&&!p.startsWith("Arrow")&&A.preventDefault()},o=(A,p)=>A!==void 0?A:p,d=At.filter(A=>A.device===t).map(A=>({name:A.name,value:A})),m=(n==null?void 0:n.settings)||{},u=Object.keys(m);return f("div",{className:"dlab-process-root",children:[a("span",{className:"dlab-process-label",children:"Device"}),a(F,{options:_i,value:t,onChange:A=>e.dispatch(x.setDevice(A.selected.value))}),a("span",{className:"dlab-process-label",children:"Process\xA0"}),a(F,{options:d,value:n,onChange:A=>{e.dispatch(x.setProcess(A.selected.value)),e.dispatch(x.setProcSettings({}))}}),u.length>0&&a("hr",{className:"divider bevel horizontal"}),u.map(A=>{let p;const l=m[A],h=o(i[A],l.default);switch(l.type){case B.Input:p=a("input",{type:"number",className:"bevel",value:h,onKeyDown:c=>r(c.nativeEvent),onInput:c=>s(A,parseFloat(c.target.value))},A);break;case B.Combo:p=a(F,{value:i[A],options:l.options||[],onChange:c=>s(A,c.selected.value)},A);break;case B.Range:p=f("div",{className:"dlab-process-control",children:[a("input",{type:"range",min:l.min||0,max:l.max||1,step:l.step,value:h,onInput:c=>s(A,parseFloat(c.target.value))}),l.showValue&&a("span",{style:l.valueColor?{color:l.valueColor(h||0)}:{},children:l.showValue(h||0)})]},A);break}return[a("span",{className:"dlab-process-label",children:m[A].name},A+"_label"),p]})]})}const $i=e=>{const t=Object.keys(e);return(n,i)=>t.includes(i.type)?ft(n,s=>{e[i.type](s,i)}):n},ea=e=>typeof e=="function",dt=e=>{const t={};return Object.keys(e).forEach(n=>{const i=e[n];if(ea(i))t[n]=i;else{const s=dt(i);Object.keys(s).forEach(r=>t[`${n}/${r}`]=s[r])}}),t},ta=e=>{const t=dt(e),n=Object.keys(t);return{reducer:$i(t),actions:n}},Pe=ta({renderTarget:(e,t)=>e.renderTarget=t.payload,renderControl:(e,t)=>e.renderControl=t.payload,options:{image:{info:(e,t)=>e.options.image.info=t.payload,element:(e,t)=>e.options.image.element=t.payload},resize:{mode:(e,t)=>e.options.resize.mode=t.payload,size:(e,t)=>{e.options.resize.x=t.payload.w,e.options.resize.y=t.payload.h}},palette:{group:(e,t)=>e.options.palette.group=t.payload,palette:(e,t)=>e.options.palette.palette=t.payload,custom:(e,t)=>e.options.palette.customPalettes=t.payload},process:{device:(e,t)=>e.options.process.device=t.payload,process:(e,t)=>e.options.process.process=t.payload,settings:(e,t)=>e.options.process.settingValues=t.payload,setting:(e,t)=>{e.options.process.settingValues[t.payload.setting]=t.payload.value}},liveRender:(e,t)=>e.options.liveRender=t.payload},status:{status:(e,t)=>e.status=t.payload,renderStatus:(e,t)=>e.status.renderStatus=t.payload,time:(e,t)=>e.status.lastRenderTime=t.payload,size:(e,t)=>{e.status.renderWidth=t.payload.w,e.status.renderHeight=t.payload.h}},view:{zoom:{in:e=>{e.view.scale<16&&(e.view.scale=e.view.scale<4?e.view.scale+1:e.view.scale*2)},out:e=>{e.view.scale>1&&(e.view.scale=e.view.scale>4?e.view.scale/2:e.view.scale-1)},reset:e=>e.view.scale=1},showPaletteEditor:e=>e.view.showEditor=!0,hidePaletteEditor:e=>e.view.showEditor=!1,togglePaletteEditor:e=>e.view.showEditor=!e.view.showEditor}});var na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAbElEQVQ4jcVT0QrAIAg8Rx/mp/Vp/ZnDNkGYjO166CAq8C5ND6uQm2+kjrQ49X6tMcYrQ1VnjO+Og3k2yLSAZ7okkLFfoOWL15Y/qEKu/yGAIuBXBl8FqC748FRDtr8L00xmBhFhDBVmJAHgBEPWGSOGADVyAAAAAElFTkSuQmCC",ia="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAD1BMVEUAAACAAAD/AAAAAAD///9mOKI0AAAABXRSTlMA/////xzQJlIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAXsaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMjZUMTQ6MjM6MzktMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTI2VDE1OjMzOjMxLTAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTI2VDE1OjMzOjMxLTAzOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMiIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkxOTUwMGFiLTIyNzAtZDM0NS1hYmI5LWY2MDVlZWJkYTEwYyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphMTk2ODViYy1hM2U2LTM4NDItYTczNi01ZGI5N2FhMWUxYjEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphMTk2ODViYy1hM2U2LTM4NDItYTczNi01ZGI5N2FhMWUxYjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExOTY4NWJjLWEzZTYtMzg0Mi1hNzM2LTVkYjk3YWExZTFiMSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yNlQxNDoyMzozOS0wMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MTk1MDBhYi0yMjcwLWQzNDUtYWJiOS1mNjA1ZWViZGExMGMiIHN0RXZ0OndoZW49IjIwMjEtMDItMjZUMTU6MzM6MzEtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vTpXkAAAAKUlEQVQYlWNgoAdgZGBgYGCGcv4yMDCwIIQZ/jMwMDAwoWthQcjREwAAocYDC8mP/cYAAAAASUVORK5CYII=";var be=(e=>(e.RGB="RGB",e.HSL="HSL",e))(be||{});function aa(e){const[t,n]=G.exports.useState("RGB"),[i,s]=G.exports.useState(null),[r,o]=G.exports.useState(null);G.exports.useEffect(()=>{s(null),r&&(m(r).every((b,w)=>b===e.value[w])||o(null))},[e.value,t]);const d=g=>{switch(t){case"HSL":return Si(g);default:return g}},m=g=>{switch(t){case"HSL":return zi(g);default:return g}},{value:u,set:A}={value:i||r||d(e.value),set:e.onChange},p=(g,b)=>{if(!u)return;const w=u.slice();w[g]=parseInt(b.target.value),s(w)},l=()=>{i!==null&&(A(m(i)),o(i),s(null))},h=()=>{const[,g,b]=u;return`linear-gradient(to right, ${[0,60,120,180,240,300,360].map(T=>`hsl(${T}, ${g}%, ${b}%) ${T/3.6}%`).join(", ")})`},c=()=>{const[g,b]=u;return`linear-gradient(to right, ${[0,50,100].map(T=>`hsl(${g}, ${b}%, ${T}%) ${T}%`).join(", ")})`},v=()=>[0,1,2].map(g=>{let b=255;t==="HSL"&&(b=g===0?359:100);const w=u.slice(),T=u.slice();w[g]=0,T[g]=b;let Z=`linear-gradient(to right, ${ee(m(w))}, ${ee(m(T))})`;t==="HSL"&&(g===0?Z=h():g===2&&(Z=c()));const D={"--gradient":Z};return[a("input",{type:"range",min:0,max:b,step:1,value:u[g],style:D,onChange:I=>p(g,I.nativeEvent)},`${g}_input`),a("span",{children:u[g].toFixed(0).padStart(3,"\xA0")},`${g}_value`)]}),y=Zi(m(u))>.5?"black":"white";return f("div",{className:"picker-root",onMouseUp:l,onKeyUp:l,onTouchEnd:l,children:[a("div",{className:"picker-mode-select wide",children:Object.keys(be).map(g=>{const b=be[g];return a("button",{className:"bevel",onClick:()=>n(b),children:b},g)})}),a("div",{className:"picker-preview bevel content wide",style:{background:ee(m(u)),color:y},children:ee(m(u))}),v()]})}function oa(e){const{palette:t,customPalettes:n}=e.slice,[i,s]=G.exports.useState();if(!t)return a("span",{children:"[No palette selected]"});const r=l=>{const h=n.filter(c=>c!==t).concat(l);e.dispatch(x.setCustomPalettes(h)),e.dispatch(x.setPalette(l))},o=l=>{r(W(L({},t),{name:l.target.value}))},d=l=>{if(i===void 0)return;const h=t.data.slice(),c=i*3;for(let v=0;v<3;v++)h[c+v]=l[v];r(W(L({},t),{data:h}))},m=()=>{const l=t.data.concat([0,0,0]);r(W(L({},t),{data:l})),s(l.length/3-1)},u=l=>{const h=t.data.slice(0,l*3).concat(t.data.slice(l*3+3));i!==void 0&&i>=h.length/3&&s(h.length/3-1),r(W(L({},t),{data:h}))},A=[];switch(t.type){case E.Indexed:{let l=0;A.push(a("span",{className:"dlab-editor-title wide",children:"Colors"},l));for(const h of _(t)){const c=ee(h),v=l;A.push(f("div",{className:U("dlab-editor-color wide",l===i?"selected":""),children:[a("div",{className:"bevel content",style:{background:c},onClick:()=>s(v)}),a("input",{readOnly:!0,className:"dlab-editor-color-input bevel",value:c,onClick:()=>s(v)}),t.data.length>3&&a("button",{className:"icon-button bevel light hover",onClick:()=>u(v),children:a("img",{src:ia,alt:"remove"})})]},l+1)),l++}A.push(a("button",{className:"bevel",onClick:m,children:"Add Color"},l+1));break}default:A.push(a("span",{children:"Unsupported palette type. Sorry :("},0));break}const p=tt(t,i||0);return f("div",{className:"dlab-editor-root",children:[a("input",{type:"text",className:"bevel wide",value:t.name,onInput:l=>o(l.nativeEvent)}),A,a("hr",{className:"divider horizontal bevel"}),i!==void 0?a("div",{className:"dlab-editor-picker wide",children:a(aa,{value:p,onChange:d})}):a("div",{className:"wide",children:"Click on a color to edit."})]})}function sa(e){const{palette:t,customPalettes:n}=e.slice,i=()=>{const m=t;if(!m)return;const u={name:m.name+" Copy",group:S.User,type:m.type,data:m.data.slice()};e.dispatch(x.setCustomPalettes(n.concat(u))),e.dispatch(x.setPaletteGroup(S.User)),e.dispatch(x.setPalette(u))},s=m=>`#${m.map(u=>u.toString(16).padStart(2,"0")).join("")}`,r=t==null?void 0:t.data,o=m=>{if(!!r)switch(m){case"length":return(r.length||0)/3;case"bpc":return`${r[0]*r[1]*r[2]} (${r[0]} x ${r[1]} x ${r[2]})`;case"mono-lv":return r[0];case"mono-min":return r[1];case"mono-base":return s(r.slice(2,5))}};let d=[];switch(t==null?void 0:t.type){case E.Indexed:d=[a("span",{className:"dlab-editor-info-label",children:"Colors"},0),a("input",{readOnly:!0,className:"bevel",value:o("length")},1)];break;case E.RGB:d=[a("span",{className:"dlab-editor-info-label",children:"Levels"},0),a("input",{readOnly:!0,className:"bevel",value:o("bpc")},1)];break;case E.Mono:d=[a("span",{className:"dlab-editor-info-label",children:"Levels"},0),a("input",{readOnly:!0,className:"bevel",value:o("mono-lv")},1),a("span",{className:"dlab-editor-info-label",children:"Min lv."},2),a("input",{readOnly:!0,className:"bevel",value:o("mono-min")},3),a("span",{className:"dlab-editor-info-label",children:"Base"},4),f("div",{className:"dlab-editor-info-color",children:[a("div",{className:"bevel content",style:{background:`${o("mono-base")}`}}),a("input",{readOnly:!0,className:"bevel",value:o("mono-base")})]},5)];break;case E.Mixer:d=[a("span",{children:"TODO"},0)];break}return f("div",{className:"dlab-editor-root",children:[a("div",{className:"dlab-editor-title wide",children:t==null?void 0:t.name}),a("span",{className:"dlab-editor-info-label",children:"Group"}),a("input",{readOnly:!0,className:"dlab-editor-info-value bevel",value:t==null?void 0:t.group}),a("span",{className:"dlab-editor-info-label",children:"Type"}),a("input",{readOnly:!0,className:"dlab-editor-info-value bevel",value:t==null?void 0:t.type}),d,a("hr",{className:"divider horizontal bevel"}),a("div",{className:"wide",children:"Editing is disabled for preset palettes. To edit this palette, create a copy first."}),a("button",{className:"bevel wide",onClick:i,children:"Copy as custom palette"})]})}function ra(e){const{palette:t,customPalettes:n}=e.slice;return f("div",{className:"dlab-editor-container",children:[f("div",{className:"dlab-editor-bar",children:[a("button",{className:"bevel",onClick:()=>{const o={name:"My Custom Palette",group:S.User,type:E.Indexed,data:[0,0,0,255,255,255]};e.dispatch(x.setCustomPalettes(n.concat(o))),e.dispatch(x.setPaletteGroup(S.User)),e.dispatch(x.setPalette(o))},children:"New"}),a("button",{className:"bevel",onClick:()=>{const o=t;if(!o)return;const d={name:o.name+" Copy",group:S.User,type:o.type,data:o.data.slice()};e.dispatch(x.setCustomPalettes(n.concat(d))),e.dispatch(x.setPaletteGroup(S.User)),e.dispatch(x.setPalette(d))},children:"Duplicate"}),a("button",{className:"bevel",onClick:()=>{const o=t,d=n.filter(u=>u!==o),m=d.length>0?d[0]:nt;e.dispatch(x.setCustomPalettes(d)),e.dispatch(x.setPaletteGroup(m.group)),e.dispatch(x.setPalette(m))},disabled:(t==null?void 0:t.group)!==S.User,children:"Delete"})]}),a("hr",{className:"divider horizontal bevel"}),(t==null?void 0:t.group)===S.User?a(oa,L({},e)):a(sa,L({},e))]})}function la(e){return f("div",{className:"clos-root bevel",children:[f("div",{className:"clos-titlebar",children:[a("span",{className:"clos-title",children:e.title}),a("div",{className:"clos-titlebar-spacer"}),a("button",{className:"clos-close icon-button bevel light hover",onClick:e.onClosed,children:a("img",{src:Me,alt:"x"})})]}),a("div",{className:"clos-content",children:e.children})]})}const ca=e=>e.items!==void 0,Aa=e=>e.id!==void 0&&e.items===void 0;var da="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAQUlEQVQokc2PMQoAMAgDE///53QoCKWJW6EZ5U4jnofmgCT1nDyRco1IKjW1wiTZShMTL2A/cy2MgoOjkOAfA2ABaLAQC3V/ab4AAAAASUVORK5CYII=",ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFFmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAyLTExVDIyOjEwOjIxLTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0yMlQyMjoxMDo1Ni0wMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMi0yMlQyMjoxMDo1Ni0wMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphOTNhYzdkMy0yMjk4LTRmNGYtYjlhYS02M2U4ZmEyMzg1Y2QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6YTkzYWM3ZDMtMjI5OC00ZjRmLWI5YWEtNjNlOGZhMjM4NWNkIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YTkzYWM3ZDMtMjI5OC00ZjRmLWI5YWEtNjNlOGZhMjM4NWNkIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphOTNhYzdkMy0yMjk4LTRmNGYtYjlhYS02M2U4ZmEyMzg1Y2QiIHN0RXZ0OndoZW49IjIwMjItMDItMTFUMjI6MTA6MjEtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4zIChXaW5kb3dzKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7o8+jUAAAAPUlEQVQYlY3QQQoAMAgDwcT//3l7ahErtt5iBgQN6DUxlbYZ0QYH5UWXoxYZAL7OdeCgvOhy1KICSfLPnxanxR8NJ4S20AAAAABJRU5ErkJggg==";function mt(e){const t=n=>!n.checkIf||!e.data?!1:e.data[n.checkIf.prop]===n.checkIf.value;return a("div",{className:"menu-root bevel",children:e.items.map((n,i)=>ca(n)?f("div",{className:"menu-item menu-submenu",children:[a("span",{className:"menu-item-label",children:n.name}),a("img",{src:da,alt:">",className:"menu-item-expand"}),a(mt,{items:n.items,root:n.id,data:e.data,onSelect:s=>e.onSelect(`${n.id}/${s}`)})]},n.id):Aa(n)?f("div",{className:"menu-item",onClick:()=>e.onSelect(n.id),children:[t(n)&&a("img",{src:ma,alt:"check",className:"menu-item-check"}),a("span",{className:"menu-item-label",children:n.name})]},n.id):a("hr",{className:"divider horizontal bevel"},`div_${i}`))})}function Re(e){let t=null;const[n,i]=G.exports.useState(null);G.exports.useEffect(()=>{if(!t)return;const d=m=>{t&&!t.contains(m.target)&&(i(null),window.removeEventListener("mousedown",d))};window.addEventListener("mousedown",d)},[n]);const s=d=>{e.onSelect(d)},r=d=>{i(n===d?null:d)},o=d=>{n&&i(d)};return a("div",{className:"mbar-root",ref:d=>t=d,children:e.menus.map(d=>f("div",{className:U("mbar-item",n===d.id?"mbar-active":""),onClick:()=>r(d.id),onMouseEnter:()=>o(d.id),children:[a("span",{className:"mbar-item-label",children:d.name}),n===d.id&&a(mt,{items:d.items,root:d.id,data:e.data,onSelect:m=>s(`${d.id}/${m}`)})]},d.id))})}const ha=[{id:"file",name:"File",items:[{id:"open",name:"Open Image..."},{id:"save",name:"Save Render"},"---",{id:"exit",name:"Exit"}]},{id:"view",name:"View",items:[{id:"zoom",name:"Zoom",items:[{id:"in",name:"Zoom In"},{id:"out",name:"Zoom Out"},{id:"reset",name:"Actual Size"}]},"---",{id:"togglePaletteEditor",name:"Palette Editor",checkIf:{prop:"view/editor",value:"true"}}]},{id:"help",name:"Help",items:[{id:"help",name:"Open Help Pages"}]}];function ua(e){let t=null,n=null;const[i,s]=G.exports.useReducer(Pe.reducer,Nn),r=K();G.exports.useEffect(()=>{const c=localStorage.getItem("__dlab_custom_palettes");if(c){const v=JSON.parse(c);v.length>0&&v[0].data&&s(x.setCustomPalettes(v))}},[]),G.exports.useEffect(()=>{const c=i.options.palette.customPalettes;localStorage.setItem("__dlab_custom_palettes",JSON.stringify(c))},[i.options.palette.customPalettes]),G.exports.useEffect(()=>{const c=t,v=c==null?void 0:c.querySelector("canvas");if(!c||!v)return;v.style.width=`${i.view.scale*v.width/16}rem`,c.scrollWidth>c.clientWidth||c.scrollHeight>c.clientHeight?c.classList.add("__scroll"):c.classList.remove("__scroll")},[i.view.scale]),G.exports.useEffect(()=>{s(x.setRenderTarget(null))},[i.options.process.device]),G.exports.useEffect(()=>{if(!i.renderTarget){const c=He.createElement("canvas");s(x.setRenderTarget(c))}},[i.options]),G.exports.useEffect(()=>{const c=i.options;if(c.image.element){const v=t==null?void 0:t.querySelector("canvas");if(!v)return;const[y,g]=[c.image.info.width,c.image.info.height];let[b,w]=[0,0];switch(c.resize.mode){case J.KeepOriginalSize:b=y,w=g;break;case J.ForceResize:b=c.resize.x,w=c.resize.y;break;case J.FitToSize:{const T=Math.min((c.resize.x||0)/y,1),Z=Math.min((c.resize.y||0)/g,1),D=Math.min(T,Z);b=~~(y*D),w=~~(g*D);break}}(b!==v.width||w!==v.height)&&(v.width=b,v.height=w),v.style.width=`${i.view.scale*v.width/16}rem`,c.process.device===V.GL&&c.liveRender?o():s(x.setStatus(W(L({},i.status),{renderStatus:H.Ready,renderWidth:v.width,renderHeight:v.height})))}},[i.options,i.renderTarget]);const o=()=>{const c=t==null?void 0:t.querySelector("canvas"),v=i.options.process.process;if(!c||!v)return;const y=Date.now(),g={};v.run(c,i.options,g).then(()=>s(x.setStatus({renderStatus:H.Done,lastRenderTime:Date.now()-y,renderWidth:c.width,renderHeight:c.height}))),s(x.setRenderStatus(H.Rendering)),s(x.setRenderControl(g))},d=()=>{i.renderControl.stop&&i.renderControl.stop(),s(x.setRenderStatus(H.Stopped))},m=c=>{const v=c;!(v.buttons&1)||t==null||t.scrollBy(-v.movementX,-v.movementY)},u=()=>{const c=t==null?void 0:t.querySelector("canvas");if(!c)return;const v=c.toDataURL("image/png").replace("image/png","image/octet-stream"),y=document.createElement("a");y.setAttribute("download","result.png"),y.setAttribute("href",v),y.click()},A=c=>{switch(console.log(c),c){case"file/open":(n==null?void 0:n.querySelector("input[type=file]")).click();break;case"file/save":u();break;case"file/exit":r(me(e.windowId));break;case"help/help":r(ye(qe("help/programs/dlab")));break;default:Pe.actions.includes(c)?s({type:c,payload:null}):console.log("no action found");break}},p={"view/editor":`${i.view.showEditor}`},l=i.status.renderStatus===H.Rendering,h=i.options.liveRender&&i.options.process.device===V.GL;return f("div",{className:"dlab-root",children:[a("div",{className:"dlab-menu-bar",children:a(Re,{menus:ha,data:p,onSelect:c=>A(c)})}),f("div",{className:"dlab-content bevel content",children:[f("div",{className:"dlab-control-bar bevel",children:[a("div",{className:"dlab-control dlab-control-save",children:a("button",{className:"bevel light hover icon-button",onClick:u,children:a("img",{src:na,alt:"Save"})})}),f("div",{className:"dlab-control dlab-control-view",children:[a("span",{children:"Zoom"}),f("div",{className:"bevel content",children:[a("button",{className:"bevel",onClick:()=>s(x.zoomOut()),disabled:i.view.scale<=1,children:"-"}),a("input",{type:"text",readOnly:!0,value:`${i.view.scale*100}%`}),a("button",{className:"bevel",onClick:()=>s(x.zoomIn()),disabled:i.view.scale>=16,children:"+"})]})]}),a("hr",{className:"divider bevel vertical"}),f("div",{className:"dlab-control dlab-control-render",children:[a("input",{type:"checkbox",id:"dlab-live-render",name:"dlab-live-render",checked:i.options.liveRender,disabled:i.options.process.device===V.CPU,onChange:c=>s(x.setLiveRender(c.nativeEvent.target.checked))}),a("label",{htmlFor:"dlab-live-render",children:"Live Render"}),a("button",{className:U("bevel",!l&&!h?"dlab-render-ready":""),disabled:!i.options.image.element,onClick:()=>l?d():o(),children:l?"\xA0Stop\xA0":"Render"})]})]}),a("div",{className:"dlab-image-area",ref:c=>t=c,onMouseMove:c=>m(c.nativeEvent),children:i.options.image.element?i.renderTarget:a("span",{children:"[No image loaded]"})}),f("div",{className:"dlab-tool-pane",ref:c=>n=c,children:[a(ne,{title:"Source Image",children:a(fn,{slice:i.options.image,dispatch:s})}),a(ne,{title:"Resize",children:a(En,{slice:i.options.resize,dispatch:s})}),a(ne,{title:"Color Palette",children:a(ni,{slice:i.options.palette,dispatch:s})}),a(ne,{title:"Process",children:a(qi,{slice:i.options.process,dispatch:s})})]}),i.view.showEditor&&a("div",{className:"dlab-tool-pane dlab-editor-pane",children:a(la,{title:"Palette Editor",onClosed:()=>s(x.hidePaletteEditor()),children:a(ra,{slice:i.options.palette,dispatch:s})})})]}),f("div",{className:"dlab-status-bar",children:[f("div",{className:"dlab-status bevel inset light",children:[i.status.renderStatus,i.status.renderStatus===H.Done&&` (${i.status.lastRenderTime}ms)`]}),a("div",{className:"dlab-status bevel inset light",children:i.status.renderWidth?`${i.status.renderWidth}x${i.status.renderHeight}`:""})]})]})}const ga=[{id:"game",name:"Game",items:[{id:"new",name:"New"},"---",{id:"beginner",name:"Beginner",checkIf:{prop:"game/difficulty",value:"beginner"}},{id:"intermediate",name:"Intermediate",checkIf:{prop:"game/difficulty",value:"intermediate"}},{id:"expert",name:"Expert",checkIf:{prop:"game/difficulty",value:"expert"}},"---",{id:"exit",name:"Exit"}]}];var pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAeUlEQVQ4jeVU7QrAIAg8pQfvzRsbOS5Jq59jgkh5R36lAGg4lGLwHaZ0q0aQHA8OSfmliOhzKOyMiD50nWCW8iVSVr0pyRw1sJ54V/TRurCkaG2DyDjphzQnUIPFFyIa2j9MxPA1or/v74eJyKrH7XixJzvifBsBuAAaLjUOZYOcWwAAAABJRU5ErkJggg==",va="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAV0lEQVQ4jWNkYGD4z0AiYEJW3kCARgb/GyC2/Udmo9Mg/B/BRlWETwOKJmyKGLBowGsTUZqGuE14Q4/keMKnAYsrqJQiSPLTaIqgJD/RNEWQXhoxMDAAAGPySOT0KhFfAAAAAElFTkSuQmCC",wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAeUlEQVQ4jdWUUQoAIQhEp9iDe3OXoNopJts+CywRX5aKCYDjcD3N/Q+Z6pnLZmSIAL646G71dCFsb2wH7DMO4gqKgCV0eaQwe1HKQfpQs6gruPiZnVdd0ezGHTE/Q8n0Z/1+FpHdPXRzpKi4MtIKUGDviJMZcT6NALzu3yIMwUfZPgAAAABJRU5ErkJggg==",ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAb0lEQVQ4je2U4QrAIAiEr7EH980dQTUNOyb9ChaYYn1FdVkAKJLt7tO/kKX5q3ZiEgywC9dYpXkNzOY7OwB5k840ghiwhA7fid4eu3KY2L0ZU4V9/KGIeSAClopIn+lXxM5/ioAZdIrI1Ih8NQLwAPmBIgxn4V2mAAAAAElFTkSuQmCC",Ia="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAeklEQVQ4jdVU0QoAIQibcR/un3tQEebtEh8TJMqtSa0EgKEYzcM1GX2YDbWe+jMG3JiciBEjc2GFsFZCvRFMGjeR2CGw9ScWmD1kprn5wp385NV6e0oKjOA3/dw+S4s2YrYBsdBGypQo6TKl7D1tSqWXmxFi2/XfCMALiVfBbl/wlqAAAAAASUVORK5CYII=",ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAfElEQVQ4jdWU2woAIQhEp2U/3D93IRTMxtoeC6Sbp7ESGwDFYXvd/Q/ZrH8caGv/vi9hrmoWx5rWxXoPanLIJjO4h25WqlRKJV+onjyCQxqtsiJ+fs8IIRsMiIeymCdLodLXGYzcb69EoYuUqs8tlRiQwSEjTmrEeTUC8AHu3yIMh8KHYAAAAABJRU5ErkJggg==",Ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAf0lEQVQ4jdVU0QrAIAg8Yx/enzs2UszSzbdNEEvvUMwkAIyiHAJ/w6RhmxAox9/xbu7MQ+2Znb8PK0UtAK99JT6T/pwpyhJmEkfUckucxiibCvv4OhE+sCMIbpo9Soi2ihYFMn8LcKl8nKTduyT6+96vmbJl4X+2Yis7or6NAJyFLp2WN/IAUQAAAABJRU5ErkJggg==",fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAYklEQVQ4jWNkYGD4z0AiYIEpJ0YnI5RmAhENSAL4NCAbDGL/b4DS/7FgZHGYXriGBoQgCv6PTRM+DTg1DXGb8IYeNlsb0DSi2IRPAxZXUGAT2X4aTREEgn3gUgTppREDAwMA7BA9coMgBggAAAAASUVORK5CYII=",Na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAd0lEQVQ4jd1UOQ7AMAgziP9/uV1KBCi4YWxZIoEtHC4BcGFo5vATpjyvOkE4HlGSxkwdsf7BYrAjVum6wbzal0isetGsBnZNllL21AI2FTHbmogTeY5LsyeEGFVoF2D+P05EWo1u96t/ZWLHou7Zwk5uxPwaAbgBYJAZMaYAudAAAAAASUVORK5CYII=",Ra="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAfklEQVQ4jdWUWwpAIQhEx2jh7dxLUTFXtMdnQhg4p7EHCQDFZeQhPyGl5zQAWevBLSV2ikC7h8zFCLStJ0ezjZeg1elxZFvwLlnMsf+uYPUq2K21Vw7b40XrXEvP0dA+BjuBCFQP2jm50ENOLGBh6OQBFqx5voibP+L+NwLwAcpBnZhAHsCNAAAAAElFTkSuQmCC",Ea="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAIAAABfxFLWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFFmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAyLTIwVDIwOjUyOjQyLTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0yMFQyMDo1Mzo1OC0wMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMi0yMFQyMDo1Mzo1OC0wMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMDhmN2ZjOC1jYjUwLTE1NGYtYjE3Yi1hZGZjY2YyZTVjOWEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTA4ZjdmYzgtY2I1MC0xNTRmLWIxN2ItYWRmY2NmMmU1YzlhIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTA4ZjdmYzgtY2I1MC0xNTRmLWIxN2ItYWRmY2NmMmU1YzlhIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMDhmN2ZjOC1jYjUwLTE1NGYtYjE3Yi1hZGZjY2YyZTVjOWEiIHN0RXZ0OndoZW49IjIwMjItMDItMjBUMjA6NTI6NDItMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4zIChXaW5kb3dzKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4fsLHiAAAAUElEQVQokdXOQQoAIAgEQPPj+vLqIAjpStRNiQgdTaLX0OKOokKHFkQjwr/AvCTUdt5Cx6vD6PRXCsuzdXCNfvfTAvWcF2pgXkCYQpQ3uccG7qAo+E+EPacAAAAASUVORK5CYII=";const Da=[pa,va,wa,ba,Ia,ya,Ma,fa,Na,Ra,Ea];function Ve(e){const t=[e.value<0?10:~~(e.value/100%10),~~(Math.abs(e.value)/10%10),~~(Math.abs(e.value)%10)];return a("div",{className:"mined-root bevel light inset",children:t.map((n,i)=>a("img",{src:Da[n],alt:n.toString()},i))})}var Ga="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGx2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTAyLTI1VDIxOjA3OjU5LTAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIyLTAyLTIwVDIwOjA5OjMzLTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0yMFQyMDowOTozMy0wMzowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozYzk2ZjRlNy1lNGJjLTkwNDktOWE3MC0xY2NjYmY5ZTJkZDYiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0YjkxZTQ4My04ZTdiLWM5NGYtYmFhZi1iYWFjNWUwYWY4NjciIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0ODY3N2QzOC1hMDZhLWU3NGMtYWZmOS1kNjdkZGEwMDAzMzkiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ4Njc3ZDM4LWEwNmEtZTc0Yy1hZmY5LWQ2N2RkYTAwMDMzOSIgc3RFdnQ6d2hlbj0iMjAyMC0wMi0yNVQyMTowNzo1OS0wMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NTBiOThjNi0yNGE2LWJiNDEtOTgxNi1mZGM4NGIyNjNiNmYiIHN0RXZ0OndoZW49IjIwMjAtMDItMjVUMjE6MDc6NTktMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2M5NmY0ZTctZTRiYy05MDQ5LTlhNzAtMWNjY2JmOWUyZGQ2IiBzdEV2dDp3aGVuPSIyMDIyLTAyLTIwVDIwOjA5OjMzLTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s8tntQAAAIBJREFUKJGtkssNwDAIQ00nSzdjs3az10M/oigfNSqSLw4GY8UAzdYyePdZsZvZ3htQE8fmresCiPCTwiUVSUgqkY/9WfwMyMhCQBbSdkm67twAmVk0uQLldULYdtscodwumpsrQTY3T938f9p5UOIfjD7J2uDVurnmooqY9uc6APVpH16/QiJNAAAAAElFTkSuQmCC",Za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGtmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTAyLTE2VDE3OjQzOjE0LTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0yMFQyMDo0NDoxMS0wMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMi0yMFQyMDo0NDoxMS0wMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1YjIwMjM2NC04ZmZmLTE0NGItOWRiYS04ODFiNDRhNzQ3NTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzVkZWVmNmYtMjEyNy05ODQ3LWE3NDUtOTExOWFmNTdkYjgyIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MzVkZWVmNmYtMjEyNy05ODQ3LWE3NDUtOTExOWFmNTdkYjgyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozNWRlZWY2Zi0yMTI3LTk4NDctYTc0NS05MTE5YWY1N2RiODIiIHN0RXZ0OndoZW49IjIwMjAtMDItMTZUMTc6NDM6MTQtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjM5OGMyZmQtMjFjZS1jNzRhLTgyMWItMzBhMGFkNjcxNzVjIiBzdEV2dDp3aGVuPSIyMDIyLTAyLTIwVDIwOjQzOjExLTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjViMjAyMzY0LThmZmYtMTQ0Yi05ZGJhLTg4MWI0NGE3NDc1NSIgc3RFdnQ6d2hlbj0iMjAyMi0wMi0yMFQyMDo0NDoxMS0wMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjMgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppm3R74AAAB3SURBVCiRnZLRCgMhDAQnpf9t7sunD/WKZyMetxDUuCNLMFSe6D2ds/BUPVDPSsGxElRz8PzqtYpybKKW4A4qwTsQXIeTKG1oRERrM1GAX7je/2k5nJ0eg3NU6BEjgnNVc7wDiOnLZQeqmRzdmxV4eXWVZgXe0geaH0Nz6ZKnagAAAABJRU5ErkJggg==",Ta="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGx2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTAyLTE2VDE3OjQzOjE0LTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0yMFQyMDo0NzowNi0wMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMi0yMFQyMDo0NzowNi0wMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiMmRkNWViYi1hMzUxLThmNDQtYjc4My0zNjVhMjliYzliMDAiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo5ODg4MjQzNS1jYWJhLWZhNGMtYWU5ZC0xZTkzMWYzNDI0OWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphZjc1YThjZi02MGI0LTdmNGQtODI0YS1kMzNiNjEwOGQ1MTgiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFmNzVhOGNmLTYwYjQtN2Y0ZC04MjRhLWQzM2I2MTA4ZDUxOCIgc3RFdnQ6d2hlbj0iMjAyMC0wMi0xNlQxNzo0MzoxNC0wMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MmQ3OWYxNi03NWE4LTUwNDMtOGFjMy03YTkzYzljZTdhNDgiIHN0RXZ0OndoZW49IjIwMjAtMDItMjVUMjE6MTQ6MDgtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjJkZDVlYmItYTM1MS04ZjQ0LWI3ODMtMzY1YTI5YmM5YjAwIiBzdEV2dDp3aGVuPSIyMDIyLTAyLTIwVDIwOjQ3OjA2LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ShZvHAAAAGZJREFUKJHNkkEKwCAMBJPSfye+fHqwQpBEi6cuBFx1YUdUQE50J3u+8V1AHBeBOIBPd4T3aAp5mO6z8JW3sAbWhldtNleOjN7fyQZXzlYwprWzqkehkvGLtPgAXqyXjD+tWgW3egDg6djNWDPL9QAAAABJRU5ErkJggg==",xa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGx2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTAyLTI1VDIxOjA3OjU5LTAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIyLTAyLTIwVDIxOjI4OjQxLTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0yMFQyMToyODo0MS0wMzowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2M2JiN2YyNi0yMDE2LWYwNGMtODgyNS0wZjc3NDM0MGVkMDkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0YjkxZTQ4My04ZTdiLWM5NGYtYmFhZi1iYWFjNWUwYWY4NjciIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0ODY3N2QzOC1hMDZhLWU3NGMtYWZmOS1kNjdkZGEwMDAzMzkiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ4Njc3ZDM4LWEwNmEtZTc0Yy1hZmY5LWQ2N2RkYTAwMDMzOSIgc3RFdnQ6d2hlbj0iMjAyMC0wMi0yNVQyMTowNzo1OS0wMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NTBiOThjNi0yNGE2LWJiNDEtOTgxNi1mZGM4NGIyNjNiNmYiIHN0RXZ0OndoZW49IjIwMjAtMDItMjVUMjE6MDc6NTktMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjNiYjdmMjYtMjAxNi1mMDRjLTg4MjUtMGY3NzQzNDBlZDA5IiBzdEV2dDp3aGVuPSIyMDIyLTAyLTIwVDIxOjI4OjQxLTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BsImEQAAAH9JREFUKJGtkVEKgEAIRMdO5tG2m3Wz6aNdMB0jIkGWVUf0aSTx1bbPyn/FZoRZv0fKR7HvsUgJAcwaBwCQjO4DIJev+PyPK+YrnsW1QSPsxKWBEpKEtXfOe5OWS/SpApxHiGXkOqqGWHbud5QNCqQOjspnYD7fQ1O853vaL+wEz+AFPpvvpk0AAAAASUVORK5CYII=",Sa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAqklEQVQ4jdWU0Q6AIAhFwfX/nyxNm4bKFe2hTbbWEjxewKBjjItQETE1M/PgEBEGsfl9oewLTOLEB+AmNG2yYFVpVHEGOOwCe7hVnga6A5yBB6XNIeF5vDWo9ItKpBZ2n0DnVw52Evlm/0K9Zsz81ZUusQ7MxQcb07qubf5WP4HbKAvsNWsYKLtXS6ssA2XQ0ZdhFajNTD+DZ1MqvHHWflhTldLyPD3MiOgGT4BaKx18ax4AAAAASUVORK5CYII=",za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAuUlEQVQ4jdWUwQ7EIAhEwez/f3Jn02ZxQRijaXooFxMdnoOo8ppQMwqg9KyqaQGAEu01flj1BsMxWSPwEnomVbDu9HC6Atx2gSO8Op4A9UBtceyaYb4CJ6fBRctnyubDxl7vhZY4AmbzxqPQ3fBQWv6deARKL7/F2H0hDyLkdCGQ7ijrctk8QO2Z0vJn18a6v+RUNl+UdynuQ0n7XWUsts8DfZSN+p0P/6XaX1fl0+67kpb/05eFiHwB2zdrI+pQrboAAAAASUVORK5CYII=",Ca="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTAyLTE2VDAwOjI4OjUxLTAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wMi0xNlQxOTozMDo1NS0wMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wMi0xNlQxOTozMDo1NS0wMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozZWEyYTU0Yi00MWY2LWZlNDEtYjYyYS0zOWZiOTE2MjYwYzIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M2VhMmE1NGItNDFmNi1mZTQxLWI2MmEtMzlmYjkxNjI2MGMyIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6M2VhMmE1NGItNDFmNi1mZTQxLWI2MmEtMzlmYjkxNjI2MGMyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozZWEyYTU0Yi00MWY2LWZlNDEtYjYyYS0zOWZiOTE2MjYwYzIiIHN0RXZ0OndoZW49IjIwMjAtMDItMTZUMDA6Mjg6NTEtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6/PUdsAAAAsElEQVQ4jbWUQRLEIAgEYWufnn/PHlIRE1qNbsJRtB1G0CXZ0/F5nGhm39EGd0+lSPIl6AEjdyLHcCdP3XEZ9jE4eXoXaLZXQfacoDPAHrjj6T0gRVFaqyQgP1jkarXgaVsBXUQCLp4GcNuyyvqyI0/gUvPKI2VBe3u9MqYFKslTGY0OoH31EHRnv/UQI5uSkbPe0qgmT8mGGSAqjQO9XyoE4NlRrSv/6X/N2YhX+vQHh+NwJ7x5MBwAAAAASUVORK5CYII=",Ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAyUlEQVQ4jdVU0RLDIAgDb5/e7bPLjq3aSIO6u700L14R00AUuQ20CjUzqllVLxtmpknuZ31k1Vcy2wd7CTkl9UOMrCndIY8Ql18JIzlrT0eKhM+XiJbviohxRtwZhaQKv0PlLO4xb0M1qqXEsretX0fxqBabvNxLhqMCFWbUP5DeU0TW3wxTpegyfg9FNAXB/ZZQru7THOZ+Bne5lu9rvA1TpZK8qFFPq0qBgUKn1OpTRUKZTamjP/mUKmceO59eKShpeZ7eDCLyBhRjepNgzdxBAAAAAElFTkSuQmCC";const oe={beginner:{name:"beginner",width:8,height:8,mines:10},intermediate:{name:"intermediate",width:16,height:16,mines:40},expert:{name:"expert",width:30,height:16,mines:99}},La=()=>({hasMine:!1,nearMines:0,flag:0,revealed:!1,exploded:!1}),ka=(e,t)=>({cells:Array.from(Array(e*t),La),width:e,height:t}),ht=(e,t,n)=>{const i=[];for(let s=t-1;s<=t+1;s++)for(let r=e-1;r<=e+1;r++)r>=0&&r<n.width&&s>=0&&s<n.height&&i.push(n.cells[r+n.width*s]);return i},Wa=e=>{const{width:t,height:n,mines:i}=e,s=ka(t,n),r=t*n;let o=0;for(;o<i;){const d=Math.floor(Math.random()*r),m=s.cells[d];m.hasMine||(m.hasMine=!0,o++)}for(let d=0;d<s.height;d++)for(let m=0;m<s.width;m++){const u=s.cells[m+s.width*d];u.nearMines=ht(m,d,s).filter(A=>A.hasMine).length}return s};function Ba(e){const t=K(),[n,i]=G.exports.useState(oe.beginner),[s,r]=G.exports.useState(),[o,d]=G.exports.useState("new"),[m,u]=G.exports.useState(0),[A,p]=G.exports.useState();G.exports.useEffect(()=>{if(A&&clearInterval(A),o==="new")u(0);else if(o==="playing"){u(0);const I=setInterval(()=>{u(N=>Math.min(N+1,999))},1e3);return p(I),()=>clearInterval(I)}},[o]);const l=()=>{r(Wa(n)),d("new")},h=()=>{d("playing")},c=()=>{d("won")},v=()=>{d("lost")},y=I=>{switch(I){case"game/new":l();break;case"game/beginner":i(oe.beginner);break;case"game/intermediate":i(oe.intermediate);break;case"game/expert":i(oe.expert);break;case"game/exit":t(me(e.windowId));break}},g={"game/difficulty":n.name};G.exports.useEffect(l,[n]);const b=(I,N)=>{const M=I.cells[N];if(!M.revealed&&(M.revealed=!0,M.nearMines===0&&!M.hasMine)){const z=N%I.width,C=~~(N/I.width);ht(z,C,I).forEach(R=>{if(!R.revealed&&!R.hasMine&&R.flag!==1){const Y=I.cells.indexOf(R);b(I,Y)}})}},w=I=>{if(!s)return;o==="new"&&h();const N=W(L({},s),{cells:s.cells.slice()}),M=N.cells[I];M.flag!==1&&(b(N,I),M.hasMine?(v(),M.exploded=!0,N.cells.forEach((z,C)=>{(z.hasMine&&z.flag!==1||!z.hasMine&&z.flag===1)&&b(s,C)})):N.cells.filter(C=>!C.revealed).every(C=>C.hasMine)&&c(),r(N))},T=(I,N)=>{if(I.preventDefault(),!s)return;o==="new"&&h();const M=W(L({},s),{cells:s.cells.slice()}),z=M.cells[N];if(z.revealed)return;z.flag=(z.flag+1)%3;const C=M.cells.filter(Y=>Y.hasMine).every(Y=>Y.flag===1),R=M.cells.filter(Y=>Y.flag===1).length;C&&R===n.mines&&c(),r(M)},Z=s==null?void 0:s.cells.filter(I=>I.flag===1).length,D=o==="new"||o==="playing";return f("div",{className:"mine-root",children:[a("div",{className:"mine-menu-bar",children:a(Re,{menus:ga,data:g,onSelect:y})}),f("div",{className:"mine-content bevel",children:[f("div",{className:"mine-status-bar bevel light inset",children:[a(Ve,{value:n.mines-(Z||0)}),f("button",{className:"mine-reset-button bevel",onClick:l,children:[D&&a("img",{className:"mine-smiley-normal",src:Sa,alt:":)"}),D&&a("img",{className:"mine-smiley-click",src:Ya,alt:":o"}),o==="lost"&&a("img",{className:"mine-smiley-dead",src:za,alt:"X("}),o==="won"&&a("img",{className:"mine-smiley-win",src:Ca,alt:"B)"})]}),a(Ve,{value:m})]}),a("div",{className:U("mine-game-area bevel content",`mine-game-state-${o}`),style:{gridTemplateColumns:`repeat(${s==null?void 0:s.width}, auto)`},children:s==null?void 0:s.cells.map((I,N)=>f("div",{className:U("mine-cell",I.flag===1?"mine-cell-flagged":"",I.revealed?"mine-cell-revealed":""),onClick:()=>w(N),onContextMenu:M=>T(M.nativeEvent,N),children:[a("div",{className:U("mine-cell-content",`mine-cell-near-${I.nearMines}`,I.exploded?"mine-cell-exploded":""),children:I.hasMine?a("img",{src:Ga,alt:"mine"}):!I.hasMine&&I.flag===1?a("img",{src:xa,alt:"wrong"}):I.nearMines||""}),!I.revealed&&f("div",{className:"mine-cell-cover bevel bevel-alt",children:[I.flag===1&&a("img",{src:Za,alt:"F"}),I.flag===2&&a("img",{src:Ta,alt:"?"})]})]},N))})]})]})}const ja=[{id:"game",name:"Game",items:[{id:"new",name:"New"},"---",{id:"easy",name:"Easy",checkIf:{prop:"game/difficulty",value:"easy"}},{id:"medium",name:"Medium",checkIf:{prop:"game/difficulty",value:"medium"}},{id:"hard",name:"Hard",checkIf:{prop:"game/difficulty",value:"hard"}},"---",{id:"mouse",name:"Mouse Controls",checkIf:{prop:"game/mouse",value:"true"}},"---",{id:"exit",name:"Exit"}]},{id:"view",name:"View",items:[{id:"annotations",name:"Annotations",checkIf:{prop:"view/annotations",value:"true"}},{id:"highlight",name:"Highlight Neighbors",checkIf:{prop:"view/highlight",value:"true"}},{id:"warnings",name:"Highlight Conflicts",checkIf:{prop:"view/warnings",value:"true"}}]},{id:"help",name:"Help",items:[{id:"help",name:"Open Help Pages"},{id:"controls",name:"Show Controls"}]}],Oa=()=>({value:0,annotations:Array.from(Array(9),()=>!1),fixed:!1}),Qa=()=>({cells:Array.from(Array(9*9),Oa)}),Fe=async e=>fetch(`https://sugoku.herokuapp.com/board?difficulty=${e}`).then(t=>t.json()).then(t=>{const n=t.board.flat(1),i=Qa();return i.cells.forEach((s,r)=>{s.value=n[r],s.fixed=s.value!==0}),i}),Ua=(e,t)=>{const n=t%9,i=~~(t/9),s=~~(n/3)*3,r=~~(i/3)*3,o=Array.from(Array(9),(A,p)=>9*p+n),d=Array.from(Array(9),(A,p)=>9*i+p),m=Array.from(Array(9),(A,p)=>{const l=s+p%3,h=r+~~(p/3);return 9*h+l}),u=[...o,...d,...m];return new Set(u.map(A=>e[A].value))},Pa=e=>e.cells.every((t,n)=>{const i=e.cells.map(s=>L({},s));return i[n].value=0,!Ua(i,n).has(t.value)});var Va=`### Controls

*Click* on a cell to select it.  
*Click* on the selected cell to cycle value. 
*Right click* cycles down.

Number keys *1-9* to change the selected cell.  
*Ctrl+Number keys* to toggle annotations.

*0* clears the cell value.  
*Ctrl+0* clears annotations.  
*BackSpace* clears cell value and annotations.

*Arrow keys* to move between cells.
*Ctrl+Arrow keys* moves one block (3 cells) at a time.`;const se={easy:"easy",medium:"medium",hard:"hard"},Fa={annotations:!0,highlight:!0,warnings:!0,mouse:!0};function Ja(e){const[t,n]=G.exports.useState(),[i,s]=G.exports.useState(),[r,o]=G.exports.useState("new"),[d,m]=G.exports.useState(0),[u,A]=G.exports.useState(),[p,l]=G.exports.useState(se.easy),[h,c]=G.exports.useState(Fa),[v,y]=G.exports.useState(!0),g=K();G.exports.useEffect(()=>{t&&Pa(t)&&T()},[t]),G.exports.useEffect(()=>{o("new"),Fe(p).then(N=>n(N))},[p]),G.exports.useEffect(()=>{if(u&&clearInterval(u),r==="new")m(0);else if(r==="playing"){m(0);const N=setInterval(()=>{m(M=>Math.min(M+1,9999))},1e3);return A(N),()=>clearInterval(N)}},[r]);const b=N=>{switch(N){case"game/new":o("new"),Fe(p).then(M=>n(M));break;case"game/easy":l(se.easy);break;case"game/medium":l(se.medium);break;case"game/hard":l(se.hard);break;case"game/mouse":c(W(L({},h),{mouse:!h.mouse}));break;case"view/annotations":c(W(L({},h),{annotations:!h.annotations}));break;case"view/highlight":c(W(L({},h),{highlight:!h.highlight}));break;case"view/warnings":c(W(L({},h),{warnings:!h.warnings}));break;case"help/controls":y(!0);break;case"game/exit":g(me(e.windowId));break}},w={"game/difficulty":p,"game/mouse":`${h.mouse}`,"view/annotations":`${h.annotations}`,"view/highlight":`${h.highlight}`,"view/warnings":`${h.warnings}`},T=()=>{o("won"),s(void 0)},Z=(N,M)=>{const z=M%9,C=~~(M/9),R=~~(z/3)+3*~~(C/3),Y=i===void 0,Q=Y?-1:i%9,Ee=Y?-1:~~(i/9),gt=Y?-1:~~(Q/3)+3*~~(Ee/3),De=M!==i&&(z===Q||C===Ee||R===gt),pt=i&&De&&N.value&&N.value===(t==null?void 0:t.cells[i].value);return f("div",{className:U("sudoku-cell",M===i?"sudoku-selected":"",h.highlight&&De?"sudoku-highlight":"",h.warnings&&pt?"sudoku-conflict":"",N.fixed?"sudoku-fixed":""),onClick:q=>D(q.nativeEvent,M),onContextMenu:q=>D(q.nativeEvent,M,!0),children:[a("span",{children:N.value||""}),h.annotations&&!N.value&&a("div",{className:"sudoku-annotations",children:N.annotations.map((q,Ge)=>a("span",{children:q?Ge+1:""},`a_${Ge}`))})]},`cell_${M}`)},D=(N,M,z=!1)=>{if(!!t){if(N.preventDefault(),r==="new"&&o("playing"),M!==i)s(M);else if(h.mouse){const C={cells:t.cells.slice()},R=C.cells[i];if(R.fixed)return;R.value=R.value+(z?-1:1),R.value>9&&(R.value-=10),R.value<0&&(R.value+=10),n(C)}}},I=N=>{if(!t||i===void 0||r==="won")return;const M=N;if(M.preventDefault(),r==="new"&&o("playing"),M.code.startsWith("Arrow")){let R=i%9,Y=~~(i/9);switch(M.code.substring(5)){case"Up":Y-=M.ctrlKey?3:1,Y<0&&(Y+=9);break;case"Down":Y+=M.ctrlKey?3:1,Y>8&&(Y-=9);break;case"Left":R-=M.ctrlKey?3:1,R<0&&(R+=9);break;case"Right":R+=M.ctrlKey?3:1,R>8&&(R-=9);break}s(Y*9+R);return}const z={cells:t.cells.slice()},C=z.cells[i];if(!C.fixed){if(M.code==="Backspace")C.annotations=Array.from(Array(9),()=>!1),C.value=0;else{let R=!1,Y=0;M.code.match(/Digit[0-9]/g)?(R=!0,Y=parseInt(M.code.substring(5))):M.code.match(/Numpad[0-9]/g)&&(R=!0,Y=parseInt(M.code.substring(6))),R&&(M.ctrlKey?Y===0?C.annotations=Array.from(Array(9),()=>!1):C.annotations[Y-1]=!C.annotations[Y-1]:C.value=Y)}n(z)}};return f("div",{className:"sudoku-root",tabIndex:99999,onKeyDown:N=>I(N.nativeEvent),children:[a("div",{className:"sudoku-menu-bar",children:a(Re,{menus:ja,data:w,onSelect:b})}),a("div",{className:U("sudoku-content",r==="won"?"sudoku-won":""),children:f("div",{className:"sudoku-board bevel content",children:[(t==null?void 0:t.cells.map(Z))||a("div",{className:"sudoku-placeholder",children:"Loading game..."}),v&&f("div",{className:"sudoku-help",children:[a(Xe,{children:Va}),a("button",{className:"bevel",onClick:()=>y(!1),children:"Start Game"})]})]})}),f("div",{className:"sudoku-status-bar",children:[a("div",{className:"bevel inset light",children:r==="won"?"COMPLETED":""}),f("div",{className:"bevel inset light",children:["Time: ",d]}),f("div",{className:"bevel inset light",children:["Difficulty: ",p.toUpperCase()]})]})]})}function Xa(){const{windows:e}=Zt(xt),t=K(),n=i=>{switch(i.content){case O.Launcher:return a(_t,{});case O.Help:return a(wn,L({windowId:i.id},i.contentProps));case O.ThemeEditor:return a(In,{});case O.DitherLab:return a(ua,{windowId:i.id});case O.Minesweeper:return a(Ba,{windowId:i.id});case O.Sudoku:return a(Ja,{windowId:i.id})}};return f("div",{className:"desktop",children:[a("button",{className:"bevel",onClick:()=>t(ye(Gt)),children:"Program Manager"}),e.map(i=>a(Ct,W(L({},i),{children:i.content&&n(i)}),i.id))]})}function Ha(){return a("div",{className:"app",children:a(Xa,{})})}const Ka=Nt({reducer:{windows:Tt}}),ut=()=>{const e=window.devicePixelRatio,t=Math.round(e)/e;document.documentElement.style.fontSize=`${16*t}px`};window.onresize=ut;ut();const Je=localStorage.getItem("__theme");Je&&(document.documentElement.className=Je);Rt.render(a(He.StrictMode,{children:a(Et,{store:Ka,children:a(Ha,{})})}),document.getElementById("root"));
